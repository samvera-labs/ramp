"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("manifesto.js"),r=require("mime-db"),n=require("sanitize-html"),a=require("mammoth"),i=require("react-error-boundary"),o=require("classnames"),l=require("video.js");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var c=s(e),d=s(r),f=s(n),p=s(a),m=s(o),v=s(l),h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function g(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var b=y(function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}),x=y(function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}},e.exports.__esModule=!0,e.exports.default=e.exports}),k=y(function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports}),w=y(function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return k(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),E=y(function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}),T=g(y(function(e){e.exports=function(e,t){return b(e)||x(e,t)||w(e,t)||E()},e.exports.__esModule=!0,e.exports.default=e.exports})),S=y(function(e){e.exports=function(e){if(Array.isArray(e))return k(e)},e.exports.__esModule=!0,e.exports.default=e.exports}),C=y(function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports}),I=y(function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}),M=g(y(function(e){e.exports=function(e){return S(e)||C(e)||w(e)||I()},e.exports.__esModule=!0,e.exports.default=e.exports})),R=y(function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),O=g(R),_=y(function(e){var t=R.default;e.exports=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}),j=y(function(e){var t=R.default;e.exports=function(e){var r=_(e,"string");return"symbol"==t(r)?r:r+""},e.exports.__esModule=!0,e.exports.default=e.exports}),P=g(y(function(e){e.exports=function(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports})),A=g(y(function(e){function t(e,t,r,n,a,i,o){try{var l=e[i](o),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise(function(a,i){var o=e.apply(r,n);function l(e){t(o,a,i,l,s,"next",e)}function s(e){t(o,a,i,l,s,"throw",e)}l(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports})),D=y(function(e){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports}),N=y(function(e){function t(r,n,a,i){var o=Object.defineProperty;try{o({},"",{})}catch(r){o=0}e.exports=t=function(e,r,n,a){function i(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?o?o(e,r,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[r]=n:(i("next",0),i("throw",1),i("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,a,i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),L=y(function(e){function t(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var r,n,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function l(e,t,a,i){var o=t&&t.prototype instanceof u?t:u,l=Object.create(o.prototype);return N(l,"_invoke",function(e,t,a){var i,o,l,u=0,c=a||[],d=!1,f={p:0,n:0,v:r,a:p,f:p.bind(r,4),d:function(e,t){return i=e,o=0,l=r,f.n=t,s}};function p(e,t){for(o=e,l=t,n=0;!d&&u&&!a&&n<c.length;n++){var a,i=c[n],p=f.p,m=i[2];e>3?(a=m===t)&&(l=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=r):i[0]<=p&&((a=e<2&&p<i[1])?(o=0,f.v=t,f.n=i[1]):p<m&&(a=e<3||i[0]>t||t>m)&&(i[4]=e,i[5]=t,f.n=m,o=0))}if(a||e>1)return s;throw d=!0,t}return function(a,c,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===c&&p(c,m),o=c,l=m;(n=o<2?r:l)||!d;){i||(o?o<3?(o>1&&(f.n=-1),p(o,l)):f.n=l:f.v=l);try{if(u=2,i){if(o||(a="next"),n=i[a]){if(!(n=n.call(i,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,o<2&&(o=0)}else 1===o&&(n=i.return)&&n.call(i),o<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=r}else if((n=(d=f.n<0)?l:e.call(t,f))!==s)break}catch(e){i=r,o=1,l=e}finally{u=1}}return{value:n,done:d}}}(e,a,i),!0),l}var s={};function u(){}function c(){}function d(){}n=Object.getPrototypeOf;var f=[][i]?n(n([][i]())):(N(n={},i,function(){return this}),n),p=d.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,N(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=d,N(p,"constructor",d),N(d,"constructor",c),c.displayName="GeneratorFunction",N(d,o,"GeneratorFunction"),N(p),N(p,o,"Generator"),N(p,i,function(){return this}),N(p,"toString",function(){return"[object Generator]"}),(e.exports=t=function(){return{w:l,m:m}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),q=y(function(e){e.exports=function e(t,r){function n(e,a,i,o){try{var l=t[e](a),s=l.value;return s instanceof D?r.resolve(s.v).then(function(e){n("next",e,i,o)},function(e){n("throw",e,i,o)}):r.resolve(s).then(function(e){l.value=e,i(l)},function(e){return n("throw",e,i,o)})}catch(e){o(e)}}var a;this.next||(N(e.prototype),N(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),N(this,"_invoke",function(e,t,i){function o(){return new r(function(t,r){n(e,i,t,r)})}return a=a?a.then(o,o):o()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports}),F=y(function(e){e.exports=function(e,t,r,n,a){return new q(L().w(e,t,r,n),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports}),B=y(function(e){e.exports=function(e,t,r,n,a){var i=F(e,t,r,n,a);return i.next().then(function(e){return e.done?e.value:i.next()})},e.exports.__esModule=!0,e.exports.default=e.exports}),U=y(function(e){e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports}),V=y(function(e){var t=R.default;e.exports=function(e){if(null!=e){var r=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(t(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports}),H=y(function(e){function t(){var r=L(),n=r.m(t),a=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function i(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))}var o={throw:1,return:2,break:3,continue:3};function l(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,o[e],t)},delegateYield:function(e,a,i){return t.resultName=a,r(n.d,V(e),i)},finish:function(e){return r(n.f,e)}},r=function(e,r,a){n.p=t.prev,n.n=t.next;try{return e(r,a)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=t=function(){return{wrap:function(e,t,n,a){return r.w(l(e),t,n,a&&a.reverse())},isGeneratorFunction:i,mark:r.m,awrap:function(e,t){return new D(e,t)},AsyncIterator:q,async:function(e,t,r,n,a){return(i(t)?F:B)(l(e),t,r,n,a)},keys:U,values:V}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(),G=H;try{regeneratorRuntime=H}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=H:Function("r","regeneratorRuntime = r")(H)}var z=function(){return z=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},z.apply(this,arguments)};function W(e,t){for(var r={},n={},a=e.split("~~"),i=!1,o=0;a.length>o;o++){for(var l=a[o].split("~"),s=0;s<l.length;s+=2){var u=l[s],c=l[s+1],d="&"+u+";";r[d]=c,i&&(r["&"+u]=c),n[c]=d}i=!0}return t?{entities:z(z({},r),t.entities),characters:z(z({},n),t.characters)}:{entities:r,characters:n}}var J={xml:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html4:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html5:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g},K={};K.xml=W("lt~<~gt~>~quot~\"~apos~'~amp~&"),K.html4=W("apos~'~OElig~Å’~oelig~Å“~Scaron~Å ~scaron~Å¡~Yuml~Å¸~circ~Ë†~tilde~Ëœ~ensp~â€‚~emsp~â€ƒ~thinsp~â€‰~zwnj~â€Œ~zwj~â€~lrm~â€~rlm~â€~ndash~â€“~mdash~â€”~lsquo~â€˜~rsquo~â€™~sbquo~â€š~ldquo~â€œ~rdquo~â€~bdquo~â€~dagger~â€ ~Dagger~â€¡~permil~â€°~lsaquo~â€¹~rsaquo~â€º~euro~â‚¬~fnof~Æ’~Alpha~Î‘~Beta~Î’~Gamma~Î“~Delta~Î”~Epsilon~Î•~Zeta~Î–~Eta~Î—~Theta~Î˜~Iota~Î™~Kappa~Îš~Lambda~Î›~Mu~Îœ~Nu~Î~Xi~Î~Omicron~ÎŸ~Pi~Î ~Rho~Î¡~Sigma~Î£~Tau~Î¤~Upsilon~Î¥~Phi~Î¦~Chi~Î§~Psi~Î¨~Omega~Î©~alpha~Î±~beta~Î²~gamma~Î³~delta~Î´~epsilon~Îµ~zeta~Î¶~eta~Î·~theta~Î¸~iota~Î¹~kappa~Îº~lambda~Î»~mu~Î¼~nu~Î½~xi~Î¾~omicron~Î¿~pi~Ï€~rho~Ï~sigmaf~Ï‚~sigma~Ïƒ~tau~Ï„~upsilon~Ï…~phi~Ï†~chi~Ï‡~psi~Ïˆ~omega~Ï‰~thetasym~Ï‘~upsih~Ï’~piv~Ï–~bull~â€¢~hellip~â€¦~prime~â€²~Prime~â€³~oline~â€¾~frasl~â„~weierp~â„˜~image~â„‘~real~â„œ~trade~â„¢~alefsym~â„µ~larr~â†~uarr~â†‘~rarr~â†’~darr~â†“~harr~â†”~crarr~â†µ~lArr~â‡~uArr~â‡‘~rArr~â‡’~dArr~â‡“~hArr~â‡”~forall~âˆ€~part~âˆ‚~exist~âˆƒ~empty~âˆ…~nabla~âˆ‡~isin~âˆˆ~notin~âˆ‰~ni~âˆ‹~prod~âˆ~sum~âˆ‘~minus~âˆ’~lowast~âˆ—~radic~âˆš~prop~âˆ~infin~âˆ~ang~âˆ ~and~âˆ§~or~âˆ¨~cap~âˆ©~cup~âˆª~int~âˆ«~there4~âˆ´~sim~âˆ¼~cong~â‰…~asymp~â‰ˆ~ne~â‰ ~equiv~â‰¡~le~â‰¤~ge~â‰¥~sub~âŠ‚~sup~âŠƒ~nsub~âŠ„~sube~âŠ†~supe~âŠ‡~oplus~âŠ•~otimes~âŠ—~perp~âŠ¥~sdot~â‹…~lceil~âŒˆ~rceil~âŒ‰~lfloor~âŒŠ~rfloor~âŒ‹~lang~âŒ©~rang~âŒª~loz~â—Š~spades~â™ ~clubs~â™£~hearts~â™¥~diams~â™¦~~nbsp~Â ~iexcl~Â¡~cent~Â¢~pound~Â£~curren~Â¤~yen~Â¥~brvbar~Â¦~sect~Â§~uml~Â¨~copy~Â©~ordf~Âª~laquo~Â«~not~Â¬~shy~Â­~reg~Â®~macr~Â¯~deg~Â°~plusmn~Â±~sup2~Â²~sup3~Â³~acute~Â´~micro~Âµ~para~Â¶~middot~Â·~cedil~Â¸~sup1~Â¹~ordm~Âº~raquo~Â»~frac14~Â¼~frac12~Â½~frac34~Â¾~iquest~Â¿~Agrave~Ã€~Aacute~Ã~Acirc~Ã‚~Atilde~Ãƒ~Auml~Ã„~Aring~Ã…~AElig~Ã†~Ccedil~Ã‡~Egrave~Ãˆ~Eacute~Ã‰~Ecirc~ÃŠ~Euml~Ã‹~Igrave~ÃŒ~Iacute~Ã~Icirc~Ã~Iuml~Ã~ETH~Ã~Ntilde~Ã‘~Ograve~Ã’~Oacute~Ã“~Ocirc~Ã”~Otilde~Ã•~Ouml~Ã–~times~Ã—~Oslash~Ã˜~Ugrave~Ã™~Uacute~Ãš~Ucirc~Ã›~Uuml~Ãœ~Yacute~Ã~THORN~Ã~szlig~ÃŸ~agrave~Ã ~aacute~Ã¡~acirc~Ã¢~atilde~Ã£~auml~Ã¤~aring~Ã¥~aelig~Ã¦~ccedil~Ã§~egrave~Ã¨~eacute~Ã©~ecirc~Ãª~euml~Ã«~igrave~Ã¬~iacute~Ã­~icirc~Ã®~iuml~Ã¯~eth~Ã°~ntilde~Ã±~ograve~Ã²~oacute~Ã³~ocirc~Ã´~otilde~Ãµ~ouml~Ã¶~divide~Ã·~oslash~Ã¸~ugrave~Ã¹~uacute~Ãº~ucirc~Ã»~uuml~Ã¼~yacute~Ã½~thorn~Ã¾~yuml~Ã¿~quot~\"~amp~&~lt~<~gt~>"),K.html5=W('Abreve~Ä‚~Acy~Ğ~Afr~ğ”„~Amacr~Ä€~And~â©“~Aogon~Ä„~Aopf~ğ”¸~ApplyFunction~â¡~Ascr~ğ’œ~Assign~â‰”~Backslash~âˆ–~Barv~â«§~Barwed~âŒ†~Bcy~Ğ‘~Because~âˆµ~Bernoullis~â„¬~Bfr~ğ”…~Bopf~ğ”¹~Breve~Ë˜~Bscr~â„¬~Bumpeq~â‰~CHcy~Ğ§~Cacute~Ä†~Cap~â‹’~CapitalDifferentialD~â……~Cayleys~â„­~Ccaron~ÄŒ~Ccirc~Äˆ~Cconint~âˆ°~Cdot~ÄŠ~Cedilla~Â¸~CenterDot~Â·~Cfr~â„­~CircleDot~âŠ™~CircleMinus~âŠ–~CirclePlus~âŠ•~CircleTimes~âŠ—~ClockwiseContourIntegral~âˆ²~CloseCurlyDoubleQuote~â€~CloseCurlyQuote~â€™~Colon~âˆ·~Colone~â©´~Congruent~â‰¡~Conint~âˆ¯~ContourIntegral~âˆ®~Copf~â„‚~Coproduct~âˆ~CounterClockwiseContourIntegral~âˆ³~Cross~â¨¯~Cscr~ğ’~Cup~â‹“~CupCap~â‰~DD~â……~DDotrahd~â¤‘~DJcy~Ğ‚~DScy~Ğ…~DZcy~Ğ~Darr~â†¡~Dashv~â«¤~Dcaron~Ä~Dcy~Ğ”~Del~âˆ‡~Dfr~ğ”‡~DiacriticalAcute~Â´~DiacriticalDot~Ë™~DiacriticalDoubleAcute~Ë~DiacriticalGrave~`~DiacriticalTilde~Ëœ~Diamond~â‹„~DifferentialD~â…†~Dopf~ğ”»~Dot~Â¨~DotDot~âƒœ~DotEqual~â‰~DoubleContourIntegral~âˆ¯~DoubleDot~Â¨~DoubleDownArrow~â‡“~DoubleLeftArrow~â‡~DoubleLeftRightArrow~â‡”~DoubleLeftTee~â«¤~DoubleLongLeftArrow~âŸ¸~DoubleLongLeftRightArrow~âŸº~DoubleLongRightArrow~âŸ¹~DoubleRightArrow~â‡’~DoubleRightTee~âŠ¨~DoubleUpArrow~â‡‘~DoubleUpDownArrow~â‡•~DoubleVerticalBar~âˆ¥~DownArrow~â†“~DownArrowBar~â¤“~DownArrowUpArrow~â‡µ~DownBreve~Ì‘~DownLeftRightVector~â¥~DownLeftTeeVector~â¥~DownLeftVector~â†½~DownLeftVectorBar~â¥–~DownRightTeeVector~â¥Ÿ~DownRightVector~â‡~DownRightVectorBar~â¥—~DownTee~âŠ¤~DownTeeArrow~â†§~Downarrow~â‡“~Dscr~ğ’Ÿ~Dstrok~Ä~ENG~ÅŠ~Ecaron~Äš~Ecy~Ğ­~Edot~Ä–~Efr~ğ”ˆ~Element~âˆˆ~Emacr~Ä’~EmptySmallSquare~â—»~EmptyVerySmallSquare~â–«~Eogon~Ä˜~Eopf~ğ”¼~Equal~â©µ~EqualTilde~â‰‚~Equilibrium~â‡Œ~Escr~â„°~Esim~â©³~Exists~âˆƒ~ExponentialE~â…‡~Fcy~Ğ¤~Ffr~ğ”‰~FilledSmallSquare~â—¼~FilledVerySmallSquare~â–ª~Fopf~ğ”½~ForAll~âˆ€~Fouriertrf~â„±~Fscr~â„±~GJcy~Ğƒ~Gammad~Ïœ~Gbreve~Ä~Gcedil~Ä¢~Gcirc~Äœ~Gcy~Ğ“~Gdot~Ä ~Gfr~ğ”Š~Gg~â‹™~Gopf~ğ”¾~GreaterEqual~â‰¥~GreaterEqualLess~â‹›~GreaterFullEqual~â‰§~GreaterGreater~âª¢~GreaterLess~â‰·~GreaterSlantEqual~â©¾~GreaterTilde~â‰³~Gscr~ğ’¢~Gt~â‰«~HARDcy~Ğª~Hacek~Ë‡~Hat~^~Hcirc~Ä¤~Hfr~â„Œ~HilbertSpace~â„‹~Hopf~â„~HorizontalLine~â”€~Hscr~â„‹~Hstrok~Ä¦~HumpDownHump~â‰~HumpEqual~â‰~IEcy~Ğ•~IJlig~Ä²~IOcy~Ğ~Icy~Ğ˜~Idot~Ä°~Ifr~â„‘~Im~â„‘~Imacr~Äª~ImaginaryI~â…ˆ~Implies~â‡’~Int~âˆ¬~Integral~âˆ«~Intersection~â‹‚~InvisibleComma~â£~InvisibleTimes~â¢~Iogon~Ä®~Iopf~ğ•€~Iscr~â„~Itilde~Ä¨~Iukcy~Ğ†~Jcirc~Ä´~Jcy~Ğ™~Jfr~ğ”~Jopf~ğ•~Jscr~ğ’¥~Jsercy~Ğˆ~Jukcy~Ğ„~KHcy~Ğ¥~KJcy~ĞŒ~Kcedil~Ä¶~Kcy~Ğš~Kfr~ğ”~Kopf~ğ•‚~Kscr~ğ’¦~LJcy~Ğ‰~Lacute~Ä¹~Lang~âŸª~Laplacetrf~â„’~Larr~â†~Lcaron~Ä½~Lcedil~Ä»~Lcy~Ğ›~LeftAngleBracket~âŸ¨~LeftArrow~â†~LeftArrowBar~â‡¤~LeftArrowRightArrow~â‡†~LeftCeiling~âŒˆ~LeftDoubleBracket~âŸ¦~LeftDownTeeVector~â¥¡~LeftDownVector~â‡ƒ~LeftDownVectorBar~â¥™~LeftFloor~âŒŠ~LeftRightArrow~â†”~LeftRightVector~â¥~LeftTee~âŠ£~LeftTeeArrow~â†¤~LeftTeeVector~â¥š~LeftTriangle~âŠ²~LeftTriangleBar~â§~LeftTriangleEqual~âŠ´~LeftUpDownVector~â¥‘~LeftUpTeeVector~â¥ ~LeftUpVector~â†¿~LeftUpVectorBar~â¥˜~LeftVector~â†¼~LeftVectorBar~â¥’~Leftarrow~â‡~Leftrightarrow~â‡”~LessEqualGreater~â‹š~LessFullEqual~â‰¦~LessGreater~â‰¶~LessLess~âª¡~LessSlantEqual~â©½~LessTilde~â‰²~Lfr~ğ”~Ll~â‹˜~Lleftarrow~â‡š~Lmidot~Ä¿~LongLeftArrow~âŸµ~LongLeftRightArrow~âŸ·~LongRightArrow~âŸ¶~Longleftarrow~âŸ¸~Longleftrightarrow~âŸº~Longrightarrow~âŸ¹~Lopf~ğ•ƒ~LowerLeftArrow~â†™~LowerRightArrow~â†˜~Lscr~â„’~Lsh~â†°~Lstrok~Å~Lt~â‰ª~Map~â¤…~Mcy~Ğœ~MediumSpace~âŸ~Mellintrf~â„³~Mfr~ğ”~MinusPlus~âˆ“~Mopf~ğ•„~Mscr~â„³~NJcy~ĞŠ~Nacute~Åƒ~Ncaron~Å‡~Ncedil~Å…~Ncy~Ğ~NegativeMediumSpace~â€‹~NegativeThickSpace~â€‹~NegativeThinSpace~â€‹~NegativeVeryThinSpace~â€‹~NestedGreaterGreater~â‰«~NestedLessLess~â‰ª~NewLine~\n~Nfr~ğ”‘~NoBreak~â ~NonBreakingSpace~Â ~Nopf~â„•~Not~â«¬~NotCongruent~â‰¢~NotCupCap~â‰­~NotDoubleVerticalBar~âˆ¦~NotElement~âˆ‰~NotEqual~â‰ ~NotEqualTilde~â‰‚Ì¸~NotExists~âˆ„~NotGreater~â‰¯~NotGreaterEqual~â‰±~NotGreaterFullEqual~â‰§Ì¸~NotGreaterGreater~â‰«Ì¸~NotGreaterLess~â‰¹~NotGreaterSlantEqual~â©¾Ì¸~NotGreaterTilde~â‰µ~NotHumpDownHump~â‰Ì¸~NotHumpEqual~â‰Ì¸~NotLeftTriangle~â‹ª~NotLeftTriangleBar~â§Ì¸~NotLeftTriangleEqual~â‹¬~NotLess~â‰®~NotLessEqual~â‰°~NotLessGreater~â‰¸~NotLessLess~â‰ªÌ¸~NotLessSlantEqual~â©½Ì¸~NotLessTilde~â‰´~NotNestedGreaterGreater~âª¢Ì¸~NotNestedLessLess~âª¡Ì¸~NotPrecedes~âŠ€~NotPrecedesEqual~âª¯Ì¸~NotPrecedesSlantEqual~â‹ ~NotReverseElement~âˆŒ~NotRightTriangle~â‹«~NotRightTriangleBar~â§Ì¸~NotRightTriangleEqual~â‹­~NotSquareSubset~âŠÌ¸~NotSquareSubsetEqual~â‹¢~NotSquareSuperset~âŠÌ¸~NotSquareSupersetEqual~â‹£~NotSubset~âŠ‚âƒ’~NotSubsetEqual~âŠˆ~NotSucceeds~âŠ~NotSucceedsEqual~âª°Ì¸~NotSucceedsSlantEqual~â‹¡~NotSucceedsTilde~â‰¿Ì¸~NotSuperset~âŠƒâƒ’~NotSupersetEqual~âŠ‰~NotTilde~â‰~NotTildeEqual~â‰„~NotTildeFullEqual~â‰‡~NotTildeTilde~â‰‰~NotVerticalBar~âˆ¤~Nscr~ğ’©~Ocy~Ğ~Odblac~Å~Ofr~ğ”’~Omacr~ÅŒ~Oopf~ğ•†~OpenCurlyDoubleQuote~â€œ~OpenCurlyQuote~â€˜~Or~â©”~Oscr~ğ’ª~Otimes~â¨·~OverBar~â€¾~OverBrace~â~OverBracket~â´~OverParenthesis~âœ~PartialD~âˆ‚~Pcy~ĞŸ~Pfr~ğ”“~PlusMinus~Â±~Poincareplane~â„Œ~Popf~â„™~Pr~âª»~Precedes~â‰º~PrecedesEqual~âª¯~PrecedesSlantEqual~â‰¼~PrecedesTilde~â‰¾~Product~âˆ~Proportion~âˆ·~Proportional~âˆ~Pscr~ğ’«~Qfr~ğ””~Qopf~â„š~Qscr~ğ’¬~RBarr~â¤~Racute~Å”~Rang~âŸ«~Rarr~â† ~Rarrtl~â¤–~Rcaron~Å˜~Rcedil~Å–~Rcy~Ğ ~Re~â„œ~ReverseElement~âˆ‹~ReverseEquilibrium~â‡‹~ReverseUpEquilibrium~â¥¯~Rfr~â„œ~RightAngleBracket~âŸ©~RightArrow~â†’~RightArrowBar~â‡¥~RightArrowLeftArrow~â‡„~RightCeiling~âŒ‰~RightDoubleBracket~âŸ§~RightDownTeeVector~â¥~RightDownVector~â‡‚~RightDownVectorBar~â¥•~RightFloor~âŒ‹~RightTee~âŠ¢~RightTeeArrow~â†¦~RightTeeVector~â¥›~RightTriangle~âŠ³~RightTriangleBar~â§~RightTriangleEqual~âŠµ~RightUpDownVector~â¥~RightUpTeeVector~â¥œ~RightUpVector~â†¾~RightUpVectorBar~â¥”~RightVector~â‡€~RightVectorBar~â¥“~Rightarrow~â‡’~Ropf~â„~RoundImplies~â¥°~Rrightarrow~â‡›~Rscr~â„›~Rsh~â†±~RuleDelayed~â§´~SHCHcy~Ğ©~SHcy~Ğ¨~SOFTcy~Ğ¬~Sacute~Åš~Sc~âª¼~Scedil~Å~Scirc~Åœ~Scy~Ğ¡~Sfr~ğ”–~ShortDownArrow~â†“~ShortLeftArrow~â†~ShortRightArrow~â†’~ShortUpArrow~â†‘~SmallCircle~âˆ˜~Sopf~ğ•Š~Sqrt~âˆš~Square~â–¡~SquareIntersection~âŠ“~SquareSubset~âŠ~SquareSubsetEqual~âŠ‘~SquareSuperset~âŠ~SquareSupersetEqual~âŠ’~SquareUnion~âŠ”~Sscr~ğ’®~Star~â‹†~Sub~â‹~Subset~â‹~SubsetEqual~âŠ†~Succeeds~â‰»~SucceedsEqual~âª°~SucceedsSlantEqual~â‰½~SucceedsTilde~â‰¿~SuchThat~âˆ‹~Sum~âˆ‘~Sup~â‹‘~Superset~âŠƒ~SupersetEqual~âŠ‡~Supset~â‹‘~TRADE~â„¢~TSHcy~Ğ‹~TScy~Ğ¦~Tab~\t~Tcaron~Å¤~Tcedil~Å¢~Tcy~Ğ¢~Tfr~ğ”—~Therefore~âˆ´~ThickSpace~âŸâ€Š~ThinSpace~â€‰~Tilde~âˆ¼~TildeEqual~â‰ƒ~TildeFullEqual~â‰…~TildeTilde~â‰ˆ~Topf~ğ•‹~TripleDot~âƒ›~Tscr~ğ’¯~Tstrok~Å¦~Uarr~â†Ÿ~Uarrocir~â¥‰~Ubrcy~Ğ~Ubreve~Å¬~Ucy~Ğ£~Udblac~Å°~Ufr~ğ”˜~Umacr~Åª~UnderBar~_~UnderBrace~âŸ~UnderBracket~âµ~UnderParenthesis~â~Union~â‹ƒ~UnionPlus~âŠ~Uogon~Å²~Uopf~ğ•Œ~UpArrow~â†‘~UpArrowBar~â¤’~UpArrowDownArrow~â‡…~UpDownArrow~â†•~UpEquilibrium~â¥®~UpTee~âŠ¥~UpTeeArrow~â†¥~Uparrow~â‡‘~Updownarrow~â‡•~UpperLeftArrow~â†–~UpperRightArrow~â†—~Upsi~Ï’~Uring~Å®~Uscr~ğ’°~Utilde~Å¨~VDash~âŠ«~Vbar~â««~Vcy~Ğ’~Vdash~âŠ©~Vdashl~â«¦~Vee~â‹~Verbar~â€–~Vert~â€–~VerticalBar~âˆ£~VerticalLine~|~VerticalSeparator~â˜~VerticalTilde~â‰€~VeryThinSpace~â€Š~Vfr~ğ”™~Vopf~ğ•~Vscr~ğ’±~Vvdash~âŠª~Wcirc~Å´~Wedge~â‹€~Wfr~ğ”š~Wopf~ğ•~Wscr~ğ’²~Xfr~ğ”›~Xopf~ğ•~Xscr~ğ’³~YAcy~Ğ¯~YIcy~Ğ‡~YUcy~Ğ®~Ycirc~Å¶~Ycy~Ğ«~Yfr~ğ”œ~Yopf~ğ•~Yscr~ğ’´~ZHcy~Ğ–~Zacute~Å¹~Zcaron~Å½~Zcy~Ğ—~Zdot~Å»~ZeroWidthSpace~â€‹~Zfr~â„¨~Zopf~â„¤~Zscr~ğ’µ~abreve~Äƒ~ac~âˆ¾~acE~âˆ¾Ì³~acd~âˆ¿~acy~Ğ°~af~â¡~afr~ğ”~aleph~â„µ~amacr~Ä~amalg~â¨¿~andand~â©•~andd~â©œ~andslope~â©˜~andv~â©š~ange~â¦¤~angle~âˆ ~angmsd~âˆ¡~angmsdaa~â¦¨~angmsdab~â¦©~angmsdac~â¦ª~angmsdad~â¦«~angmsdae~â¦¬~angmsdaf~â¦­~angmsdag~â¦®~angmsdah~â¦¯~angrt~âˆŸ~angrtvb~âŠ¾~angrtvbd~â¦~angsph~âˆ¢~angst~Ã…~angzarr~â¼~aogon~Ä…~aopf~ğ•’~ap~â‰ˆ~apE~â©°~apacir~â©¯~ape~â‰Š~apid~â‰‹~approx~â‰ˆ~approxeq~â‰Š~ascr~ğ’¶~ast~*~asympeq~â‰~awconint~âˆ³~awint~â¨‘~bNot~â«­~backcong~â‰Œ~backepsilon~Ï¶~backprime~â€µ~backsim~âˆ½~backsimeq~â‹~barvee~âŠ½~barwed~âŒ…~barwedge~âŒ…~bbrk~âµ~bbrktbrk~â¶~bcong~â‰Œ~bcy~Ğ±~becaus~âˆµ~because~âˆµ~bemptyv~â¦°~bepsi~Ï¶~bernou~â„¬~beth~â„¶~between~â‰¬~bfr~ğ”Ÿ~bigcap~â‹‚~bigcirc~â—¯~bigcup~â‹ƒ~bigodot~â¨€~bigoplus~â¨~bigotimes~â¨‚~bigsqcup~â¨†~bigstar~â˜…~bigtriangledown~â–½~bigtriangleup~â–³~biguplus~â¨„~bigvee~â‹~bigwedge~â‹€~bkarow~â¤~blacklozenge~â§«~blacksquare~â–ª~blacktriangle~â–´~blacktriangledown~â–¾~blacktriangleleft~â—‚~blacktriangleright~â–¸~blank~â£~blk12~â–’~blk14~â–‘~blk34~â–“~block~â–ˆ~bne~=âƒ¥~bnequiv~â‰¡âƒ¥~bnot~âŒ~bopf~ğ•“~bot~âŠ¥~bottom~âŠ¥~bowtie~â‹ˆ~boxDL~â•—~boxDR~â•”~boxDl~â•–~boxDr~â•“~boxH~â•~boxHD~â•¦~boxHU~â•©~boxHd~â•¤~boxHu~â•§~boxUL~â•~boxUR~â•š~boxUl~â•œ~boxUr~â•™~boxV~â•‘~boxVH~â•¬~boxVL~â•£~boxVR~â• ~boxVh~â•«~boxVl~â•¢~boxVr~â•Ÿ~boxbox~â§‰~boxdL~â••~boxdR~â•’~boxdl~â”~boxdr~â”Œ~boxh~â”€~boxhD~â•¥~boxhU~â•¨~boxhd~â”¬~boxhu~â”´~boxminus~âŠŸ~boxplus~âŠ~boxtimes~âŠ ~boxuL~â•›~boxuR~â•˜~boxul~â”˜~boxur~â””~boxv~â”‚~boxvH~â•ª~boxvL~â•¡~boxvR~â•~boxvh~â”¼~boxvl~â”¤~boxvr~â”œ~bprime~â€µ~breve~Ë˜~bscr~ğ’·~bsemi~â~bsim~âˆ½~bsime~â‹~bsol~\\~bsolb~â§…~bsolhsub~âŸˆ~bullet~â€¢~bump~â‰~bumpE~âª®~bumpe~â‰~bumpeq~â‰~cacute~Ä‡~capand~â©„~capbrcup~â©‰~capcap~â©‹~capcup~â©‡~capdot~â©€~caps~âˆ©ï¸€~caret~â~caron~Ë‡~ccaps~â©~ccaron~Ä~ccirc~Ä‰~ccups~â©Œ~ccupssm~â©~cdot~Ä‹~cemptyv~â¦²~centerdot~Â·~cfr~ğ” ~chcy~Ñ‡~check~âœ“~checkmark~âœ“~cir~â—‹~cirE~â§ƒ~circeq~â‰—~circlearrowleft~â†º~circlearrowright~â†»~circledR~Â®~circledS~â“ˆ~circledast~âŠ›~circledcirc~âŠš~circleddash~âŠ~cire~â‰—~cirfnint~â¨~cirmid~â«¯~cirscir~â§‚~clubsuit~â™£~colon~:~colone~â‰”~coloneq~â‰”~comma~,~commat~@~comp~âˆ~compfn~âˆ˜~complement~âˆ~complexes~â„‚~congdot~â©­~conint~âˆ®~copf~ğ•”~coprod~âˆ~copysr~â„—~cross~âœ—~cscr~ğ’¸~csub~â«~csube~â«‘~csup~â«~csupe~â«’~ctdot~â‹¯~cudarrl~â¤¸~cudarrr~â¤µ~cuepr~â‹~cuesc~â‹Ÿ~cularr~â†¶~cularrp~â¤½~cupbrcap~â©ˆ~cupcap~â©†~cupcup~â©Š~cupdot~âŠ~cupor~â©…~cups~âˆªï¸€~curarr~â†·~curarrm~â¤¼~curlyeqprec~â‹~curlyeqsucc~â‹Ÿ~curlyvee~â‹~curlywedge~â‹~curvearrowleft~â†¶~curvearrowright~â†·~cuvee~â‹~cuwed~â‹~cwconint~âˆ²~cwint~âˆ±~cylcty~âŒ­~dHar~â¥¥~daleth~â„¸~dash~â€~dashv~âŠ£~dbkarow~â¤~dblac~Ë~dcaron~Ä~dcy~Ğ´~dd~â…†~ddagger~â€¡~ddarr~â‡Š~ddotseq~â©·~demptyv~â¦±~dfisht~â¥¿~dfr~ğ”¡~dharl~â‡ƒ~dharr~â‡‚~diam~â‹„~diamond~â‹„~diamondsuit~â™¦~die~Â¨~digamma~Ï~disin~â‹²~div~Ã·~divideontimes~â‹‡~divonx~â‹‡~djcy~Ñ’~dlcorn~âŒ~dlcrop~âŒ~dollar~$~dopf~ğ••~dot~Ë™~doteq~â‰~doteqdot~â‰‘~dotminus~âˆ¸~dotplus~âˆ”~dotsquare~âŠ¡~doublebarwedge~âŒ†~downarrow~â†“~downdownarrows~â‡Š~downharpoonleft~â‡ƒ~downharpoonright~â‡‚~drbkarow~â¤~drcorn~âŒŸ~drcrop~âŒŒ~dscr~ğ’¹~dscy~Ñ•~dsol~â§¶~dstrok~Ä‘~dtdot~â‹±~dtri~â–¿~dtrif~â–¾~duarr~â‡µ~duhar~â¥¯~dwangle~â¦¦~dzcy~ÑŸ~dzigrarr~âŸ¿~eDDot~â©·~eDot~â‰‘~easter~â©®~ecaron~Ä›~ecir~â‰–~ecolon~â‰•~ecy~Ñ~edot~Ä—~ee~â…‡~efDot~â‰’~efr~ğ”¢~eg~âªš~egs~âª–~egsdot~âª˜~el~âª™~elinters~â§~ell~â„“~els~âª•~elsdot~âª—~emacr~Ä“~emptyset~âˆ…~emptyv~âˆ…~emsp13~â€„~emsp14~â€…~eng~Å‹~eogon~Ä™~eopf~ğ•–~epar~â‹•~eparsl~â§£~eplus~â©±~epsi~Îµ~epsiv~Ïµ~eqcirc~â‰–~eqcolon~â‰•~eqsim~â‰‚~eqslantgtr~âª–~eqslantless~âª•~equals~=~equest~â‰Ÿ~equivDD~â©¸~eqvparsl~â§¥~erDot~â‰“~erarr~â¥±~escr~â„¯~esdot~â‰~esim~â‰‚~excl~!~expectation~â„°~exponentiale~â…‡~fallingdotseq~â‰’~fcy~Ñ„~female~â™€~ffilig~ï¬ƒ~fflig~ï¬€~ffllig~ï¬„~ffr~ğ”£~filig~ï¬~fjlig~fj~flat~â™­~fllig~ï¬‚~fltns~â–±~fopf~ğ•—~fork~â‹”~forkv~â«™~fpartint~â¨~frac13~â…“~frac15~â…•~frac16~â…™~frac18~â…›~frac23~â…”~frac25~â…–~frac35~â…—~frac38~â…œ~frac45~â…˜~frac56~â…š~frac58~â…~frac78~â…~frown~âŒ¢~fscr~ğ’»~gE~â‰§~gEl~âªŒ~gacute~Çµ~gammad~Ï~gap~âª†~gbreve~ÄŸ~gcirc~Ä~gcy~Ğ³~gdot~Ä¡~gel~â‹›~geq~â‰¥~geqq~â‰§~geqslant~â©¾~ges~â©¾~gescc~âª©~gesdot~âª€~gesdoto~âª‚~gesdotol~âª„~gesl~â‹›ï¸€~gesles~âª”~gfr~ğ”¤~gg~â‰«~ggg~â‹™~gimel~â„·~gjcy~Ñ“~gl~â‰·~glE~âª’~gla~âª¥~glj~âª¤~gnE~â‰©~gnap~âªŠ~gnapprox~âªŠ~gne~âªˆ~gneq~âªˆ~gneqq~â‰©~gnsim~â‹§~gopf~ğ•˜~grave~`~gscr~â„Š~gsim~â‰³~gsime~âª~gsiml~âª~gtcc~âª§~gtcir~â©º~gtdot~â‹—~gtlPar~â¦•~gtquest~â©¼~gtrapprox~âª†~gtrarr~â¥¸~gtrdot~â‹—~gtreqless~â‹›~gtreqqless~âªŒ~gtrless~â‰·~gtrsim~â‰³~gvertneqq~â‰©ï¸€~gvnE~â‰©ï¸€~hairsp~â€Š~half~Â½~hamilt~â„‹~hardcy~ÑŠ~harrcir~â¥ˆ~harrw~â†­~hbar~â„~hcirc~Ä¥~heartsuit~â™¥~hercon~âŠ¹~hfr~ğ”¥~hksearow~â¤¥~hkswarow~â¤¦~hoarr~â‡¿~homtht~âˆ»~hookleftarrow~â†©~hookrightarrow~â†ª~hopf~ğ•™~horbar~â€•~hscr~ğ’½~hslash~â„~hstrok~Ä§~hybull~âƒ~hyphen~â€~ic~â£~icy~Ğ¸~iecy~Ğµ~iff~â‡”~ifr~ğ”¦~ii~â…ˆ~iiiint~â¨Œ~iiint~âˆ­~iinfin~â§œ~iiota~â„©~ijlig~Ä³~imacr~Ä«~imagline~â„~imagpart~â„‘~imath~Ä±~imof~âŠ·~imped~Æµ~in~âˆˆ~incare~â„…~infintie~â§~inodot~Ä±~intcal~âŠº~integers~â„¤~intercal~âŠº~intlarhk~â¨—~intprod~â¨¼~iocy~Ñ‘~iogon~Ä¯~iopf~ğ•š~iprod~â¨¼~iscr~ğ’¾~isinE~â‹¹~isindot~â‹µ~isins~â‹´~isinsv~â‹³~isinv~âˆˆ~it~â¢~itilde~Ä©~iukcy~Ñ–~jcirc~Äµ~jcy~Ğ¹~jfr~ğ”§~jmath~È·~jopf~ğ•›~jscr~ğ’¿~jsercy~Ñ˜~jukcy~Ñ”~kappav~Ï°~kcedil~Ä·~kcy~Ğº~kfr~ğ”¨~kgreen~Ä¸~khcy~Ñ…~kjcy~Ñœ~kopf~ğ•œ~kscr~ğ“€~lAarr~â‡š~lAtail~â¤›~lBarr~â¤~lE~â‰¦~lEg~âª‹~lHar~â¥¢~lacute~Äº~laemptyv~â¦´~lagran~â„’~langd~â¦‘~langle~âŸ¨~lap~âª…~larrb~â‡¤~larrbfs~â¤Ÿ~larrfs~â¤~larrhk~â†©~larrlp~â†«~larrpl~â¤¹~larrsim~â¥³~larrtl~â†¢~lat~âª«~latail~â¤™~late~âª­~lates~âª­ï¸€~lbarr~â¤Œ~lbbrk~â²~lbrace~{~lbrack~[~lbrke~â¦‹~lbrksld~â¦~lbrkslu~â¦~lcaron~Ä¾~lcedil~Ä¼~lcub~{~lcy~Ğ»~ldca~â¤¶~ldquor~â€~ldrdhar~â¥§~ldrushar~â¥‹~ldsh~â†²~leftarrow~â†~leftarrowtail~â†¢~leftharpoondown~â†½~leftharpoonup~â†¼~leftleftarrows~â‡‡~leftrightarrow~â†”~leftrightarrows~â‡†~leftrightharpoons~â‡‹~leftrightsquigarrow~â†­~leftthreetimes~â‹‹~leg~â‹š~leq~â‰¤~leqq~â‰¦~leqslant~â©½~les~â©½~lescc~âª¨~lesdot~â©¿~lesdoto~âª~lesdotor~âªƒ~lesg~â‹šï¸€~lesges~âª“~lessapprox~âª…~lessdot~â‹–~lesseqgtr~â‹š~lesseqqgtr~âª‹~lessgtr~â‰¶~lesssim~â‰²~lfisht~â¥¼~lfr~ğ”©~lg~â‰¶~lgE~âª‘~lhard~â†½~lharu~â†¼~lharul~â¥ª~lhblk~â–„~ljcy~Ñ™~ll~â‰ª~llarr~â‡‡~llcorner~âŒ~llhard~â¥«~lltri~â—º~lmidot~Å€~lmoust~â°~lmoustache~â°~lnE~â‰¨~lnap~âª‰~lnapprox~âª‰~lne~âª‡~lneq~âª‡~lneqq~â‰¨~lnsim~â‹¦~loang~âŸ¬~loarr~â‡½~lobrk~âŸ¦~longleftarrow~âŸµ~longleftrightarrow~âŸ·~longmapsto~âŸ¼~longrightarrow~âŸ¶~looparrowleft~â†«~looparrowright~â†¬~lopar~â¦…~lopf~ğ•~loplus~â¨­~lotimes~â¨´~lowbar~_~lozenge~â—Š~lozf~â§«~lpar~(~lparlt~â¦“~lrarr~â‡†~lrcorner~âŒŸ~lrhar~â‡‹~lrhard~â¥­~lrtri~âŠ¿~lscr~ğ“~lsh~â†°~lsim~â‰²~lsime~âª~lsimg~âª~lsqb~[~lsquor~â€š~lstrok~Å‚~ltcc~âª¦~ltcir~â©¹~ltdot~â‹–~lthree~â‹‹~ltimes~â‹‰~ltlarr~â¥¶~ltquest~â©»~ltrPar~â¦–~ltri~â—ƒ~ltrie~âŠ´~ltrif~â—‚~lurdshar~â¥Š~luruhar~â¥¦~lvertneqq~â‰¨ï¸€~lvnE~â‰¨ï¸€~mDDot~âˆº~male~â™‚~malt~âœ ~maltese~âœ ~map~â†¦~mapsto~â†¦~mapstodown~â†§~mapstoleft~â†¤~mapstoup~â†¥~marker~â–®~mcomma~â¨©~mcy~Ğ¼~measuredangle~âˆ¡~mfr~ğ”ª~mho~â„§~mid~âˆ£~midast~*~midcir~â«°~minusb~âŠŸ~minusd~âˆ¸~minusdu~â¨ª~mlcp~â«›~mldr~â€¦~mnplus~âˆ“~models~âŠ§~mopf~ğ•~mp~âˆ“~mscr~ğ“‚~mstpos~âˆ¾~multimap~âŠ¸~mumap~âŠ¸~nGg~â‹™Ì¸~nGt~â‰«âƒ’~nGtv~â‰«Ì¸~nLeftarrow~â‡~nLeftrightarrow~â‡~nLl~â‹˜Ì¸~nLt~â‰ªâƒ’~nLtv~â‰ªÌ¸~nRightarrow~â‡~nVDash~âŠ¯~nVdash~âŠ®~nacute~Å„~nang~âˆ âƒ’~nap~â‰‰~napE~â©°Ì¸~napid~â‰‹Ì¸~napos~Å‰~napprox~â‰‰~natur~â™®~natural~â™®~naturals~â„•~nbump~â‰Ì¸~nbumpe~â‰Ì¸~ncap~â©ƒ~ncaron~Åˆ~ncedil~Å†~ncong~â‰‡~ncongdot~â©­Ì¸~ncup~â©‚~ncy~Ğ½~neArr~â‡—~nearhk~â¤¤~nearr~â†—~nearrow~â†—~nedot~â‰Ì¸~nequiv~â‰¢~nesear~â¤¨~nesim~â‰‚Ì¸~nexist~âˆ„~nexists~âˆ„~nfr~ğ”«~ngE~â‰§Ì¸~nge~â‰±~ngeq~â‰±~ngeqq~â‰§Ì¸~ngeqslant~â©¾Ì¸~nges~â©¾Ì¸~ngsim~â‰µ~ngt~â‰¯~ngtr~â‰¯~nhArr~â‡~nharr~â†®~nhpar~â«²~nis~â‹¼~nisd~â‹º~niv~âˆ‹~njcy~Ñš~nlArr~â‡~nlE~â‰¦Ì¸~nlarr~â†š~nldr~â€¥~nle~â‰°~nleftarrow~â†š~nleftrightarrow~â†®~nleq~â‰°~nleqq~â‰¦Ì¸~nleqslant~â©½Ì¸~nles~â©½Ì¸~nless~â‰®~nlsim~â‰´~nlt~â‰®~nltri~â‹ª~nltrie~â‹¬~nmid~âˆ¤~nopf~ğ•Ÿ~notinE~â‹¹Ì¸~notindot~â‹µÌ¸~notinva~âˆ‰~notinvb~â‹·~notinvc~â‹¶~notni~âˆŒ~notniva~âˆŒ~notnivb~â‹¾~notnivc~â‹½~npar~âˆ¦~nparallel~âˆ¦~nparsl~â«½âƒ¥~npart~âˆ‚Ì¸~npolint~â¨”~npr~âŠ€~nprcue~â‹ ~npre~âª¯Ì¸~nprec~âŠ€~npreceq~âª¯Ì¸~nrArr~â‡~nrarr~â†›~nrarrc~â¤³Ì¸~nrarrw~â†Ì¸~nrightarrow~â†›~nrtri~â‹«~nrtrie~â‹­~nsc~âŠ~nsccue~â‹¡~nsce~âª°Ì¸~nscr~ğ“ƒ~nshortmid~âˆ¤~nshortparallel~âˆ¦~nsim~â‰~nsime~â‰„~nsimeq~â‰„~nsmid~âˆ¤~nspar~âˆ¦~nsqsube~â‹¢~nsqsupe~â‹£~nsubE~â«…Ì¸~nsube~âŠˆ~nsubset~âŠ‚âƒ’~nsubseteq~âŠˆ~nsubseteqq~â«…Ì¸~nsucc~âŠ~nsucceq~âª°Ì¸~nsup~âŠ…~nsupE~â«†Ì¸~nsupe~âŠ‰~nsupset~âŠƒâƒ’~nsupseteq~âŠ‰~nsupseteqq~â«†Ì¸~ntgl~â‰¹~ntlg~â‰¸~ntriangleleft~â‹ª~ntrianglelefteq~â‹¬~ntriangleright~â‹«~ntrianglerighteq~â‹­~num~#~numero~â„–~numsp~â€‡~nvDash~âŠ­~nvHarr~â¤„~nvap~â‰âƒ’~nvdash~âŠ¬~nvge~â‰¥âƒ’~nvgt~>âƒ’~nvinfin~â§~nvlArr~â¤‚~nvle~â‰¤âƒ’~nvlt~<âƒ’~nvltrie~âŠ´âƒ’~nvrArr~â¤ƒ~nvrtrie~âŠµâƒ’~nvsim~âˆ¼âƒ’~nwArr~â‡–~nwarhk~â¤£~nwarr~â†–~nwarrow~â†–~nwnear~â¤§~oS~â“ˆ~oast~âŠ›~ocir~âŠš~ocy~Ğ¾~odash~âŠ~odblac~Å‘~odiv~â¨¸~odot~âŠ™~odsold~â¦¼~ofcir~â¦¿~ofr~ğ”¬~ogon~Ë›~ogt~â§~ohbar~â¦µ~ohm~Î©~oint~âˆ®~olarr~â†º~olcir~â¦¾~olcross~â¦»~olt~â§€~omacr~Å~omid~â¦¶~ominus~âŠ–~oopf~ğ• ~opar~â¦·~operp~â¦¹~orarr~â†»~ord~â©~order~â„´~orderof~â„´~origof~âŠ¶~oror~â©–~orslope~â©—~orv~â©›~oscr~â„´~osol~âŠ˜~otimesas~â¨¶~ovbar~âŒ½~par~âˆ¥~parallel~âˆ¥~parsim~â«³~parsl~â«½~pcy~Ğ¿~percnt~%~period~.~pertenk~â€±~pfr~ğ”­~phiv~Ï•~phmmat~â„³~phone~â˜~pitchfork~â‹”~planck~â„~planckh~â„~plankv~â„~plus~+~plusacir~â¨£~plusb~âŠ~pluscir~â¨¢~plusdo~âˆ”~plusdu~â¨¥~pluse~â©²~plussim~â¨¦~plustwo~â¨§~pm~Â±~pointint~â¨•~popf~ğ•¡~pr~â‰º~prE~âª³~prap~âª·~prcue~â‰¼~pre~âª¯~prec~â‰º~precapprox~âª·~preccurlyeq~â‰¼~preceq~âª¯~precnapprox~âª¹~precneqq~âªµ~precnsim~â‹¨~precsim~â‰¾~primes~â„™~prnE~âªµ~prnap~âª¹~prnsim~â‹¨~profalar~âŒ®~profline~âŒ’~profsurf~âŒ“~propto~âˆ~prsim~â‰¾~prurel~âŠ°~pscr~ğ“…~puncsp~â€ˆ~qfr~ğ”®~qint~â¨Œ~qopf~ğ•¢~qprime~â—~qscr~ğ“†~quaternions~â„~quatint~â¨–~quest~?~questeq~â‰Ÿ~rAarr~â‡›~rAtail~â¤œ~rBarr~â¤~rHar~â¥¤~race~âˆ½Ì±~racute~Å•~raemptyv~â¦³~rangd~â¦’~range~â¦¥~rangle~âŸ©~rarrap~â¥µ~rarrb~â‡¥~rarrbfs~â¤ ~rarrc~â¤³~rarrfs~â¤~rarrhk~â†ª~rarrlp~â†¬~rarrpl~â¥…~rarrsim~â¥´~rarrtl~â†£~rarrw~â†~ratail~â¤š~ratio~âˆ¶~rationals~â„š~rbarr~â¤~rbbrk~â³~rbrace~}~rbrack~]~rbrke~â¦Œ~rbrksld~â¦~rbrkslu~â¦~rcaron~Å™~rcedil~Å—~rcub~}~rcy~Ñ€~rdca~â¤·~rdldhar~â¥©~rdquor~â€~rdsh~â†³~realine~â„›~realpart~â„œ~reals~â„~rect~â–­~rfisht~â¥½~rfr~ğ”¯~rhard~â‡~rharu~â‡€~rharul~â¥¬~rhov~Ï±~rightarrow~â†’~rightarrowtail~â†£~rightharpoondown~â‡~rightharpoonup~â‡€~rightleftarrows~â‡„~rightleftharpoons~â‡Œ~rightrightarrows~â‡‰~rightsquigarrow~â†~rightthreetimes~â‹Œ~ring~Ëš~risingdotseq~â‰“~rlarr~â‡„~rlhar~â‡Œ~rmoust~â±~rmoustache~â±~rnmid~â«®~roang~âŸ­~roarr~â‡¾~robrk~âŸ§~ropar~â¦†~ropf~ğ•£~roplus~â¨®~rotimes~â¨µ~rpar~)~rpargt~â¦”~rppolint~â¨’~rrarr~â‡‰~rscr~ğ“‡~rsh~â†±~rsqb~]~rsquor~â€™~rthree~â‹Œ~rtimes~â‹Š~rtri~â–¹~rtrie~âŠµ~rtrif~â–¸~rtriltri~â§~ruluhar~â¥¨~rx~â„~sacute~Å›~sc~â‰»~scE~âª´~scap~âª¸~sccue~â‰½~sce~âª°~scedil~ÅŸ~scirc~Å~scnE~âª¶~scnap~âªº~scnsim~â‹©~scpolint~â¨“~scsim~â‰¿~scy~Ñ~sdotb~âŠ¡~sdote~â©¦~seArr~â‡˜~searhk~â¤¥~searr~â†˜~searrow~â†˜~semi~;~seswar~â¤©~setminus~âˆ–~setmn~âˆ–~sext~âœ¶~sfr~ğ”°~sfrown~âŒ¢~sharp~â™¯~shchcy~Ñ‰~shcy~Ñˆ~shortmid~âˆ£~shortparallel~âˆ¥~sigmav~Ï‚~simdot~â©ª~sime~â‰ƒ~simeq~â‰ƒ~simg~âª~simgE~âª ~siml~âª~simlE~âªŸ~simne~â‰†~simplus~â¨¤~simrarr~â¥²~slarr~â†~smallsetminus~âˆ–~smashp~â¨³~smeparsl~â§¤~smid~âˆ£~smile~âŒ£~smt~âªª~smte~âª¬~smtes~âª¬ï¸€~softcy~ÑŒ~sol~/~solb~â§„~solbar~âŒ¿~sopf~ğ•¤~spadesuit~â™ ~spar~âˆ¥~sqcap~âŠ“~sqcaps~âŠ“ï¸€~sqcup~âŠ”~sqcups~âŠ”ï¸€~sqsub~âŠ~sqsube~âŠ‘~sqsubset~âŠ~sqsubseteq~âŠ‘~sqsup~âŠ~sqsupe~âŠ’~sqsupset~âŠ~sqsupseteq~âŠ’~squ~â–¡~square~â–¡~squarf~â–ª~squf~â–ª~srarr~â†’~sscr~ğ“ˆ~ssetmn~âˆ–~ssmile~âŒ£~sstarf~â‹†~star~â˜†~starf~â˜…~straightepsilon~Ïµ~straightphi~Ï•~strns~Â¯~subE~â«…~subdot~âª½~subedot~â«ƒ~submult~â«~subnE~â«‹~subne~âŠŠ~subplus~âª¿~subrarr~â¥¹~subset~âŠ‚~subseteq~âŠ†~subseteqq~â«…~subsetneq~âŠŠ~subsetneqq~â«‹~subsim~â«‡~subsub~â«•~subsup~â«“~succ~â‰»~succapprox~âª¸~succcurlyeq~â‰½~succeq~âª°~succnapprox~âªº~succneqq~âª¶~succnsim~â‹©~succsim~â‰¿~sung~â™ª~supE~â«†~supdot~âª¾~supdsub~â«˜~supedot~â«„~suphsol~âŸ‰~suphsub~â«—~suplarr~â¥»~supmult~â«‚~supnE~â«Œ~supne~âŠ‹~supplus~â«€~supset~âŠƒ~supseteq~âŠ‡~supseteqq~â«†~supsetneq~âŠ‹~supsetneqq~â«Œ~supsim~â«ˆ~supsub~â«”~supsup~â«–~swArr~â‡™~swarhk~â¤¦~swarr~â†™~swarrow~â†™~swnwar~â¤ª~target~âŒ–~tbrk~â´~tcaron~Å¥~tcedil~Å£~tcy~Ñ‚~tdot~âƒ›~telrec~âŒ•~tfr~ğ”±~therefore~âˆ´~thetav~Ï‘~thickapprox~â‰ˆ~thicksim~âˆ¼~thkap~â‰ˆ~thksim~âˆ¼~timesb~âŠ ~timesbar~â¨±~timesd~â¨°~tint~âˆ­~toea~â¤¨~top~âŠ¤~topbot~âŒ¶~topcir~â«±~topf~ğ•¥~topfork~â«š~tosa~â¤©~tprime~â€´~triangle~â–µ~triangledown~â–¿~triangleleft~â—ƒ~trianglelefteq~âŠ´~triangleq~â‰œ~triangleright~â–¹~trianglerighteq~âŠµ~tridot~â—¬~trie~â‰œ~triminus~â¨º~triplus~â¨¹~trisb~â§~tritime~â¨»~trpezium~â¢~tscr~ğ“‰~tscy~Ñ†~tshcy~Ñ›~tstrok~Å§~twixt~â‰¬~twoheadleftarrow~â†~twoheadrightarrow~â† ~uHar~â¥£~ubrcy~Ñ~ubreve~Å­~ucy~Ñƒ~udarr~â‡…~udblac~Å±~udhar~â¥®~ufisht~â¥¾~ufr~ğ”²~uharl~â†¿~uharr~â†¾~uhblk~â–€~ulcorn~âŒœ~ulcorner~âŒœ~ulcrop~âŒ~ultri~â—¸~umacr~Å«~uogon~Å³~uopf~ğ•¦~uparrow~â†‘~updownarrow~â†•~upharpoonleft~â†¿~upharpoonright~â†¾~uplus~âŠ~upsi~Ï…~upuparrows~â‡ˆ~urcorn~âŒ~urcorner~âŒ~urcrop~âŒ~uring~Å¯~urtri~â—¹~uscr~ğ“Š~utdot~â‹°~utilde~Å©~utri~â–µ~utrif~â–´~uuarr~â‡ˆ~uwangle~â¦§~vArr~â‡•~vBar~â«¨~vBarv~â«©~vDash~âŠ¨~vangrt~â¦œ~varepsilon~Ïµ~varkappa~Ï°~varnothing~âˆ…~varphi~Ï•~varpi~Ï–~varpropto~âˆ~varr~â†•~varrho~Ï±~varsigma~Ï‚~varsubsetneq~âŠŠï¸€~varsubsetneqq~â«‹ï¸€~varsupsetneq~âŠ‹ï¸€~varsupsetneqq~â«Œï¸€~vartheta~Ï‘~vartriangleleft~âŠ²~vartriangleright~âŠ³~vcy~Ğ²~vdash~âŠ¢~vee~âˆ¨~veebar~âŠ»~veeeq~â‰š~vellip~â‹®~verbar~|~vert~|~vfr~ğ”³~vltri~âŠ²~vnsub~âŠ‚âƒ’~vnsup~âŠƒâƒ’~vopf~ğ•§~vprop~âˆ~vrtri~âŠ³~vscr~ğ“‹~vsubnE~â«‹ï¸€~vsubne~âŠŠï¸€~vsupnE~â«Œï¸€~vsupne~âŠ‹ï¸€~vzigzag~â¦š~wcirc~Åµ~wedbar~â©Ÿ~wedge~âˆ§~wedgeq~â‰™~wfr~ğ”´~wopf~ğ•¨~wp~â„˜~wr~â‰€~wreath~â‰€~wscr~ğ“Œ~xcap~â‹‚~xcirc~â—¯~xcup~â‹ƒ~xdtri~â–½~xfr~ğ”µ~xhArr~âŸº~xharr~âŸ·~xlArr~âŸ¸~xlarr~âŸµ~xmap~âŸ¼~xnis~â‹»~xodot~â¨€~xopf~ğ•©~xoplus~â¨~xotime~â¨‚~xrArr~âŸ¹~xrarr~âŸ¶~xscr~ğ“~xsqcup~â¨†~xuplus~â¨„~xutri~â–³~xvee~â‹~xwedge~â‹€~yacy~Ñ~ycirc~Å·~ycy~Ñ‹~yfr~ğ”¶~yicy~Ñ—~yopf~ğ•ª~yscr~ğ“~yucy~Ñ~zacute~Åº~zcaron~Å¾~zcy~Ğ·~zdot~Å¼~zeetrf~â„¨~zfr~ğ”·~zhcy~Ğ¶~zigrarr~â‡~zopf~ğ•«~zscr~ğ“~~AMP~&~COPY~Â©~GT~>~LT~<~QUOT~"~REG~Â®',K.html4);var Z={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},Q=String.fromCodePoint||function(e){return String.fromCharCode(Math.floor((e-65536)/1024)+55296,(e-65536)%1024+56320)},X=function(){return X=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},X.apply(this,arguments)},$=X(X({},K),{all:K.html5}),Y={scope:"body",level:"all"},ee=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,te=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,re={xml:{strict:ee,attribute:te,body:J.xml},html4:{strict:ee,attribute:te,body:J.html4},html5:{strict:ee,attribute:te,body:J.html5}},ne=X(X({},re),{all:re.html5}),ae=String.fromCharCode,ie=ae(65533);function oe(e,t){var r=void 0===t?Y:t,n=r.level,a=void 0===n?"all":n,i=r.scope,o=void 0===i?"xml"===a?"strict":"body":i;if(!e)return"";var l=ne[a][o],s=$[a].entities,u="attribute"===o,c="strict"===o;return e.replace(l,function(e){return function(e,t,r,n){var a=e,i=e[e.length-1];if(r&&"="===i)a=e;else if(n&&";"!==i)a=e;else{var o=t[e];if(o)a=o;else if("&"===e[0]&&"#"===e[1]){var l=e[2],s="x"==l||"X"==l?parseInt(e.substr(3),16):parseInt(e.substr(2));a=s>=1114111?ie:s>65535?Q(s):ae(Z[s]||s)}}return a}(e,s,u,c)})}var le=Object.prototype;var se=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||le)};var ue=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),ce=Object.prototype.hasOwnProperty;var de=function(e){if(!se(e))return ue(e);var t=[];for(var r in Object(e))ce.call(e,r)&&"constructor"!=r&&t.push(r);return t},fe="object"==typeof h&&h&&h.Object===Object&&h,pe="object"==typeof self&&self&&self.Object===Object&&self,me=fe||pe||Function("return this")(),ve=me.Symbol,he=Object.prototype,ge=he.hasOwnProperty,ye=he.toString,be=ve?ve.toStringTag:void 0;var xe=function(e){var t=ge.call(e,be),r=e[be];try{e[be]=void 0;var n=!0}catch(e){}var a=ye.call(e);return n&&(t?e[be]=r:delete e[be]),a},ke=Object.prototype.toString;var we=function(e){return ke.call(e)},Ee=ve?ve.toStringTag:void 0;var Te=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ee&&Ee in Object(e)?xe(e):we(e)};var Se=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var Ce,Ie=function(e){if(!Se(e))return!1;var t=Te(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Me=me["__core-js_shared__"],Re=(Ce=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||""))?"Symbol(src)_1."+Ce:"";var Oe=function(e){return!!Re&&Re in e},_e=Function.prototype.toString;var je=function(e){if(null!=e){try{return _e.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Pe=/^\[object .+?Constructor\]$/,Ae=Function.prototype,De=Object.prototype,Ne=Ae.toString,Le=De.hasOwnProperty,qe=RegExp("^"+Ne.call(Le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Fe=function(e){return!(!Se(e)||Oe(e))&&(Ie(e)?qe:Pe).test(je(e))};var Be=function(e,t){return null==e?void 0:e[t]};var Ue=function(e,t){var r=Be(e,t);return Fe(r)?r:void 0},Ve=Ue(me,"DataView"),He=Ue(me,"Map"),Ge=Ue(me,"Promise"),ze=Ue(me,"Set"),We=Ue(me,"WeakMap"),Je="[object Map]",Ke="[object Promise]",Ze="[object Set]",Qe="[object WeakMap]",Xe="[object DataView]",$e=je(Ve),Ye=je(He),et=je(Ge),tt=je(ze),rt=je(We),nt=Te;(Ve&&nt(new Ve(new ArrayBuffer(1)))!=Xe||He&&nt(new He)!=Je||Ge&&nt(Ge.resolve())!=Ke||ze&&nt(new ze)!=Ze||We&&nt(new We)!=Qe)&&(nt=function(e){var t=Te(e),r="[object Object]"==t?e.constructor:void 0,n=r?je(r):"";if(n)switch(n){case $e:return Xe;case Ye:return Je;case et:return Ke;case tt:return Ze;case rt:return Qe}return t});var at=nt;var it=function(e){return null!=e&&"object"==typeof e};var ot=function(e){return it(e)&&"[object Arguments]"==Te(e)},lt=Object.prototype,st=lt.hasOwnProperty,ut=lt.propertyIsEnumerable,ct=ot(function(){return arguments}())?ot:function(e){return it(e)&&st.call(e,"callee")&&!ut.call(e,"callee")},dt=Array.isArray;var ft=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var pt=function(e){return null!=e&&ft(e.length)&&!Ie(e)};var mt=function(){return!1},vt=y(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r?me.Buffer:void 0,i=(a?a.isBuffer:void 0)||mt;e.exports=i}),ht={};ht["[object Float32Array]"]=ht["[object Float64Array]"]=ht["[object Int8Array]"]=ht["[object Int16Array]"]=ht["[object Int32Array]"]=ht["[object Uint8Array]"]=ht["[object Uint8ClampedArray]"]=ht["[object Uint16Array]"]=ht["[object Uint32Array]"]=!0,ht["[object Arguments]"]=ht["[object Array]"]=ht["[object ArrayBuffer]"]=ht["[object Boolean]"]=ht["[object DataView]"]=ht["[object Date]"]=ht["[object Error]"]=ht["[object Function]"]=ht["[object Map]"]=ht["[object Number]"]=ht["[object Object]"]=ht["[object RegExp]"]=ht["[object Set]"]=ht["[object String]"]=ht["[object WeakMap]"]=!1;var gt=function(e){return it(e)&&ft(e.length)&&!!ht[Te(e)]};var yt=function(e){return function(t){return e(t)}},bt=y(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r&&fe.process,i=function(){try{var e=n&&n.require&&n.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=i}),xt=bt&&bt.isTypedArray,kt=xt?yt(xt):gt,wt=Object.prototype.hasOwnProperty;var Et=function(e){if(null==e)return!0;if(pt(e)&&(dt(e)||"string"==typeof e||"function"==typeof e.splice||vt(e)||kt(e)||ct(e)))return!e.length;var t=at(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(se(e))return!de(e).length;for(var r in e)if(wt.call(e,r))return!1;return!0};function Tt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return St(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?St(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function It(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Mt=1,Rt=2,Ot=3,_t="paused",jt="playing",Pt="isFullscreen",At="notFullscreen",Dt="volumeUp",Nt="volumeDown",Lt="muted",qt="unmuted",Ft="jumpBackward",Bt="jumpForward",Ut="Error encountered. Please check your Manifest.",Vt=Ut,Ht="No media resource(s). Please check your Manifest.",Gt=Ht,zt=1e4;function Wt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(isNaN(e))return"";var n=Math.floor(e/3600),a=Math.floor(e%3600/60),i=e-60*a-3600*n,o="",l=n<10?"0".concat(n):"".concat(n);o=t||n>0?o+"".concat(l,":"):o;var s=a<10?"0".concat(a):"".concat(a);o+="".concat(s,":");var u=r?i.toFixed(3):parseInt(i);return u=i<10?"0".concat(u):"".concat(u),o+="".concat(u)}function Jt(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}function Kt(e){var t=e.split(":").reverse(),r=T(t,3),n=r[0],a=r[1],i=r[2],o=null!=i?3600*parseInt(i):0,l=null!=a?60*parseInt(a):0,s=""===n?0:parseFloat(n.replace(",","."));return o+l+(s=sr(s))}function Zt(e){if(404==e.status)throw new Error("Cannot find the linked resource.");if(!e.ok)throw new Error(Vt);return e}function Qt(e,t){return void 0!==e&&(void 0===t||!(e.start>t.end&&e.end>t.end))}function Xt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=""===r?t.split(".").reverse()[0]:r;(a.length>4||a.length<3||a===t)&&(a=e.split(".").reverse()[0]);var i=a.length>4||a.length<3?"":a,o=t.endsWith(i)?t.split(".".concat(i))[0]:t;n&&(o="".concat(o," (machine generated)"));var l=""!=i?"".concat(o,".").concat(i):o;if(e.endsWith(a))fetch(e).then(function(e){e.blob().then(function(e){var t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="".concat(l),r.click()})}).catch(function(e){console.log(e)});else{var s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download","".concat(l)),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}function $t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return void 0!==e?Yt(e.split("#t=")[1],t):void 0}function Yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(void 0!==e){var r,n,a,i=/([0-9]*:){1,2}([0-9]{2})(?:((\.|\,)[0-9]{2,3})?)/g;if(e.includes(":")&&(null===(r=M(e.matchAll(/\,/g)))||void 0===r?void 0:r.length)>1){var o=M(e.matchAll(i)),l=2==(null==o?void 0:o.length)?[o[0][0],o[1][0]]:[0,0],s=T(l,2);n=s[0],a=s[1]}else{var u=e.split(","),c=T(u,2);n=c[0],a=c[1]}return void 0===a&&(a=t.toString()),{start:n.match(i)?Kt(n):sr(Number(n)),end:a.match(i)?Kt(a):sr(Number(a))}}}function er(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=[];if(!e)return r;if("Canvas"===e.type?r=e.items[0].items:Array.isArray(e)&&(null==e?void 0:e.length)>0&&(r=e[0].items),r&&""!=t){var n=r.filter(function(e){return e.motivation===t});r=n}return r}function tr(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=[],o=[],l=!1,s="",u="No resources found in Canvas",c=function(e){var a;(e=(null===(a=e)||void 0===a?void 0:a.length)>0?e:[e]).map(function(e){var a=function(e,t,r,n){var a=null,i=Ot,o=ar(e.label);"supplementing"===n&&(i=nr(e.id));if(i!=Mt){var l;if(a={src:t>0?"".concat(e.id,"#t=").concat(t,",").concat(r):e.id,key:e.id,type:e.format,kind:e.type,label:o||"auto"},"supplementing"===n)a.srclang=null!==(l=e.language)&&void 0!==l?l:"en",a.kind=e.format.toLowerCase().includes("text/vtt")?"subtitles":"metadata"}return a}(e,n,t,r);a&&a.src&&i.push(a)})};if(e&&null!=e){var d,f,p,m,v=er(e);if(!v)return{resources:i,canvasTargets:o,error:u};if(0===v.length)return{resources:i,canvasTargets:o,isMultiSource:l,poster:wr(e)};if((null==v?void 0:v.length)>1)v.map(function(e,n){if(e.motivation===r&&(c(e.body),"painting"===r)){l=!0;var a=function(e,t,r){var n=$t(e.target,t);if(null!=n||!n)return n.id=e.id,isNaN(n.end)&&(n.end=t),n.end=Number((n.end-n.start).toFixed(2)),n.duration=n.end,n.altStart=n.start,n.start=0,n.sIndex=r,n}(e,t,n);o.push(a)}});else if((null===(d=v[0].body.items)||void 0===d?void 0:d.length)>0&&(null===(f=v[0])||void 0===f?void 0:f.motivation)===r)v[0].body.items.map(function(e){c(e)});else if(Et(v[0].body)||""==(null===(p=v[0].body)||void 0===p?void 0:p.id)||(null===(m=v[0])||void 0===m?void 0:m.motivation)!==r){if("painting"===r)return{resources:i,error:u,poster:wr(e),canvasTargets:o}}else c(v[0].body);if(!l&&(null==i?void 0:i.length)>0&&"painting"===r){var h=$t(i[0].src,t);void 0===h&&(h={start:0,end:t}),h.altStart=h.start,h.duration=t,a||(h=It(It({},h),{},{customStart:h.start,start:0,altStart:0})),o.push(h)}return s=wr(e,!0),{canvasTargets:o,isMultiSource:l,resources:i,poster:s}}return{canvasTargets:o,isMultiSource:l,resources:i,poster:s,error:u}}function rr(e){var t=/(\(machine(\s|\-)generated\))/gi;return{isMachineGen:t.test(e),labelText:e.replace(t,"").trim()}}function nr(e){if(e){var t=e.split("/").reverse()[0];return"transcripts"===t?Mt:"captions"===t?Rt:Ot}}function ar(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&"object"===O(e)){var r=Object.keys(e);if(r&&r.length>0){var n,a=r[0];return oe(t?e[a].join("\n"):null!==(n=e[a][0])&&void 0!==n?n:"")}}else if("string"==typeof e)return oe(e);return""}function ir(e){return/^(([0-1][0-9])|([2][0-3])):([0-5][0-9])(:[0-5][0-9](?:[.]\d{1,3})?)?$/.test(e)}function or(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){var n=e.offsetTop-t.current.offsetTop;if(r)t.current.scrollTop=n;else{var a=t.current.clientHeight-e.clientHeight;t.current.scrollTop=n>a?n-t.current.clientHeight/2:a/2>n?0:n/2}}}function lr(e,t){var r,n,a,i,o,l,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=null==t?void 0:t.player(),c="",d=document.activeElement,f=d.className.includes("vjs")||d.className.includes("videojs"),p=e.which,m=e.ctrlKey||e.metaKey||e.altKey||e.shiftKey,v=!1;if("A"==d.tagName){var h,g=null===(h=d.parentElement)||void 0===h?void 0:h.className;v=["ramp--annotations__annotation-text","ramp--transcript_text"].includes(g)}var y=v||"button"===(null==d?void 0:d.role)&&(["ramp--transcript_time","ramp--structured-nav__section-title","ramp--structured-nav__item-link","ramp--structured-nav__collapse-all-btn","ramp--annotations__multi-select-header","ramp--annotations__show-more-tags","ramp--annotations__show-more-less","ramp--annotations__annotation-row-time-tags","ramp--transcript__show-more-less"].some(function(e){var t;return null==d||null===(t=d.classList)||void 0===t?void 0:t.contains(e)})&&(38===p||40===p||32===p||13===p)||((null==d||null===(r=d.classList)||void 0===r?void 0:r.contains("ramp--structured-nav__section-title"))||(null==d||null===(n=d.classList)||void 0===n?void 0:n.contains("ramp--structured-nav__collapse-all-btn")))&&(37===p||39===p))||"button"===(null==d?void 0:d.role)&&(null==d||null===(a=d.classList)||void 0===a?void 0:a.contains("ramp--annotations__multi-select-header"))||"option"===(null==d?void 0:d.role)&&(null==d||null===(i=d.classList)||void 0===i?void 0:i.contains("annotations-dropdown-item"));if(!(d&&(-1!==["input","textarea","select"].indexOf(d.tagName.toLowerCase())||"tab"===d.role&&(37===p||39===p)||"switch"===d.role&&(13===p||32===p)||null!=d&&null!==(o=d.classList)&&void 0!==o&&o.contains("transcript_content")&&(38===p||40===p)||null!=d&&null!==(l=d.classList)&&void 0!==l&&l.contains("ramp--transcript_item")&&(38===p||40===p)||y)&&!f||m||s)&&null!=u){switch(p){case 32:case 75:e.preventDefault(),u.paused()?(c=jt,u.play()):(c=_t,u.pause());break;case 70:e.preventDefault(),u.audioOnlyMode()||(u.isFullscreen()?(c=At,u.exitFullscreen()):(c=Pt,u.requestFullscreen()));break;case 77:e.preventDefault();var b=u.volume(),x=u.lastVolume_();if(0===b){var k=x<.1?.1:x;u.volume(k),c=qt,u.muted(!1)}else c=Lt,u.muted(!u.muted());break;case 37:e.preventDefault(),c=Ft,u.currentTime(u.currentTime()-5);break;case 39:e.preventDefault(),c=Bt,u.currentTime(u.currentTime()+5);break;case 38:e.preventDefault(),u.muted()&&u.muted(!1),c=Dt,u.volume(u.volume()+.1);break;case 40:e.preventDefault(),c=Nt,u.volume(u.volume()-.1);break;default:return}return e.stopPropagation(),c}}var sr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return"number"!=typeof e||isNaN(e)?e:Math.round(e*t)/t},ur=function(e){return e.sort(function(e,t){var r,n;return(null===(r=e.time)||void 0===r?void 0:r.start)-(null===(n=t.time)||void 0===n?void 0:n.start)})},cr=function(e){if(e.nodeType===Node.TEXT_NODE)return e.textContent.length;var t,r=0,n=Tt(e.childNodes);try{for(n.s();!(t=n.n()).done;){var a=t.value;r+=cr(a)}}catch(e){n.e(e)}finally{n.f()}return r},dr=function(e,t){if(e.nodeType===Node.TEXT_NODE){if(""===e.textContent.trim())return 0;if(e.textContent.length<=t)return e.textContent.length;var r=e.textContent.substring(0,t).lastIndexOf(" "),n=-1===r?t:r;return e.textContent=e.textContent.substring(0,n),t}for(var a=t,i=Array.from(e.childNodes),o=0;o<i.length;o++){if((a-=dr(i[o],a))<=0){for(var l=i.length-1;l>o;l--)i[l].parentNode&&i[l].parentNode.removeChild(i[l]);break}}return t-a},fr=function(e){if(e.nodeType===Node.TEXT_NODE&&""!==e.textContent.trim())return e;for(var t=e.childNodes.length-1;t>=0;t--){var r=fr(e.childNodes[t]);if(r)return r}return null};function pr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return mr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var gr={allowedTags:["a","b","br","i","img","p","small","span","sub","sup"],allowedAttributes:{a:["href"],img:["src","alt"]},allowedSchemesByTag:{a:["http","https","mailto"]}},yr=["no-nav","thumbnail-nav"];function br(e){var r=[];try{if(null!=e&&e.items)return e.items.map(function(e,n){var a=void 0;e.summary&&null!=e.summary&&(a=t.PropertyValue.parse(e.summary).getValue());var i=void 0;e.homepage&&e.homepage.length>0&&(i=e.homepage[0].id);try{var o,l=!0,s=null===(o=e.items[0])||void 0===o?void 0:o.items,u="";if((null==s?void 0:s.length)>0){var c,d,f=s[0].body;(null===(c=f.items)||void 0===c?void 0:c.length)>0?u=f.items[0].id:0!=(null===(d=Object.keys(f))||void 0===d?void 0:d.length)&&f.id&&(u=f.id)}var p,m=Number(e.duration);""!=u&&(p=$t(u,m),l=!1);var v=ar(e.label)||"Section ".concat(n+1);r.push({canvasIndex:n,canvasId:e.id,canvasURL:e.id.split("#t=")[0],duration:m,range:void 0===p?{start:0,end:m}:p,isEmpty:l,summary:a,homepage:i||"",label:v,searchService:Cr(e)})}catch(t){r.push({canvasIndex:n,canvasId:e.id,canvasURL:e.id.split("#t=")[0],duration:e.duration||0,range:void 0,isEmpty:!0,summary:a,homepage:i||"",label:ar(e.label)||"Section ".concat(n+1),searchService:Cr(e)})}}),r;throw console.error("iiif-parser -> canvasesInManifest() -> no canvases were found in Manifest"),new Error(Vt)}catch(e){throw e}}function xr(e){var t,r=e.manifest,n=e.canvasIndex,a=e.startTime,i=e.srcIndex,o=void 0===i?0:i,l=e.isPlaylist,s=void 0!==l&&l,u=null,c={sources:[],tracks:[],canvasTargets:[]};if(void 0===n||n<0)return hr(hr({},c),{},{error:"Error fetching content"});var d=r.items;if(0==(null==d?void 0:d.length))return hr(hr({},c),{},{poster:Gt});try{var f=(u=d[n]).annotations;if(void 0===u)throw console.error("iiif-parser -> getMediaInfo() -> canvas undefined  -> ",n),new Error(Vt);var p=Number(u.duration),m=tr(u,p,"painting",a,s),v=m.resources,h=m.canvasTargets,g=m.isMultiSource,y=m.error,b=m.poster;t=function(e,t,r){var n=!1;if(0===e.length)return[];if(t)e[r].selected=!0;else{var a,i=pr(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;"auto"!=o.label||n||(n=!0,o.selected=!0)}}catch(e){i.e(e)}finally{i.f()}n||(e[0].selected=!0)}return e}(v,g,o);var x=tr(f,p,"supplementing"),k={sources:t,tracks:x?x.resources:[],canvasTargets:h,isMultiSource:g,error:y,poster:b};if(k.error)return hr({},k);var w=function(e){var t=e.filter(function(t,r){return e.indexOf(t)===r}),r=1===t.length?t[0].toLowerCase():"video";return r}(k.sources.map(function(e){return e.kind}));return hr(hr({},k),{},{error:null,mediaType:w})}catch(y){throw y}}function kr(e){if(e)return e.split("#t=")[0]}function wr(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var a=e.placeholderCanvas;if(!a||null==a)return n?null:(console.error("iiif-parser -> getPlaceholderCanvas() -> placeholderCanvas property not defined"),"This item cannot be played.");var i=a.items[0].items;if((null==i?void 0:i.length)>0&&null!=i[0].body&&"painting"===i[0].motivation){var o=i[0].body;return n?t=o.id:(t=ar(o.label)||"This item cannot be played.",r=a.duration,zt=r||1e4),t}}catch(e){throw e}}function Er(e,t,r){e="text/srt"===e?"application/x-subrip":e;var n=d.default[e],a=n?n.extensions[0]:e,i=ar(t)||"Untitled",o=i;Object.keys(t).length>1&&(i=t[Object.keys(t)[0]][0],o=t.none[0]);var l=rr(i),s=l.isMachineGen;return l._,{id:r,label:"".concat(i," (.").concat(a,")"),filename:o,fileExt:a,isMachineGen:s}}function Tr(e,t){var r=[];return e&&(null==e?void 0:e.length)>0?(e.map(function(e){var t,n=null===(t=ar(e.value,!0))||void 0===t?void 0:t.replace(/\n/g,"<br />"),a=f.default(n,hr({},gr));r.push({label:ar(e.label),value:a})}),r):(console.log("iiif-parser -> parseMetadata() -> no metadata in ",t),r)}function Sr(e,t){var r=[],n=e.requiredStatement;n&&(r=Tr([n],t));var a=e.rights;if(a){var i=/^(https?:\/\/[^\s]+)|(www\.[^\s]+)/.test(a);r.push({label:"License",value:i?"<a href=".concat(a,">").concat(a,"</a>"):a})}return r}function Cr(e){var t=null;if(e){var r=e.service;if(r&&r.length>0){var n=r.filter(function(e){return"SearchService2"===e.type});t=(null==n?void 0:n.length)>0?n[0].id:null}}return t}function Ir(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Mr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Rr={webvtt:["text/vtt"],srt:["application/x-subrip","text/srt"],text:["text/plain"],json:["application/json"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]},Or=/^(?:\d{2}:)?\d{2}:\d{2}(?:\.\d+)/g,_r=/^(?:\d{2}:)?\d{2}:\d{2}(?:[.,]\d+)/g,jr=[{type:Rr.json,ext:"json"},{type:Rr.webvtt,ext:"vtt"},{type:Rr.text,ext:"txt"},{type:Rr.docx,ext:"docx"},{type:Rr.srt,ext:"srt"}],Pr={invalidTimestamp:-4,invalidVTT:-3,noSupport:-2,invalid:-1,noTranscript:0,timedText:1,plainText:2,docx:3},Ar="NOTE",Dr="TIMED_CUE",Nr="NON_TIMED_LINE",Lr="METADATA";function qr(e){return Fr.apply(this,arguments)}function Fr(){return Fr=A(G.mark(function e(t){var r,n,a,i=arguments;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:"",n=i.length>2?i[2]:void 0,void 0!==t){e.next=1;break}return e.abrupt("return",[]);case 1:return e.next=2,fetch(t,{signal:n}).then(function(e){return e.headers.get("Content-Type").includes("application/json")?e.json():{}}).then(function(e){var n,a,i=Br(null!==(n=er(e.annotations,"supplementing"))&&void 0!==n?n:[],0,t,e,r),o=[];return(null===(a=e.items)||void 0===a?void 0:a.length)>0&&e.items.map(function(e,n){var a=Br(er(e.annotations,"supplementing"),n,t,e,r);o.push({canvasId:n,items:[].concat(M(a),M(i))})}),o}).catch(function(e){return"AbortError"===e.name?console.warn("transcript-parser -> readSupplementingAnnotations() -> fetch aborted"):console.error("transcript-parser -> readSupplementingAnnotations() -> error fetching transcript resource at, ",t),[]});case 2:return a=e.sent,e.abrupt("return",a);case 3:case"end":return e.stop()}},e)})),Fr.apply(this,arguments)}function Br(e,t,r,n,a){var i,o=(null===(i=n.annotations)||void 0===i?void 0:i.length)>0&&n.annotations[0].label?ar(n.annotations[0].label):a,l=[];if(e.length>0){var s,u=(null===(s=e[0].body)||void 0===s?void 0:s.length)>0?e[0].body[0]:e[0].body;if("TextualBody"===u.type){var c=rr(a.length>0?a:o||"".concat(n.type,"-").concat(t)),d=c.isMachineGen,f=c.labelText;l.push({url:void 0===u.id?r:u.id,title:f,isMachineGen:d,id:"".concat(f,"-").concat(t),format:""})}else e.forEach(function(e,r){var n=e.body,a="",i="";if(n.label&&Object.keys(n.label).length>0){var o=Object.keys(n.label);(null==o?void 0:o.length)>1?(a=ar(n.label),i=n.label.hasOwnProperty("none")?ar(n.label.none[0]):a):a=ar(n.label)}else a="".concat(r);var s=n.id,u=nr(s),c=rr(a),d=c.isMachineGen,f=c.labelText;""===i&&(i=f),1!==u&&3!==u||l.push({title:f,filename:i,url:s,isMachineGen:d,id:"".concat(f,"-").concat(t,"-").concat(r),format:n.format||""})})}return l}function Ur(e){return Vr.apply(this,arguments)}function Vr(){return Vr=A(G.mark(function e(t){var r,n,a;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!=t&&0!=t.length){e.next=1;break}return console.error("No transcripts given as input"),e.abrupt("return",[]);case 1:return r=[],t.map(function(e){return r.push({canvasId:e.canvasId,items:[]})}),e.next=2,Promise.all(t.map(function(){var e=A(G.mark(function e(t){var n,a,i;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.canvasId,a=t.items,e.next=1,Promise.all(a.map(function(){var e=A(G.mark(function e(t,a){var i,o,l,s,u,c,d,f;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.title,o=t.url,e.next=1,qr(o,i);case 1:if(l=e.sent,s=rr(i),u=s.isMachineGen,c=s.labelText,d=[],(null==l?void 0:l.length)>0&&(d=l.map(function(e){return e.items}).flat(),f=Hr(r.concat(l),"canvasId","items"),r=f),0!==l.length&&0!==d.length){e.next=2;break}return e.abrupt("return",{title:c,filename:c,url:o,isMachineGen:u,id:"".concat(c,"-").concat(n,"-").concat(a),format:""});case 2:return e.abrupt("return",null);case 3:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()));case 1:return i=e.sent,e.abrupt("return",{canvasId:n,items:i.filter(function(e){return null!=e})});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent,a=Hr(r.concat(n),"canvasId","items"),e.abrupt("return",a);case 3:case"end":return e.stop()}},e)})),Vr.apply(this,arguments)}function Hr(e,t,r){return e.reduce(function(e,n){var a=e.filter(function(e){return e[t]==n[t]});if((null==a?void 0:a.length)>0){var i=a[0];i[r]=i[r].concat(n[r])}else e.push(n);return e},[])}function Gr(e,t,r){return zr.apply(this,arguments)}function zr(){return zr=A(G.mark(function e(t,r,n){var a,i,o,l,s,u,c,d,f,p,m,v,h,g,y,b,x,k,w,E,T,S,C,I,M,R,O=arguments;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=O.length>3&&void 0!==O[3]&&O[3],l=O.length>4&&void 0!==O[4]&&O[4],s=[],u=t,void 0!==t){e.next=1;break}return e.abrupt("return",{tData:s,tUrl:u,tType:Pr.invalid});case 1:return c=null,d=null,e.next=2,fetch(t).then(Zt).then(function(e){c=e.headers.get("Content-Type"),d=e}).catch(function(e){console.error("transcript-parser -> parseTranscriptData() -> fetching transcript -> ",e)});case 2:if(null!=c){e.next=3;break}return e.abrupt("return",{tData:[],tUrl:u,tType:Pr.invalid});case 3:f=jr.filter(function(e){return e.type.includes(c.split(";")[0])}),p=jr.filter(function(e){return e.type.includes(r)}),m="",(null==p?void 0:p.length)>0?m=p[0].ext:f.length>0?m=f[0].ext:(v=t.split(".").reverse()[0],h=jr.filter(function(e){return e.ext===v}),m=h.length>0?v:""),R=m,e.next="json"===R?4:"txt"===R?9:"srt"===R||"vtt"===R?13:"docx"===R?16:19;break;case 4:return e.next=5,d.json();case 5:if("Manifest"!==(null==(b=e.sent)?void 0:b.type)){e.next=8;break}if((x=on(b,n))._,null==(k=x.annotationSets)||!k.length){e.next=6;break}return(w=k[0])._,E=w.items,s=Wr(E),e.abrupt("return",{tData:s,tUrl:u,tType:Pr.timedText,tFileExt:m});case 6:return e.abrupt("return",{tData:s,tUrl:u,tType:Pr.noTranscript});case 7:e.next=9;break;case 8:return T=Zr(b),e.abrupt("return",{tData:T.tData,tUrl:u,tType:T.tType,tFileExt:m});case 9:return e.next=10,d.text();case 10:if(g=e.sent,y=null!==(a=null===(i=g)||void 0===i?void 0:i.split("\n"))&&void 0!==a?a:[],null!=g&&""!=g&&0!=y.length){e.next=11;break}return e.abrupt("return",{tData:[],tUrl:t,tType:Pr.noTranscript});case 11:return S=Yr(y),e.abrupt("return",{tData:S,tUrl:t,tType:Pr.plainText,tFileExt:m});case 12:case 13:return e.next=14,d.text();case 14:if(g=e.sent,y=g.split(/\r\n|\r|\n/),null!=g&&""!=g&&0!=y.length){e.next=15;break}return e.abrupt("return",{tData:[],tUrl:t,tType:Pr.noTranscript});case 15:return C=Qr(g,o,l,"srt"===m),I=C.tData,M=C.tType,e.abrupt("return",{tData:I,tUrl:t,tType:M,tFileExt:m});case 16:return e.next=17,Jr(d);case 17:if(null!=(s=e.sent)){e.next=18;break}return e.abrupt("return",{tData:[],tUrl:t,tType:Pr.invalid});case 18:return e.abrupt("return",{tData:$r(s),tUrl:t,tType:Pr.docx,tFileExt:m});case 19:return e.abrupt("return",{tData:[],tUrl:t,tType:Pr.noSupport});case 20:case"end":return e.stop()}},e)})),zr.apply(this,arguments)}function Wr(e){if(0===(null==e?void 0:e.length))return[];var t=[];return e.map(function(e){if(e.motivation.includes("supplementing")){var r,n,a=e.time,i=e.value,o=(null==i?void 0:i.length)>0?i.map(function(e){return e.value}).join("<br>"):"",l=(null==i?void 0:i.length)>0?i[0].format:"text/plain";t.push({text:o,format:l,begin:parseFloat(null!==(r=null==a?void 0:a.start)&&void 0!==r?r:0),end:parseFloat(null!==(n=null==a?void 0:a.end)&&void 0!==n?n:0),tag:Dr})}}),t}function Jr(e){return Kr.apply(this,arguments)}function Kr(){return(Kr=A(G.mark(function e(t){var r,n,a;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.next=1,t.blob();case 1:return n=e.sent,a=new File([n],name,{type:t.headers.get("content-type")}),e.next=2,p.default.convertToHtml({arrayBuffer:a}).then(function(e){r=e.value}).catch(function(e){console.error(e)});case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zr(e){if(0==e.length)return{tData:[],tType:Pr.noTranscript};var t,r=[],n=Ir(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.speaker){var i,o=a.speaker,l=Ir(a.spans);try{for(l.s();!(i=l.n()).done;){var s=i.value;s.speaker=o,r.push(s)}}catch(e){l.e(e)}finally{l.f()}}else{var u,c=Ir(a.spans);try{for(c.s();!(u=c.n()).done;){var d=u.value;d.format="text/plain",d.tag=Dr,r.push(d)}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){n.e(e)}finally{n.f()}return{tData:r,tType:Pr.timedText}}function Qr(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[],i=[],o=[],l=e.split("\n"),s=l;if(!n){var u=function(e,t,r){var n=0,a=e[0].trim();if(6===a.length&&"WEBVTT"===a){var i=function(e,t,r,n){var a=0,i=0,o=[],l=[];e=e.filter(function(e){return!Number(e)});for(var s=function(e){return"\r"==!e||"\n"==!e||"\r\n"==!e},u=t;u<e.length;u++){var c=e[u].trim();if(/^REGION$/.test(c.toUpperCase())||/^STYLE$/.test(c.toUpperCase())){for(u++;u<e.length&&s(e[u]);)u++;a=u}else if(/^NOTE$/.test(c.toUpperCase())){for(var d=c;u<e.length&&s(e[u]);)u++,d="".concat(d,"<br />").concat(e[u].trim());n&&o.push({times:"",line:d,tag:Ar}),a=u}else{if(c.includes("--\x3e")){i=u;break}if("string"==typeof c&&0!=c.trim().length){for(var f=c.trim();u<e.length&&s(e[u]);)u++,f="".concat(f,"<br />").concat(e[u].trim());r&&f.length>0&&l.push({times:"",line:f,tag:Lr}),a=u}}}return i>a?{valid:!0,cue_lines:e.slice(i),notes:o,metadata:l}:{valid:!1}}(e,++n,t,r);return{valid:i.valid,cue_lines:i.cue_lines,notes:i.notes,metadata:i.metadata}}return{valid:!1,cue_lines:[],notes:[],metadata:[]}}(l,t,r),c=u.valid,d=u.cue_lines,f=u.notes,p=u.metadata;if(!c)return console.error("Invalid WebVTT file"),{tData:[],tType:Pr.invalidVTT};s=d,i=f,o=p}var m=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];for(t=0;t<e.length;t++){var a=e[t],i={};if(a.includes("--\x3e")||/^NOTE/.test(a)){var o=/^NOTE/.test(a);i.times=o?"":a,i.tag=o?Ar:Dr,i.line=o?a.replace(/^NOTE\s*/,"NOTE "):"",t++;for(var l=0;t<e.length&&"\r"!=e[t]&&"\n"!=e[t]&&"\r\n"!=e[t]&&""!=e[t];)l>0&&(i.line+="<br>"),i.line+=e[t].endsWith("-")?e[t]:e[t].replace(/\s*$/," "),l++,t++;i.line=i.line.trimEnd(),o&&!r||n.push(i)}}return n}(s,r);m.unshift.apply(m,M(i)),m.unshift.apply(m,M(o));for(var v=!1,h=0;h<m.length;){var g=Xr(m[h],n);if(!g){v||(v=!0);break}a.push(g),h++}return{tData:v?null:a,tType:v?Pr.invalidTimestamp:Pr.timedText}}function Xr(e,t){var r,n=e.times,a=e.line,i=e.tag;switch(r=t?_r:Or,i){case Ar:case Lr:return{begin:0,end:0,text:a,tag:i};case Dr:var o=n.split(" --\x3e "),l=T(o,2),s=l[0],u=l[1];return u=u.split(" ")[0],s.match(r)&&u.match(r)?{begin:Kt(s),end:Kt(u),text:a,tag:i}:(console.error("Invalid timestamp in line with text; ",a),null);default:return null}}var $r=function(e){var t=document.createElement("div");return t.innerHTML=e,Yr(Array.from(t.childNodes),!0)},Yr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];return e.map(function(e){r.push({text:t?e.innerText:e,tag:Nr,textDisplayed:t?oe(e.innerHTML):e})}),r};function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rn=[],nn=["text/vtt","text/srt","application/json"],an=["commenting","supplementing","transcribing"];function on(e,t){var r=null;if(void 0===t||t<0)return null;var n=e.items;return 0!=(null==n?void 0:n.length)&&null!=n[t]?{canvasIndex:t,annotationSets:un((r=n[t]).annotations,Number(r.duration))}:null}function ln(e,t){return sn.apply(this,arguments)}function sn(){return(sn=A(G.mark(function e(t,r){var n,a,i,o;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=/^(https?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w\-._~:\/?#[\]@!$&'()*+,;=]*)?\.json$/,null!=t&&null!=t.match(n)){e.next=1;break}return e.abrupt("return",[]);case 1:return a=null,e.next=2,fetch(t).then(Zt).then(function(e){a=e}).catch(function(e){return console.error("annotations-parser -> parseExternalAnnotationPage() -> fetching transcript -> ",e),[]});case 2:if(null!=a){e.next=3;break}return e.abrupt("return",[]);case 3:return e.prev=3,e.next=4,a.json();case 4:return i=e.sent,o=un([i],r),e.abrupt("return",o);case 5:return e.prev=5,e.catch(3),console.error("annotations-parser -> parseExternalAnnotationPage() -> Error: parsing AnnotationPage at, ",t),e.abrupt("return",[]);case 6:case"end":return e.stop()}},e,null,[[3,5]])}))).apply(this,arguments)}function un(e,t){var r=[];return(null==e?void 0:e.length)>0&&"AnnotationPage"===e[0].type&&e.map(function(e){if("AnnotationPage"===e.type){var n,a={label:ar(e.label)};if((null===(n=e.items)||void 0===n?void 0:n.length)>0){var i=[],o=[];if(e.items.map(function(e){if(function(e){Array.isArray(e)||(e=[e]);return e.map(function(e){return"TextualBody"!=e.type}).reduce(function(e,t){return e&&t},!0)}(e.body)){var n=e.body,a=e.id,l=e.motivation,s=e.target,u=Array.isArray(l)?l:[l],c=nn.includes(n.format),d=fn(n,u)[0];null!=d&&r.push(tn(tn({},d),{},{canvasId:s,id:a,motivation:u,timed:c}))}else if("highlighting"===e.motivation){var f=cn(e,t);o.push(function(e){var t=e.canvasId,r=e.id,n=e.time,a=e.value;return{id:r,time:n.start||0,timeStr:n.start?Wt(n.start,!0,!0):"00:00:00",canvasId:t,value:(null==a?void 0:a.length)>0?a[0].value:""}}(f))}else i.push(cn(e,t))}),i.length>0||o.length>0){var l=ur(i),s=(u=l.reduce(function(e,t){if(null!=t.time){var r=t.time.start;e[r]?e[r][0].value.push(t.value[0]):(e[r]=[],e[r].push(t))}return e},{}),Object.values(u).flat());r.push(tn(tn({},a),{},{items:s,markers:o,timed:!0}))}}else r.push(tn(tn({},a),{},{url:e.id,format:"application/json",timed:!0}))}var u}),r}function cn(e,t){if(null!=e&&null!=e){var r,n;if("string"==typeof(null==e?void 0:e.target))r=kr(e.target),n=$t(e.target,t);else{var a=null==e?void 0:e.target,i=a.source,o=a.selector;r=i.id,n=function(e,t){var r=e.type,n={};switch(r){case"FragmentSelector":n=Yt(e.value.split("t=")[1],t);break;case"PointSelector":n={start:Number(e.t),end:void 0};break;case"RangeSelector":n=Yt(e.t)}return n}(o,t)}var l=Array.isArray(e.motivation)?e.motivation:[e.motivation];return{motivation:l,id:e.id,time:n,canvasId:r,value:fn(e.body,l)}}}function dn(e,t){var r,n={};if(e){var a=e.format,i=e.label,o=e.motivation,l=e.purpose,s=e.value,u=null!=l?l:o;null==u&&an.some(function(e){return t.includes(e)})&&(u=t.filter(function(e){return an.includes(e)}));var c=null!=i?"<strong>".concat(ar(i),"</strong>: ").concat(s):s;if(n={format:a,purpose:Array.isArray(u)?u:[u],value:c},u==["tagging"]){var d=rn.filter(function(e){return e.tag==s});(null==d?void 0:d.length)>0?r=d[0].color:(r=function(e){var t,r=function(){var e=Math.floor(360*Math.random()),r=80,n=90;t="hsl(".concat(e,", ").concat(r,"%, ").concat(n,"%)")};if(r(),!(e.length>0&&e.includes(t)))return t;r()}((null==rn?void 0:rn.length)>0?rn.map(function(e){return e.color}):[]),rn.push({tag:s,color:r})),n.tagColor=r}}return n}function fn(e,t){Array.isArray(e)||(e=[e]);var r=[];return e.map(function(e){switch(e.type){case"TextualBody":r.push(dn(e,t));break;case"Text":var n=e.format,a=e.id,i=e.label,o=nr(a),l=ar(i);2!==o&&r.push({format:n,label:l,url:a,filename:i.hasOwnProperty("none")?ar(i.none[0]):l,linkedResource:"application/json"!=n})}}),r}function pn(e){return mn.apply(this,arguments)}function mn(){return(mn=A(G.mark(function e(t){var r,n,a,i,o,l,s,u;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.canvasId,n=t.format,a=t.id,i=t.motivation,o=t.url,e.next=1,Gr(o,n);case 1:if(l=e.sent,s=l.tData,u=l.tType,!s||u==Pr.invalidTimestamp||u==Pr.invalidVTT){e.next=2;break}return e.abrupt("return",s.map(function(e,t){var n=e.begin,o=e.end,l=e.text;return{canvasId:r,id:"".concat(a,"-").concat(t),motivation:i,time:{start:n,end:o},value:[{format:"text/plain",purpose:i,value:l}]}}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var gn=e.createContext(),yn=e.createContext(),bn={manifest:null,allCanvases:[],canvasIndex:0,currentNavItem:null,canvasDuration:0,canvasLink:null,canvasIsEmpty:!1,customStart:{startIndex:0,startTime:0},targets:[],hasMultiItems:!1,srcIndex:0,startTime:0,autoAdvance:!1,playlist:{markers:[],isEditing:!1,isPlaylist:!1,hasAnnotationService:!1,annotationServiceId:""},renderings:{},canvasSegments:[],structures:{hasStructure:!1,isCollapsed:!1,structItems:[]},annotations:[],clickedAnnotation:null};function xn(e,t){return((null==e?void 0:e.length)>0?e.filter(function(e){return e.canvasIndex==t+1&&!e.isCanvas}):[]).length>0}function kn(){var e,t,r,n,a,i,o,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case"updateManifest":var u=s.manifest,c=br(u),d=!!(o=u.behavior)&&(null==o?void 0:o.includes("auto-advance")),f=(i=u.label)?ar(i).includes("[Playlist]"):(console.warn("playlist-parser -> getIsPlaylist() -> manifest.label not found"),!1),p=(null==(n=u.service)?void 0:n.length)>0&&"AnnotationService0"===(null===(a=n[0])||void 0===a?void 0:a.type)?n[0].id:null;return hn(hn({},l),{},{manifest:u,allCanvases:c,autoAdvance:d,playlist:hn(hn({},l.playlist),{},{isPlaylist:f,annotationServiceId:p,hasAnnotationService:!!p})});case"switchCanvas":var m=(e=l.annotations,t=s.canvasIndex,(null==(r=e.filter(function(e){return e.canvasIndex==t}))?void 0:r.length)>0);return hn(hn({},l),{},{canvasIndex:s.canvasIndex,structures:hn(hn({},l.structures),{},{hasStructure:xn(l.canvasSegments,s.canvasIndex)}),annotations:m?M(l.annotations):[].concat(M(l.annotations),[on(l.manifest,s.canvasIndex)])});case"switchItem":return hn(hn({},l),{},{currentNavItem:s.item});case"canvasDuration":return hn(hn({},l),{},{canvasDuration:s.canvasDuration});case"canvasLink":return hn(hn({},l),{},{canvasLink:s.canvasLink});case"canvasTargets":return hn(hn({},l),{},{targets:s.canvasTargets});case"hasMultipleItems":return hn(hn({},l),{},{hasMultiItems:s.isMultiSource});case"setSrcIndex":return hn(hn({},l),{},{srcIndex:s.srcIndex});case"setItemStartTime":return hn(hn({},l),{},{startTime:s.startTime});case"setAutoAdvance":return hn(hn({},l),{},{autoAdvance:s.autoAdvance});case"setPlaylistMarkers":if(s.markers)return hn(hn({},l),{},{playlist:hn(hn({},l.playlist),{},{markers:[].concat(M(l.playlist.markers),[s.markers])})});if(s.updatedMarkers)return hn(hn({},l),{},{playlist:hn(hn({},l.playlist),{},{markers:l.playlist.markers.map(function(e){return e.canvasIndex===l.canvasIndex&&(e.canvasMarkers=s.updatedMarkers),e})})});case"setIsEditing":return hn(hn({},l),{},{playlist:hn(hn({},l.playlist),{},{isEditing:s.isEditing})});case"setCanvasIsEmpty":return hn(hn({},l),{},{canvasIsEmpty:s.isEmpty});case"setStructures":return hn(hn({},l),{},{structures:hn(hn({},l.structures),{},{structItems:s.structures})});case"setCanvasSegments":var v=s.timespans.filter(function(e){return e.canvasIndex==l.canvasIndex+1&&!e.isCanvas});return hn(hn({},l),{},{canvasSegments:s.timespans,structures:hn(hn({},l.structures),{},{hasStructure:v.length>0})});case"setCustomStart":var h=s.customStart,g=h.canvas,y=h.time;return hn(hn({},l),{},{customStart:{startIndex:g,startTime:y},canvasIndex:g,structures:hn(hn({},l.structures),{},{hasStructure:xn(l.canvasSegments,g)})});case"setRenderingFiles":return hn(hn({},l),{},{renderings:hn({},s.renderings)});case"setIsCollapsed":return hn(hn({},l),{},{structures:hn(hn({},l.structures),{},{isCollapsed:s.isCollapsed})});case"setAnnotations":return hn(hn({},l),{},{annotations:[].concat(M(l.annotations),[s.annotations])});case"setClickedAnnotation":return hn(hn({},l),{},{clickedAnnotation:s.clickedAnnotation});default:throw new Error("Unhandled action type: ".concat(s.type))}}function wn(t){var r=t.initialState,n=void 0===r?bn:r,a=t.children,i=e.useReducer(kn,n),o=T(i,2),l=o[0],s=o[1];return c.default.createElement(gn.Provider,{value:l},c.default.createElement(yn.Provider,{value:s},a))}function En(){var t=e.useContext(gn);if(void 0===t)throw new Error("useManifestState must be used within a ManifestProvider");return t}function Tn(){var t=e.useContext(yn);if(void 0===t)throw new Error("useManifestDispatch must be used within a ManifestProvider");return t}function Sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var In=e.createContext(),Mn=e.createContext(),Rn={player:null,clickedUrl:"",isClicked:!1,isPlaying:!1,startTime:null,endTime:null,isEnded:!1,currentTime:null,searchMarkers:[]};function On(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updatePlayer":return Cn(Cn({},e),{},{player:t.player});case"navClick":return Cn(Cn({},e),{},{clickedUrl:t.clickedUrl,isClicked:!0});case"resetClick":return Cn(Cn({},e),{},{isClicked:!1});case"clearClickedUrl":return Cn(Cn({},e),{},{clickedUrl:""});case"setTimeFragment":return Cn(Cn({},e),{},{startTime:t.startTime,endTime:t.endTime});case"setSearchMarkers":return Cn(Cn({},e),{},{searchMarkers:t.payload});case"setPlayingStatus":return Cn(Cn({},e),{},{isPlaying:t.isPlaying});case"setCaptionStatus":return Cn(Cn({},e),{},{captionOn:t.captionOn});case"setIsEnded":return Cn(Cn({},e),{},{isEnded:t.isEnded});case"setCurrentTime":return Cn(Cn({},e),{},{currentTime:t.currentTime});default:throw new Error("Unhandled action type: ".concat(t.type))}}function _n(t){var r=t.initialState,n=void 0===r?Rn:r,a=t.children,i=e.useReducer(On,n),o=T(i,2),l=o[0],s=o[1];return c.default.createElement(In.Provider,{value:l},c.default.createElement(Mn.Provider,{value:s},a))}function jn(){var t=e.useContext(In);if(void 0===t)throw new Error("usePlayerState must be used within the PlayerProvider");return t}function Pn(){var t=e.useContext(Mn);if(void 0===t)throw new Error("usePlayerDispatch must be used within the PlayerProvider");return t}function An(){}function Dn(){}Dn.resetWarningCache=An;var Nn=function(){function e(e,t,r,n,a,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Dn,resetWarningCache:An};return r.PropTypes=r,r},Ln=y(function(e){e.exports=Nn()}),qn=function(){return c.default.createElement("div",{className:"lds-spinner"},c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null))};function Fn(t){var r,n=t.manifestUrl,a=t.customErrorMessage,o=t.emptyManifestMessage,l=t.startCanvasId,s=t.startCanvasTime,u=t.children,d=t.manifest,f=e.useState(d),p=T(f,2),m=p[0],v=p[1],h=Tn(),g=Pn(),y=i.useErrorBoundary().showBoundary,b=function(){var e=A(G.mark(function e(t){var n,a,i;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new AbortController,n={},a=t.replace(/[\?#].*(?=\/)/i,""),e.prev=1,e.next=2,fetch(a,n,{signal:r.signal}).then(function(e){if(200!=e.status&&201!=e.status)throw new Error("Failed to fetch Manifest. Please check again.");return e.json()}).then(function(e){if(!e)throw new Error(Vt);v(e)}).catch(function(e){throw console.log("Error fetching manifest, ",e),new Error("Failed to fetch Manifest. Please check again.")});case 2:e.next=4;break;case 3:e.prev=3,i=e.catch(1),y(i);case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}();return e.useEffect(function(){return Vt=a||Ut,function(e){Gt=e||Ht}(o),!m&&n&&b(n),function(){r&&r.abort()}},[]),e.useEffect(function(){if(m){var e=function(e){var t=[],r=[],n=e.rendering,a=e.items;return n&&n.map(function(e){var r=Er(e.format,e.label,e.id);t.push(r)}),a&&a.map(function(e,t){var n=e.rendering,a=[];n&&n.map(function(e){var t=Er(e.format,e.label,e.id);a.push(t)}),r.push({label:ar(e.label)||"Section ".concat(t+1),files:a})}),{manifest:t,canvas:r}}(m);h({renderings:e,type:"setRenderingFiles"});var t=function(e,t,r){var n=e.start,a={};if(!n&&void 0===t&&void 0===r)return{type:"C",canvas:0,time:0};null!=t||null!=r?(a={id:t,selector:{type:"PointSelector",t:void 0===r?0:r},type:void 0===r?"Canvas":"SpecificResource"},null!=r&&(a.source=t)):n&&(a=n);var i=br(e),o=function(e,n,a){var o=a,l=0;if(i&&(null==i?void 0:i.length)>0){if(e)if(void 0===(l=i.findIndex(function(t){return t.canvasId===e}))||l<0)console.warn("Given Canvas was not found in Manifest, ",t),o=0,l=0;else{var s=i[l];if(null!=s.range&&"SpecificResource"===n){var u=s.range,c=u.start,d=u.end;a>=c&&a<=d||(console.warn("Given start time is not within Canvas duration, ",r),o=0)}}}else console.warn("No Canvases in given Manifest"),o=0;return{currentIndex:l,startTime:o}};if(null!=a)switch(a.type){case"Canvas":var l=o(a.id,a.type,0);return{type:"C",canvas:l.currentIndex,time:l.startTime};case"SpecificResource":var s=a.selector.t;return{type:"SR",canvas:(l=o(a.source,a.type,s)).currentIndex,time:l.startTime}}}(m,l,s);h({customStart:t,type:"setCustomStart"}),"SR"==t.type&&g({currentTime:t.time,type:"setCurrentTime"}),h({manifest:m,type:"updateManifest"})}},[m]),m?c.default.createElement(c.default.Fragment,null,u):c.default.createElement(qn,null)}function Bn(e){var t=e.error,r=e.resetErrorBoundary;return c.default.createElement("div",{role:"alert",className:"ramp--error-message__alert"},c.default.createElement("span",{className:"ramp--error-message__message",dangerouslySetInnerHTML:{__html:t.message}}),c.default.createElement("button",{className:"ramp--error-message__reset-button",onClick:r},"Try again"))}Fn.propTypes={manifest:Ln.object,customErrorMessage:Ln.string,emptyManifestMessage:Ln.string,manifestUrl:Ln.string,startCanvasId:Ln.string,startCanvasTime:Ln.number,children:Ln.node};var Un=function(e){e.message;var t=e.children;return c.default.createElement(i.ErrorBoundary,{FallbackComponent:Bn,onReset:function(e){}},t)};function Vn(e){var t=e.manifestUrl,r=e.manifest,n=e.customErrorMessage,a=e.emptyManifestMessage,i=e.startCanvasId,o=e.startCanvasTime,l=e.children;return t||r?c.default.createElement(Un,null,c.default.createElement(wn,null,c.default.createElement(_n,null,c.default.createElement(Fn,{manifestUrl:t,manifest:r,customErrorMessage:n,emptyManifestMessage:a,startCanvasId:i,startCanvasTime:o},l)))):c.default.createElement("p",null,"Please provide a valid manifest.")}Un.propTypes={message:Ln.string,children:Ln.object},Vn.propTypes={manifestUrl:Ln.string,manifest:Ln.object,customErrorMessage:Ln.string,emptyManifestMessage:Ln.string,startCanvasId:Ln.string,startCanvasTime:Ln.number};var Hn=function(){return me.Date.now()},Gn=/\s/;var zn=function(e){for(var t=e.length;t--&&Gn.test(e.charAt(t)););return t},Wn=/^\s+/;var Jn=function(e){return e?e.slice(0,zn(e)+1).replace(Wn,""):e};var Kn=function(e){return"symbol"==typeof e||it(e)&&"[object Symbol]"==Te(e)},Zn=/^[-+]0x[0-9a-f]+$/i,Qn=/^0b[01]+$/i,Xn=/^0o[0-7]+$/i,$n=parseInt;var Yn=function(e){if("number"==typeof e)return e;if(Kn(e))return NaN;if(Se(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Se(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jn(e);var r=Qn.test(e);return r||Xn.test(e)?$n(e.slice(2),r?2:8):Zn.test(e)?NaN:+e},ea=Math.max,ta=Math.min;var ra=function(e,t,r){var n,a,i,o,l,s,u=0,c=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var r=n,i=a;return n=a=void 0,u=t,o=e.apply(i,r)}function m(e){var r=e-s;return void 0===s||r>=t||r<0||d&&e-u>=i}function v(){var e=Hn();if(m(e))return h(e);l=setTimeout(v,function(e){var r=t-(e-s);return d?ta(r,i-(e-u)):r}(e))}function h(e){return l=void 0,f&&n?p(e):(n=a=void 0,o)}function g(){var e=Hn(),r=m(e);if(n=arguments,a=this,s=e,r){if(void 0===l)return function(e){return u=e,l=setTimeout(v,t),c?p(e):o}(s);if(d)return clearTimeout(l),l=setTimeout(v,t),p(s)}return void 0===l&&(l=setTimeout(v,t)),o}return t=Yn(t)||0,Se(r)&&(c=!!r.leading,i=(d="maxWait"in r)?ea(Yn(r.maxWait)||0,t):i,f="trailing"in r?!!r.trailing:f),g.cancel=function(){void 0!==l&&clearTimeout(l),u=0,n=s=a=l=void 0},g.flush=function(){return void 0===l?o:h(Hn())},g};var na=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Se(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),ra(e,t,{leading:n,maxWait:t,trailing:a})};y(function(e,t){!function(e){var t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a={markerStyle:{width:"7px","border-radius":"30%","background-color":"red"},markerTip:{display:!0,text:function(e){return"Break: "+e.text},time:function(e){return e.time}},breakOverlay:{display:!1,displayTime:3,text:function(e){return"Break overlay: "+e.overlayText},style:{width:"100%",height:"20%","background-color":"rgba(0,0,0,0.7)",color:"white","font-size":"17px"}},onMarkerClick:function(e){},onMarkerReached:function(e,t){},markers:[]};function i(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)})}function o(e){var t,r={top:0,bottom:0,left:0,width:0,height:0,right:0};try{t=e.getBoundingClientRect()}catch(e){t=r}return t}var l=-1;function s(e){if(!t.default.mergeOptions){var r=function(e){return!!e&&"object"===(void 0===e?"undefined":n(e))&&"[object Object]"===toString.call(e)&&e.constructor===Object},s=function e(t,n){var a={};return[t,n].forEach(function(t){t&&Object.keys(t).forEach(function(n){var i=t[n];r(i)?(r(a[n])||(a[n]={}),a[n]=e(a[n],i)):a[n]=i})}),a};t.default.mergeOptions=s}t.default.dom.createEl||(t.default.dom.createEl=function(e,r,n){var a=t.default.Player.prototype.dom.createEl(e,r);return n&&Object.keys(n).forEach(function(e){a.setAttribute(e,n[e])}),a});var u=t.default.mergeOptions(a,e),c={},d=[],f=l,p=this,m=null,v=null,h=l;function g(){d.sort(function(e,t){return u.markerTip.time(e)-u.markerTip.time(t)})}function y(e){e.forEach(function(e){e.key=i(),p.el().querySelector(".vjs-progress-holder").appendChild(k(e)),c[e.key]=e,d.push(e)}),g()}function b(e){return u.markerTip.time(e)/p.duration()*100}function x(e,t){t.className="vjs-marker "+(e.class||""),Object.keys(u.markerStyle).forEach(function(e){t.style[e]=u.markerStyle[e]});var r=e.time/p.duration();if((r<0||r>1)&&(t.style.display="none"),t.style.left=b(e)+"%",e.duration)t.style.width=e.duration/p.duration()*100+"%",t.style.marginLeft="0px";else{var n=o(t);t.style.marginLeft=n.width/2+"px"}}function k(e){var r=t.default.dom.createEl("div",{},{"data-marker-key":e.key,"data-marker-time":u.markerTip.time(e)});return x(e,r),r.addEventListener("click",function(t){var r=!1;if("function"==typeof u.onMarkerClick&&(r=!1===u.onMarkerClick(e)),!r){var n=this.getAttribute("data-marker-key");p.currentTime(u.markerTip.time(c[n]))}}),u.markerTip.display&&T(r),r}function w(e){d.forEach(function(t){var r=p.el().querySelector(".vjs-marker[data-marker-key='"+t.key+"']"),n=u.markerTip.time(t);(e||r.getAttribute("data-marker-time")!==n)&&(x(t,r),r.setAttribute("data-marker-time",n))}),g()}function E(e){v&&(h=l,v.style.visibility="hidden"),f=l;var t=[];e.forEach(function(e){var r=d[e];if(r){delete c[r.key],t.push(e);var n=p.el().querySelector(".vjs-marker[data-marker-key='"+r.key+"']");n&&n.parentNode.removeChild(n)}}),t.reverse(),t.forEach(function(e){d.splice(e,1)}),g()}function T(e){e.addEventListener("mouseover",function(){var t=c[e.getAttribute("data-marker-key")];if(m){u.markerTip.html?m.querySelector(".vjs-tip-inner").innerHTML=u.markerTip.html(t):m.querySelector(".vjs-tip-inner").innerText=u.markerTip.text(t),m.style.left=b(t)+"%";var r=o(m),n=o(e);m.style.marginLeft=-parseFloat(r.width/2)+parseFloat(n.width/4)+"px",m.style.visibility="visible"}}),e.addEventListener("mouseout",function(){m&&(m.style.visibility="hidden")})}function S(){m=t.default.dom.createEl("div",{className:"vjs-tip",innerHTML:"<div class='vjs-tip-arrow'></div><div class='vjs-tip-inner'></div>"}),p.el().querySelector(".vjs-progress-holder").appendChild(m)}function C(){if(u.breakOverlay.display&&!(f<0)){var e=p.currentTime(),t=d[f],r=u.markerTip.time(t);e>=r&&e<=r+u.breakOverlay.displayTime?(h!==f&&(h=f,v&&(v.querySelector(".vjs-break-overlay-text").innerHTML=u.breakOverlay.text(t))),v&&(v.style.visibility="visible")):(h=l,v&&(v.style.visibility="hidden"))}}function I(){v=t.default.dom.createEl("div",{className:"vjs-break-overlay",innerHTML:"<div class='vjs-break-overlay-text'></div>"}),Object.keys(u.breakOverlay.style).forEach(function(e){v&&(v.style[e]=u.breakOverlay.style[e])}),p.el().appendChild(v),h=l}function M(){R(),C(),e.onTimeUpdateAfterMarkerUpdate&&e.onTimeUpdateAfterMarkerUpdate()}function R(){if(d.length){var t=function(e){return e<d.length-1?u.markerTip.time(d[e+1]):p.duration()},r=p.currentTime(),n=l;if(f!==l){var a=t(f);if(r>=u.markerTip.time(d[f])&&r<a)return;if(f===d.length-1&&r===p.duration())return}if(r<u.markerTip.time(d[0]))n=l;else for(var i=0;i<d.length;i++)if(a=t(i),r>=u.markerTip.time(d[i])&&r<a){n=i;break}n!==f&&(n!==l&&e.onMarkerReached&&e.onMarkerReached(d[n],n),f=n)}}function O(){u.markerTip.display&&S(),p.markers.removeAll(),y(u.markers),u.breakOverlay.display&&I(),M(),p.on("timeupdate",M),p.off("loadedmetadata")}p.on("loadedmetadata",function(){O()}),p.markers={getMarkers:function(){return d},next:function(){for(var e=p.currentTime(),t=0;t<d.length;t++){var r=u.markerTip.time(d[t]);if(r>e){p.currentTime(r);break}}},prev:function(){for(var e=p.currentTime(),t=d.length-1;t>=0;t--){var r=u.markerTip.time(d[t]);if(r+.5<e)return void p.currentTime(r)}},add:function(e){y(e)},remove:function(e){E(e)},removeAll:function(){for(var e=[],t=0;t<d.length;t++)e.push(t);E(e)},updateTime:function(e){w(e)},reset:function(e){p.markers.removeAll(),y(e)},destroy:function(){p.markers.removeAll(),v&&v.remove(),m&&m.remove(),p.off("timeupdate",C),delete p.markers}}}t.default.registerPlugin("markers",s)}(v.default)});var aa,ia,oa=!1,la=!1,sa=!1,ua=!1,ca=!1,da=!1,fa=!1,pa=!1,ma=!1,va=!1,ha=!1,ga=!1,ya=!1,ba=window.navigator&&window.navigator.userAgentData;if(ba&&ba.platform&&ba.brands&&(la="Android"===ba.platform,sa=Boolean(ba.brands.find(function(e){return"Microsoft Edge"===e.brand})),ua=Boolean(ba.brands.find(function(e){return"Chromium"===e.brand})),ca=!sa&&ua,(ba.brands.find(function(e){return"Chromium"===e.brand})||{}).version,ba.platform,ma=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&!window.matchMedia("(pointer: fine").matches,pa=ba.mobile||la||ma),!ua){var xa=window.navigator&&window.navigator.userAgent||"";oa=/iPod/i.test(xa),(ia=xa.match(/OS (\d+)_/i))&&ia[1]&&ia[1],la=/Android/i.test(xa),function(){var e=xa.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);t&&r&&parseFloat(e[1]+"."+e[2])}(),/Firefox/i.test(xa),sa=/Edg/i.test(xa),ua=/Chrome/i.test(xa)||/CriOS/i.test(xa),ca=!sa&&ua,function(){var e=xa.match(/(Chrome|CriOS)\/(\d+)/);e&&e[2]&&parseFloat(e[2])}(),aa=/MSIE\s(\d+)\.\d/.exec(xa),!(aa&&parseFloat(aa[1]))&&/Trident\/7.0/i.test(xa)&&/rv:11.0/.test(xa)&&11,ga=/Tizen/i.test(xa),ya=/Web0S/i.test(xa),da=/Safari/i.test(xa)&&!ca&&!la&&!sa&&!ga&&!ya,/Windows/i.test(xa),va=/iPhone/i.test(xa)&&!fa,ha=va||fa||oa,ma=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&!window.matchMedia("(pointer: fine").matches,fa=ma&&!la&&!va,pa=la||ha||va||ma||/Mobi/i.test(xa)}var ka=function(t,r){var n=e.useState(function(){return function(e,t){try{var r;return null!==(r=JSON.parse(localStorage.getItem(e)))&&void 0!==r?r:t}catch(e){return t}}(t,r)}),a=T(n,2),i=a[0],o=a[1];return e.useEffect(function(){try{localStorage.setItem(t,JSON.stringify(i))}catch(e){}},[t,i]),[i,o]},wa=function(){return c.default.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{fill:"white",height:"1rem",width:"1rem",scale:.8}},c.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.1213 2.70705C19.9497 1.53548 18.0503 1.53547 16.8787 2.70705L15.1989  4.38685L7.29289 12.2928C7.16473 12.421 7.07382 12.5816 7.02986 12.7574L6.02986  16.7574C5.94466 17.0982 6.04451 17.4587 6.29289 17.707C6.54127 17.9554 6.90176  18.0553 7.24254 17.9701L11.2425 16.9701C11.4184 16.9261 11.5789 16.8352 11.7071  16.707L19.5556 8.85857L21.2929 7.12126C22.4645 5.94969 22.4645 4.05019 21.2929  2.87862L21.1213 2.70705ZM18.2929 4.12126C18.6834 3.73074 19.3166 3.73074 19.7071  4.12126L19.8787 4.29283C20.2692 4.68336 20.2692 5.31653 19.8787 5.70705L18.8622  6.72357L17.3068 5.10738L18.2929 4.12126ZM15.8923 6.52185L17.4477 8.13804L10.4888  15.097L8.37437 15.6256L8.90296 13.5112L15.8923 6.52185ZM4 7.99994C4 7.44766 4.44772  6.99994 5 6.99994H10C10.5523 6.99994 11 6.55223 11 5.99994C11 5.44766 10.5523  4.99994 10 4.99994H5C3.34315 4.99994 2 6.34309 2 7.99994V18.9999C2 20.6568 3.34315  21.9999 5 21.9999H16C17.6569 21.9999 19 20.6568 19 18.9999V13.9999C19 13.4477  18.5523 12.9999 18 12.9999C17.4477 12.9999 17 13.4477 17 13.9999V18.9999C17  19.5522 16.5523 19.9999 16 19.9999H5C4.44772 19.9999 4 19.5522 4 18.9999V7.99994Z",fill:"#fffff"}))},Ea=function(){return c.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"#ffffff",style:{height:"1rem",width:"1rem",scale:.8}},c.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},c.default.createElement("path",{d:"M10 12V17",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("path",{d:"M14 12V17",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("path",{d:"M4 7H20",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("path",{d:"M6 10V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V10",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("path",{d:"M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))},Ta=function(){return c.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{height:"1rem",width:"1rem",scale:.8}},c.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},c.default.createElement("path",{id:"Vector",d:"M6 12L10.2426 16.2426L18.727 7.75732",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))},Sa=function(){return c.default.createElement("svg",{fill:"#ffffff",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{height:"1rem",width:"1rem",scale:.8}},c.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},c.default.createElement("path",{d:"M19.587 16.001l6.096 6.096c0.396 0.396 0.396 1.039 0 1.435l-2.151 2.151c-0.396  0.396-1.038 0.396-1.435 0l-6.097-6.096-6.097 6.096c-0.396 0.396-1.038  0.396-1.434 0l-2.152-2.151c-0.396-0.396-0.396-1.038  0-1.435l6.097-6.096-6.097-6.097c-0.396-0.396-0.396-1.039 0-1.435l2.153-2.151c0.396-0.396  1.038-0.396 1.434 0l6.096 6.097 6.097-6.097c0.396-0.396 1.038-0.396 1.435 0l2.151 2.152c0.396  0.396 0.396 1.038 0 1.435l-6.096 6.096z"})))},Ca=function(e){var t=e.flip,r=void 0!==t&&t;return c.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{fill:"white",height:"1.25rem",width:"1.25rem",transform:r?"rotate(180deg)":"rotate(0)"}},c.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},c.default.createElement("path",{d:"M4 20L15.3333 12L4 4V20Z",fill:"#ffffff"}),c.default.createElement("path",{d:"M20 4H17.3333V20H20V4Z",fill:"#ffffff"})))},Ia=function(){return c.default.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{height:"0.75rem",width:"0.75rem"},className:"structure-item-locked"},c.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},c.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 10.0546V8C5.25 4.27208 8.27208  1.25 12 1.25C15.7279 1.25 18.75 4.27208 18.75 8V10.0546C19.8648 10.1379 20.5907  10.348 21.1213 10.8787C22 11.7574 22 13.1716 22 16C22 18.8284 22 20.2426 21.1213  21.1213C20.2426 22 18.8284 22 16 22H8C5.17157 22 3.75736 22 2.87868 21.1213C2  20.2426 2 18.8284 2 16C2 13.1716 2 11.7574 2.87868 10.8787C3.40931 10.348 4.13525  10.1379 5.25 10.0546ZM6.75 8C6.75 5.10051 9.10051 2.75 12 2.75C14.8995 2.75 17.25  5.10051 17.25 8V10.0036C16.867 10 16.4515 10 16 10H8C7.54849 10 7.13301 10 6.75  10.0036V8Z",fill:"#000000"})))},Ma=function(e){var t=e.flip,r=void 0!==t&&t;return c.default.createElement("svg",{viewBox:"0 0 1024 1024",fill:"#ffffff",xmlns:"http://www.w3.org/2000/svg",style:{height:"1rem",width:"1rem",scale:.8,transform:r?"rotate(180deg)":"rotate(0)"}},c.default.createElement("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),c.default.createElement("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("g",{id:"SVGRepo_iconCarrier"},c.default.createElement("path",{d:"M256 120.768L306.432 64 768 512l-461.568 448L256 903.232 659.072 512z",fill:"#ffffff"})))},Ra=function(){return c.default.createElement("svg",{viewBox:"0 0 24 24",fill:"#fffff",xmlns:"http://www.w3.org/2000/svg",style:{fill:"none",height:"1.25rem",width:"1.25rem"}},c.default.createElement("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),c.default.createElement("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("g",{id:"SVGRepo_iconCarrier"},c.default.createElement("rect",{width:"24",height:"24",fill:"none"}),c.default.createElement("path",{d:"M5 12V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V12",stroke:"#ffffff",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("path",{d:"M12 3L12 15M12 15L16 11M12 15L8 11",stroke:"#ffffff",strokeLinecap:"round",strokeLinejoin:"round"})))};function Oa(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return _a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ja(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ja(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Aa=function(){var t=e.useContext(gn),r=e.useContext(In),n=r.player,a=t.allCanvases,i=t.canvasIndex,o=t.canvasIsEmpty,l=e.useState(-1),s=T(l,2),u=s[0],c=s[1],d=e.useMemo(function(){return na(c,50)},[]),f=e.useRef(null),p=e.useMemo(function(){var e;return null!==(e=(null==a?void 0:a.length)-1)&&void 0!==e?e:0},[a]),m=e.useMemo(function(){return(null==a?void 0:a.length)-1>0},[a]),v=e.useCallback(function(){return n?n.currentTime():0},[n]);return e.useEffect(function(){t&&r&&(f.current=r.player),f.current&&f.current.on("timeupdate",function(){d(f.current.currentTime())})},[t]),{canvasIndex:i,canvasIsEmpty:o,currentTime:u,isMultiCanvased:m,lastCanvasIndex:p,player:n,getCurrentTime:v}},Da=function(t){var r=t.enableFileDownload,n=void 0!==r&&r,a=t.lastCanvasIndex,i=t.withCredentials,o=void 0!==i&&i,l=e.useContext(yn),s=e.useContext(Mn),u=e.useContext(gn),c=u.allCanvases,d=u.canvasIndex,f=u.customStart,p=u.manifest,m=u.playlist,v=u.renderings,h=u.srcIndex,g=m.isPlaylist,y=e.useState(),b=T(y,2),x=b[0],k=b[1],w=e.useState({error:"",sources:[],tracks:[],poster:null,targets:[]}),E=T(w,2),S=E[0],C=E[1],I=e.useState(),M=T(I,2),R=M[0],O=M[1],_=e.useState(!0),j=T(_,2),P=j[0],A=j[1],D=e.useState(!1),N=T(D,2),L=N[0],q=N[1],F=e.useMemo(function(){var e,t;return n&&v!={}?null==v||null===(e=v.manifest)||void 0===e?void 0:e.concat(null==v||null===(t=v.canvas[d])||void 0===t?void 0:t.files):[]},[v,d]);e.useEffect(function(){if(p){if(null==d||d<0)throw new Error("Invalid canvas index. Please check your Manifest.");B(d,g)}return function(){q(!1),s({player:null,type:"updatePlayer"})}},[p,d]);var B=function(e,t){var r=xr({manifest:p,canvasIndex:e,startTime:e===f.startIndex&&P?f.startTime:0,srcIndex:h,isPlaylist:g}),n=r.isMultiSource,a=r.sources,i=r.tracks,u=r.canvasTargets,d=r.mediaType,m=r.error,v=r.poster;o&&a.map(function(e){return e.withCredentials=!0}),k("video"===d),l({canvasTargets:u,type:"canvasTargets"}),l({isMultiSource:n,type:"hasMultipleItems"}),t&&((null==u?void 0:u.length)>0?s({currentTime:u[0].altStart,type:"setCurrentTime"}):s({currentTime:0,type:"setCurrentTime"})),C(Pa(Pa({},S),{},{error:m,sources:a,tracks:i,poster:v,targets:u}));var y=c.find(function(t){return t.canvasIndex===e});if(y&&!y.isEmpty){var b=[p.label?Object.values(p.label)[0][0]:"",y.label].filter(Boolean).join(" - ");l({canvasDuration:y.duration,type:"canvasDuration"}),l({canvasLink:{label:b,id:y.canvasId},type:"canvasLink"}),l({type:"setCanvasIsEmpty",isEmpty:!1})}else s({type:"updatePlayer"}),l({type:"setCanvasIsEmpty",isEmpty:!0}),C(Pa(Pa({},S),{},{error:v}));O(n||!1),q(!m),A(!1)};return{isMultiSourced:R,isPlaylist:g,isVideo:x,nextItemClicked:function(e,t){s({currentTime:t,type:"setCurrentTime"}),l({srcIndex:e,type:"setSrcIndex"})},playerConfig:S,ready:L,renderingFiles:F,srcIndex:h,switchPlayer:function(e,t){null!=e&&e>-1&&e<=a&&(l({canvasIndex:e,type:"switchCanvas"}),B(e,t))}}},Na=function(t){var r=t.itemIndex,n=t.isRoot,a=t.itemId,i=t.liRef,o=t.sectionRef,l=t.structureContainerRef,s=t.isCanvas,u=t.isEmpty,c=t.canvasDuration,d=t.setSectionIsCollapsed,f=t.times,p=e.useContext(Mn),m=e.useContext(gn),v=m.canvasIndex,h=m.currentNavItem,g=m.playlist.isPlaylist,y=e.useContext(In).isPlaying,b=e.useMemo(function(){return!(null==a||(null==h?void 0:h.id)!==a||!g&&s||(null==h?void 0:h.canvasIndex)!==v+1)},[h,v]),x=e.useMemo(function(){return!(!(v+1===r)||n&&!y)&&(d(!1),!0)},[v,y]),k=e.useMemo(function(){return null!=f?function(e){var t=Wt(e,!0,!0),r=function(e,t){return 1===e?"".concat(e," ").concat(t):"".concat(e," ").concat(t,"s")};if(""!=t){var n=t.split(":").map(function(e){return parseFloat(e)}),a=T(n,3),i=a[0],o=a[1],l=a[2],s=i>0?"".concat(r(i,"hour")," "):"";return(s+=i>0||o>0?"".concat(r(o,"minute")," "):"")+r(parseInt(l),"second")}return""}(f.start):""},[a,c]),w=e.useCallback(function(e){if(e.preventDefault(),e.stopPropagation(),Qt({start:f.start,end:f.end},{end:c})){p({clickedUrl:a,type:"navClick"}),i.current.isClicked=!0,o.current&&(o.current.isClicked=!0);var t=l.current.querySelector('[aria-live="assertive"]');t&&(s?t.textContent="Player seeked to ".concat(k," in Canvas ").concat(r):u||(t.textContent="Player seeked to ".concat(k)))}});return{canvasIndex:v,currentNavItem:h,handleClick:w,isActiveLi:b,isActiveSection:x,isPlaylist:g,screenReaderTime:k}},La=function(){var t=e.useContext(yn),r=e.useContext(gn),n=r.canvasIndex,a=r.structures,i=a.isCollapsed,o=a.structItems,l=e.useContext(In).isPlaying,s=e.useMemo(function(){return(null==o?void 0:o.length)>0&&o.map(function(e){var t;return(null===(t=e.items)||void 0===t?void 0:t.length)>0&&null==e.collapseStatus&&(e.collapseStatus=i?"isCollapsed":"isExpanded"),e})},[]);e.useEffect(function(){l&&c(n,!1)},[l,n]);var u=e.useCallback(function(){var e=!i;t({type:"setIsCollapsed",isCollapsed:e});for(var r=s.length-1;r>-1;r--)d(r,e)}),c=function(e,t){d(e,t);var r=i?"isCollapsed":"isExpanded",n=s.map(function(e){return e.collapseStatus}).filter(function(e){return null!=e});(null==n?void 0:n.length)>0&&(n.every(function(e){return e===n[0]})&&n[0]!=r&&u())},d=function(e,t){var r;(null===(r=s[e])||void 0===r||null===(r=r.items)||void 0===r?void 0:r.length)>0&&(s[e].collapseStatus=t?"isCollapsed":"isExpanded")};return{collapseExpandAll:u,isCollapsed:i,updateSectionStatus:c}},qa=function(t){var r=t.manifestUrl,n=t.playerID,a=t.setCurrentTime,i=t.showMetadata,o=t.showNotes,l=t.transcripts,s=e.useContext(gn),u=e.useContext(In),c="No valid Transcript(s) found, please check again.",d="Transcript format is not supported, please check again.",f=new AbortController,p=e.useRef(),m=e.useRef(null),v=e.useRef(null),h=e.useState(!0),g=T(h,2),y=g[0],b=g[1],x=e.useState(!0),k=T(x,2),w=k[0],E=k[1],S=e.useState([]),C=T(S,2),I=C[0],R=C[1],O=e.useState([]),_=T(O,2),j=_[0],P=_[1],D=e.useState({title:null,filename:null,id:null,tUrl:null,tType:null,tFileExt:null,isMachineGen:!1,tError:null}),N=T(D,2),L=N[0],q=N[1],F=e.useState([]),B=T(F,2),U=B[0],V=B[1],H=e.useState([]),z=T(H,2),W=z[0],J=z[1],K=e.useState({url:"",isTimed:!1}),Z=T(K,2),Q=Z[0],X=Z[1],$=e.useMemo(function(){return void 0===s?[]:s.annotations},[s]),Y=e.useRef(null);e.useEffect(function(){s&&u?(p.current=s.canvasIndex,m.current=u.player):v.current=setInterval(function(){var e,t=document.getElementById(n);if(t?t.player?m.current=t.player:m.current=t:(console.warn("Cannot find player, ".concat(n," on page. Transcript synchronization is disabled")),E(!1)),m.current){var r=parseInt(m.current.canvasIndex);Number.isNaN(r)&&(r=0),r!==p.current&&(R([]),e=r,f.abort(),p.current=e,a(m.current.currentTime()))}},500),m.current&&m.current.on("timeupdate",function(){a(m.current.currentTime())})},[s]),e.useEffect(function(){if(0!==(null==l?void 0:l.length)||r)if((null==$?void 0:$.length)>0&&0===(null==l?void 0:l.length)){var e,t;null==Y||null===(e=Y.current)||void 0===e||e.abort();var n=$.filter(function(e){return e.canvasIndex==p.current});if((null==n?void 0:n.length)>0&&(null===(t=n[0].annotationSets)||void 0===t?void 0:t.length)>0){var a=n[0].annotationSets.filter(function(e){var t;return null===(t=e.motivation)||void 0===t?void 0:t.includes("supplementing")}),i=(null==a?void 0:a.length)>0?a.map(function(e,t){var r=e.filename,n=e.format,a=e.label,i=e.url,o=rr(a),l=o.isMachineGen,s=o.labelText;return{id:"".concat(s,"-").concat(p.current,"-").concat(t),filename:r,format:n,isMachineGen:l,title:s,url:i}}):[],o=[].concat(M(j),[{canvasId:p.current,items:i}]);P(null!=o?o:[]),te(null!=o?o:[])}}else Y.current=new AbortController,ee(l);else E(!1),R([]),q({tType:Pr.noTranscript,id:"",tError:c})},[$]),e.useEffect(function(){return function(){var e;clearInterval(v.current),null===(e=Y.current)||void 0===e||e.abort(),null==f||f.abort()}},[]);var ee=function(){var e=A(G.mark(function e(t){var n,a;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null==t?void 0:t.length)>0)){e.next=2;break}return e.next=1,Ur(t);case 1:a=e.sent,e.next=4;break;case 2:return e.next=3,qr(r,"",Y.current.signal);case 3:a=e.sent;case 4:if(n=a,!Y.current.signal.aborted){e.next=5;break}return e.abrupt("return");case 5:P(null!=n?n:[]),te(null!=n?n:[]);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t,r;if(!f.signal.aborted){var n,a=function(e){return e.filter(function(e){return e.canvasId==p.current})};if(!(null!=e&&e.length)>0||!(null!==(t=a(e))&&void 0!==t&&t.length)>0||!(null!==(n=e,r=a(n)[0].items)&&void 0!==r&&r.length)>0)b(!0),R([]),re(void 0);else{b(!1);var i=a(e)[0];V(i.items),re(i.items[0])}}};e.useEffect(function(){if((null==j?void 0:j.length)>0&&null!=p.current){var e=j.filter(function(e){return e.canvasId==p.current})[0];V(null==e?void 0:e.items),re(null==e?void 0:e.items[0])}},[p.current]);var re=function(){var e=A(G.mark(function e(t){var r,n,a,l,s,u,f,m,v,h,g,y,x;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!=t){e.next=1;break}return b(!0),E(!1),q({tType:Pr.noTranscript,id:"",tError:c}),e.abrupt("return");case 1:if(b(!1),n=(r=t).id,a=r.title,l=r.filename,s=r.url,u=r.isMachineGen,f=r.format,!((null==(m=W.filter(function(e){return e.id==n&&e.canvasId==p.current}))?void 0:m.length)>0)){e.next=2;break}v=m[0],h=v.tData,g=v.tFileExt,y=v.tType,x=v.tError,R(h),q({title:a,filename:l,id:n,isMachineGen:u,tType:y,tUrl:s,tFileExt:g,tError:x}),X({url:s,isTimed:y==Pr.timedText}),e.next=3;break;case 2:return e.next=3,Promise.resolve(Gr(s,f,p.current,i,o)).then(function(e){if(null!=e){var r=e.tData,i=e.tUrl,o=e.tType,s=e.tFileExt,f="";switch(o){case Pr.invalid:f="Invalid URL for transcript, please check again.";break;case Pr.noTranscript:f=c;break;case Pr.noSupport:f=d;break;case Pr.invalidVTT:f="Invalid WebVTT file, please check again.";break;case Pr.invalidTimestamp:f="Invalid timestamp format in cue(s), please check again."}R(r),q({title:a,filename:l,id:n,isMachineGen:u,tType:o,tUrl:i,tFileExt:s,tError:f}),X({url:i,isTimed:o==Pr.timedText}),t=Pa(Pa({},t),{},{tType:o,tData:r,tFileExt:s,canvasId:p.current,tError:f}),J([].concat(M(W),[t]))}});case 3:E(!1);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ne=e.useCallback(function(e){var t=U.filter(function(t){return t.id===e});re(t[0])},[U]);return{canvasIndexRef:p,canvasTranscripts:U,isEmpty:y,isLoading:w,NO_SUPPORT_MSG:d,playerRef:m,selectedTranscript:Q,selectTranscript:ne,transcript:I,transcriptInfo:L}},Fa=function(t){var r=t.autoScrollEnabled,n=t.enableShowMore,a=t.inPlayerRange,i=t.MAX_LINES,o=t.refs,l=t.setIsShowMoreRef,s=t.setIsActive,u=t.tags,c=t.texts,d=o.annotationRef,f=o.annotationTagsRef,p=o.annotationTextsRef,m=o.annotationTimesRef,v=o.containerRef,h=o.moreTagsButtonRef,g=e.useState(0),y=T(g,2),b=y[0],x=y[1],k=e.useState(""),w=T(k,2),E=w[0],S=w[1],C=e.useState(!1),I=T(C,2),M=I[0],R=I[1],O=e.useState(!1),_=T(O,2),j=_[0],P=_[1],A=e.useState(!1),D=T(A,2),N=D[0],L=D[1];e.useEffect(function(){s(!!a),r&&a&&or(d.current,v,!0)},[a]),e.useEffect(function(){var e,t,r=p.current,a=function(){if(r&&(null==c?void 0:c.length)>0){var t=r.clientWidth,n=parseFloat(getComputedStyle(r).fontSize);if(!isNaN(n)){var a=(e=document.createElement("canvas")).getContext("2d");a.font=getComputedStyle(r).font;var o=t/(a.measureText(c).width/c.length),s=o*(i-1)+Math.floor(o/2),u=c;if(c.includes("<br>")){for(var d=c.split("<br>"),f=[],p=0;p<d.length;p++){var m=d[p];if(m.length<o){var v=o>4?o-4:0;f.push(m.padEnd(v))}else f.push(m)}u=f.join("<br>")}var h=function(e,t){if(e.length<=t)return{truncated:e,isTruncated:!1};var r=document.createElement("div");if(r.innerHTML=e,cr(r)<=t+3)return{truncated:e,isTruncated:!1};t>0&&dr(r,t);var n=fr(r);return n&&(n.textContent+="..."),{truncated:r.innerHTML,isTruncated:!0}}(u,s),g=h.truncated;h.isTruncated?(x(g),S(g),l(!0),R(!0)):(x(u),R(!1))}}};return n?(t=new ResizeObserver(function(e){requestAnimationFrame(function(){var t,r=Oa(e);try{for(r.s();!(t=r.n()).done;){t.value;a()}}catch(e){r.e(e)}finally{r.f()}})}),v.current&&t.observe(v.current),a()):x(c),function(){var r,n;null===(r=e)||void 0===r||r.remove(),null===(n=t)||void 0===n||n.disconnect()}},[c]),e.useEffect(function(){var e;if(u){e=new ResizeObserver(function(e){requestAnimationFrame(function(){var r,n=Oa(e);try{for(n.s();!(r=n.n()).done;){r.value;t(!0)}}catch(e){n.e(e)}finally{n.f()}})}),v.current&&e.observe(v.current);var t=function(e){var t=q(e);P(t),L(t)};t(!0)}return function(){var t;null===(t=e)||void 0===t||t.disconnect()}},[u]);var q=function(e){var t=!1,r=f.current,n=m.current;if(r&&n&&(null==u?void 0:u.length)>0){var a;r.style.gridColumn="";var i=(null==n?void 0:n.clientWidth)||0,o=r.parentElement.clientWidth-i;if((null===(a=r.children)||void 0===a?void 0:a.length)>0){for(var l,s=(null===(l=h.current)||void 0===l?void 0:l.clientWidth)||20,c=Math.abs(o-s),d=!1,p=0;p<r.children.length;p++){var v=r.children[p];v.classList.contains("hidden")&&v.classList.remove("hidden"),v.clientWidth>o&&(d=!0),e&&v!=h.current&&(c-=v.clientWidth)<s&&(t=!0,v.classList.add("hidden"))}d&&(r.style.gridColumn="1 / -1")}}return t},F=function(e){if("A"==e.target.tagName){var t=e.target.getAttribute("href");if(null!=t&&t.match(/https?:\/\/[^\s/$.?#].[^\s]*/gi))return void window.open(e.target.href,"_self");e.preventDefault()}},B=function(e,t){e?x(c):(x(E),or(d.current,v,!0)),t(!e)};return{handleKeyDown:function(e,t){13!=e.keyCode&&32!=e.keyCode||t(e)},handleLinkClicks:F,handleLinkKeyDown:function(e){"Enter"!=e.key&&" "!=e.key||(e.preventDefault(),F(e))},handleShowMoreLessClick:B,handleShowMoreLessKeydown:function(e,t,r){"Enter"!=e.key&&" "!=e.key||(e.preventDefault(),B(t,r))},hasLongerTags:j,hasLongerText:M,setShowMoreTags:L,showMoreTags:N,setTextToShow:x,textToShow:b,toggleTagsView:q,truncatedText:E}},Ba=g(y(function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports})),Ua=g(y(function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports})),Va=y(function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports}),Ha=y(function(e){var t=R.default;e.exports=function(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return Va(e)},e.exports.__esModule=!0,e.exports.default=e.exports}),Ga=g(Ha),za=y(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Wa=g(za),Ja=y(function(e){e.exports=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=za(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports}),Ka=y(function(e){function t(){return e.exports=t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Ja(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Za=g(Ka),Qa=y(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Xa=g(y(function(e){e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qa(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}));function $a(e,t,r){return t=Wa(t),Ga(e,Ya()?Reflect.construct(t,r||[],Wa(e).constructor):t.apply(e,r))}function Ya(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ya=function(){return!!e})()}var ei=v.default.getComponent("SeekBar"),ti=function(){function t(r,n){var a;return Ba(this,t),a=$a(this,t,[r,n]),P(a,"initializeProgress",function(e){a.setProgress(e),a.setInitTime(e),a.player.currentTime(e)}),a.addClass("vjs-custom-progress-bar"),a.setAttribute("data-testid","videojs-custom-seekbar"),a.setAttribute("tabindex",0),a.player=r,a.options=n,a.selectSource=a.options.nextItemClicked,a.playerEventListener,a.initTimeRef=e.createRef(),a.progressRef=e.createRef(),a.canvasTargetsRef=e.createRef(),a.srcIndexRef=e.createRef(),a.isMultiSourceRef=e.createRef(),a.currentTimeRef=e.createRef(),a.pointerDragged=!1,a.totalDuration,a.playProgress=a.getChild("PlayProgressBar"),a.loadProgress=a.getChild("LoadProgressBar"),a.player.on("ready",function(){a.initializeEl(),a.updateComponent()}),a.player.on("loadstart",function(){a.updateComponent(),a.buildProgressBar()}),a.player.on("loadeddata",function(){a.setInitTime(a.player.currentTime())}),a.player.on("fullscreenchange",function(){if(!a.player.isFullscreen()){var e=a.player.currentTime(),t=Math.min(100,Math.max(0,e/a.totalDuration*100));document.documentElement.style.setProperty("--range-progress","calc(".concat(t,"%)")),a.setProgress(e)}}),a.player.on("dispose",function(){clearInterval(a.playerEventListener)}),a}return Xa(t,ei),Ua(t,[{key:"setInitTime",value:function(e){this.initTimeRef.current=e}},{key:"setSrcIndex",value:function(e){this.srcIndexRef.current=e}},{key:"setProgress",value:function(e){this.progressRef.current=e}},{key:"setCanvasTargets",value:function(e){this.canvasTargetsRef.current=e,this.totalDuration=e.reduce(function(e,t){return e+t.duration},0)}},{key:"setIsMultiSource",value:function(e){this.isMultiSourceRef.current=e}},{key:"setCurrentTime",value:function(e){this.currentTimeRef.current=e}},{key:"updateComponent",value:function(){var e=this,t=this.player,r=t.srcIndex,n=t.targets;this.setSrcIndex(r),this.setCanvasTargets(n);var a=n[r];a.customStart>a.start?this.initializeProgress(a.customStart):this.initializeProgress(a.start),this.setIsMultiSource((null==n?void 0:n.length)>1),this.playerEventListener||(this.playerEventListener=setInterval(function(){e.timeUpdateHandler()},100))}},{key:"update",value:function(){var e,r,n,a,i,o;(r=t,n="update",a=this,o=Za(Wa(1&(i=3)?r.prototype:r),n,a),2&i&&"function"==typeof o?function(e){return o.apply(a,e)}:o)([]),ma&&0===this.player.currentTime()&&(this.removeClass("played-range"),document.documentElement.style.setProperty("--range-progress","calc(".concat(0,"%)")));var l=null!==(e=this.player.structStart)&&void 0!==e?e:0;if(0!=l&&0===this.player.currentTime()){this.player.currentTime(l);var s=Math.min(100,Math.max(0,l/this.totalDuration*100));this.addClass("played-range"),document.documentElement.style.setProperty("--range-progress","calc(".concat(s,"%)")),this.player.structStart=0}}},{key:"initializeEl",value:function(){var e=this,t=v.default.dom.createEl("div",{className:"block-stripes",role:"presentation",id:"left-block"}),r=v.default.dom.createEl("div",{className:"block-stripes",role:"presentation",id:"right-block"});this.el().appendChild(t),this.el().appendChild(r),this.el().addEventListener("mouseenter",function(t){e.handleMouseMove(t)}),this.el().addEventListener("pointerup",function(t){e.pointerDragged&&e.handleMouseUp(t)}),this.el().addEventListener("pointermove",function(t){e.handleMouseMove(t),e.pointerDragged=!0}),this.el().addEventListener("pointerdown",function(t){e.handleMouseDown(t),e.pointerDragged=!1})}},{key:"handleMouseMove",value:function(e){var t=this.convertToTime(e),r=t.currentTime,n=t.offsetx;null!=r&&this.setCurrentTime(r);var a=this.getChild("MouseTimeDisplay");if(a){var i=a.getChild("TimeTooltip").el_;r&&(i.innerHTML=Wt(r));var o=i.clientWidth/2;i.style.left="".concat(n-o,"px")}}},{key:"handleMouseDown",value:function(e){if(ma||2!==e.buttons){var t=this.convertToTime(e),r=t.currentTime;if(t._,!Number.isNaN(r)){var n;if(this.isMultiSourceRef.current&&(n=this.canvasTargetsRef.current.find(function(e){var t=e.altStart+e.duration;if(r>=e.altStart&&r<=t)return e})),n){var a,i,o=null!==(a=null===(i=n)||void 0===i?void 0:i.sIndex)&&void 0!==a?a:0;o!=this.srcIndexRef.current?(this.selectSource(n.sIndex,r-n.altStart),this.setSrcIndex(o)):this.player.currentTime(r-n.altStart)}else this.player.currentTime(r);if(ma){var l=Math.min(100,Math.max(0,r/this.totalDuration*100));this.player.currentTime(r),this.addClass("played-range"),document.documentElement.style.setProperty("--range-progress","calc(".concat(l,"%)"))}}}}},{key:"handleMouseUp",value:function(e){this.handleMouseDown(e)}},{key:"buildProgressBar",value:function(){var e;this.removeClass("played-range");var t=this.canvasTargetsRef,r=this.isMultiSourceRef,n=this.player,a=this.srcIndexRef,i=this.totalDuration;if((null===(e=t.current)||void 0===e?void 0:e.length)>0){var o=t.current[a.current],l=o.altStart,s=o.start,u=o.end,c=o.duration,d=document.getElementById("left-block"),f=document.getElementById("right-block");if(r.current){var p=Math.min(100,Math.max(0,l/i*100));this.playProgress.el_.style.left="".concat(p,"%"),this.loadProgress.el_.style.left="".concat(p,"%"),this.addClass("played-range"),document.documentElement.style.setProperty("--range-progress","calc(".concat(p,"%)"))}else{var m=100*s/c,v=100*(c-u)/c;n.isClipped=v>0,d&&(d.style.width="".concat(m,"%")),f&&(f.style.width=v+"%",f.style.left="".concat(100-v,"%"))}}}},{key:"convertToTime",value:function(e){var t,r,n=e.srcElement;if(n.classList.contains("block-stripes")){var a=this.canvasTargetsRef.current[0],i=a.altStart,o=a.end,l=a.duration;return"right-block"===n.id?{currentTime:o,offsetx:o/l*this.el().clientWidth}:{currentTime:i,offsetx:i/l*this.el().clientWidth}}var s,u,c=e.target.getBoundingClientRect().x,d=null!=e.nativeEvent?null!=e.nativeEvent.offsetX?e.nativeEvent.offsetX:(null===(t=e.nativeEvent.targetTouches[0])||void 0===t?void 0:t.clientX)-c:e.offsetX,f=null!==(r=this.totalDuration)&&void 0!==r?r:this.player.duration();if(n.classList.contains("ramp--track-marker--search"))return{currentTime:null!==(u=e.target.dataset.markerTime)&&void 0!==u?u:0,offsetx:e.target.offsetLeft};if(d&&null!=d){if(this.isMultiSourceRef.current){var p=parseFloat(this.playProgress.el_.style.left)/100*this.el().clientWidth,m=n.classList,v=!((null==m?void 0:m.length)>0)||(m.contains("vjs-play-progress")||m.contains("vjs-load-progress"));p>d&&v&&(d+=p)}s=d/this.el().clientWidth*f}if(e.target.hasAttribute("data-start")){var h=e.target.dataset,g=h.start;h._,d=(s+=parseFloat(g))*this.el().clientWidth/this.totalDuration}return{currentTime:s,offsetx:d}}},{key:"timeUpdateHandler",value:function(){var e,t=this,r=this.initTimeRef,n=this.player;n.isDisposed()||n.ended()||null==n||(r.current>0&&0==n.currentTime()?(e=r.current,n.currentTime(r.current)):e=n.currentTime(),da&&!pa&&n.paused()?ra(function(){t.onTimeUpdate(e)}):this.onTimeUpdate(e),this.setInitTime(0))}},{key:"onTimeUpdate",value:function(e){this.player.hasClass("vjs-ios-native-fs")&&!this.player.audioOnlyMode_||this.setProgress(e),this.handleTimeUpdate(e)}},{key:"handleTimeUpdate",value:function(e){var t,r=this.player,n=this.el_,a=this.canvasTargetsRef,i=this.srcIndexRef;if(n&&r&&a.current){var o=a.current[null!==(t=i.current)&&void 0!==t?t:0],l=o.start,s=o.end;if(ma){var u=Math.min(100,Math.max(0,e/this.totalDuration*100));document.documentElement.style.setProperty("--range-progress","calc(".concat(u,"%)"))}e<l&&r.currentTime(l),e>=s&&!r.paused()&&!r.isDisposed()&&(s<r.duration()&&r.trigger("ended"),document.documentElement.style.setProperty("--range-progress","calc(".concat(0,"%)")),this.removeClass("played-range"),r.one("play",function(){var e=r.currentTime();e<s?r.currentTime(e):r.currentTime(l)}))}}}])}();v.default.registerComponent("CustomSeekBar",ti);var ri=v.default.getComponent("ProgressControl"),ni=function(){function e(t,r){var n;Ba(this,e),(n=$a(this,e,[t,r])).addClass("vjs-custom-progress-bar");var a=n.getChild("seekBar");return a.el_.style.display="none",a.removeClass("vjs-progress-holder"),n.addChild("CustomSeekBar",{nextItemClicked:r.nextItemClicked}),n}return Xa(e,ri),Ua(e,[{key:"handleMouseSeek",value:function(e){var t=this.getChild("customSeekBar");t&&t.handleMouseMove(e)}},{key:"handleMouseDown",value:function(e){var t=this.el_.ownerDocument,r=this.getChild("customSeekBar");r&&r.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}}])}();function ai(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ai=function(){return!!e})()}v.default.registerComponent("VideoJSProgress",ni);var ii=v.default.getComponent("TimeDisplay"),oi=function(){function t(r,n){var a,i,o,l;return Ba(this,t),i=this,l=[r,n],o=Wa(o=t),(a=Ga(i,ai()?Reflect.construct(o,l||[],Wa(i).constructor):o.apply(i,l))).addClass("vjs-time-control vjs-current-time-display"),a.setAttribute("role","presentation"),a.player=r,a.options=n,a.initTimeRef=e.createRef(),a.initTimeRef.current=n.currentTime,a.playerInterval,a.player.on("loadstart",function(){a.playerInterval=setInterval(function(){a.handleTimeUpdate()},100)}),a.player.on("seeked",function(){da&&!pa&&a.updateTextNode_(r.currentTime())}),a.player.on("fullscreenchange",function(){r.isFullscreen()||a.updateTextNode_(r.currentTime())}),a.player.on("dispose",function(){clearInterval(a.playerInterval)}),a}return Xa(t,ii),Ua(t,[{key:"buildCSSClass",value:function(){return"current-time"}},{key:"setInitTime",value:function(e){this.initTimeRef.current=e}},{key:"handleTimeUpdate",value:function(){var e=this.player,t=this.initTimeRef,r=e.targets,n=e.srcIndex;if(e&&!e.isDisposed()&&r){var a,i=e.hasClass("vjs-ios-native-fs");a=t.current>0&&0==e.currentTime()?t.current:e.currentTime();var o=r[null!=n?n:0],l=o.start,s=o.altStart;s!=l&&n>0&&(a+=s),i&&!e.audioOnlyMode_||this.updateTextNode_(a),this.setInitTime(0)}}}])}();function li(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(li=function(){return!!e})()}v.default.registerComponent("VideoJSCurrentTime",oi);var si=v.default.getComponent("MenuButton"),ui=v.default.getComponent("MenuItem"),ci=function(){function e(t,r){var n,a,i,o;return Ba(this,e),a=this,o=[t,r],i=Wa(i=e),(n=Ga(a,li()?Reflect.construct(i,o||[],Wa(a).constructor):i.apply(a,o))).addClass("vjs-file-download"),n.setAttribute("data-testid","videojs-file-download"),n.setIcon("file-download"),n}return Xa(e,si),Ua(e,[{key:"createItems",value:function(){var e=this.options_,t=this.player_,r=e.files;return(null==r?void 0:r.length)>0?r.map(function(e){var r=new ui(t,{label:e.label});return r.handleClick=function(){Xt(e.id,e.filename,e.fileExt)},r}):[]}}])}();function di(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(di=function(){return!!e})()}v.default.registerComponent("VideoJSFileDownload",ci);var fi=v.default.getComponent("Button"),pi=function(){function e(t,r){var n,a,i,o;return Ba(this,e),a=this,o=[t,r],i=Wa(i=e),(n=Ga(a,di()?Reflect.construct(i,o||[],Wa(a).constructor):i.apply(a,o))).setIcon("next-item"),n.addClass("vjs-play-control vjs-control"),n.setAttribute("data-testid","videojs-next-button"),n.controlText("Next"),n.options=r,n.player=t,n.cIndex=r.canvasIndex,n.player.on("loadstart",function(){n.updateComponent()}),n}return Xa(e,fi),Ua(e,[{key:"updateComponent",value:function(){var e,t=this.player;t&&null!=t&&(void 0===t.canvasIndex&&(null===(e=t.children())||void 0===e?void 0:e.length)>0?this.cIndex=Number(t.children()[0].dataset.canvasindex):this.cIndex=t.canvasIndex)}},{key:"handleClick",value:function(){this.handleNextClick()}},{key:"handleKeyDown",value:function(e){32!==e.which&&13!==e.which||(e.stopPropagation(),this.handleNextClick())}},{key:"handleNextClick",value:function(){this.cIndex!=this.options.lastCanvasIndex&&this.options.switchPlayer(this.cIndex+1,!0)}}])}();function mi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(mi=function(){return!!e})()}v.default.registerComponent("VideoJSNextButton",pi);var vi=v.default.getComponent("Button"),hi=function(){function e(t,r){var n,a,i,o;return Ba(this,e),a=this,o=[t,r],i=Wa(i=e),(n=Ga(a,mi()?Reflect.construct(i,o||[],Wa(a).constructor):i.apply(a,o))).setIcon("previous-item"),n.addClass("vjs-play-control vjs-control"),n.setAttribute("data-testid","videojs-previous-button"),n.options=r,n.player=t,n.cIndex=r.canvasIndex,n.player.on("loadstart",function(){n.updateComponent()}),n}return Xa(e,vi),Ua(e,[{key:"updateComponent",value:function(){var e,t=this.player;t&&null!=t&&(void 0===t.canvasIndex&&(null===(e=t.children())||void 0===e?void 0:e.length)>0?this.cIndex=Number(t.children()[0].dataset.canvasindex):this.cIndex=t.canvasIndex);this.controlText(0==this.cIndex?"Replay":"Previous")}},{key:"handleClick",value:function(){this.handlePreviousClick()}},{key:"handleKeyDown",value:function(e){32!==e.which&&13!==e.which||(e.stopPropagation(),this.handlePreviousClick())}},{key:"handlePreviousClick",value:function(){this.cIndex>-1&&0!=this.cIndex?this.options.switchPlayer(this.cIndex-1,!0):0==this.cIndex&&this.player.currentTime(0)}}])}();function gi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gi=function(){return!!e})()}v.default.registerComponent("VideoJSPreviousButton",hi);var yi=v.default.getComponent("Component"),bi=function(){function e(t,r){var n,a,i,o;return Ba(this,e),a=this,o=[t,r],i=Wa(i=e),(n=Ga(a,gi()?Reflect.construct(i,o||[],Wa(a).constructor):i.apply(a,o))).setAttribute("data-testid","videojs-title-link"),n.addClass("vjs-title-bar"),n.options=r,n.player=t,n.player.on("loadstart",function(){n.updateComponent()}),n}return Xa(e,yi),Ua(e,[{key:"updateComponent",value:function(){var e=this.player;if(e&&null!=e&&e.canvasLink){var t=e.canvasLink,r=t.label,n=t.id,a=r,i=null;i=n.includes("manifest/canvas")?n.replace("manifest/canvas","section"):n;var o=v.default.dom.createEl("a",{className:"vjs-title-link",href:i,target:"_blank",rel:"noreferrer noopener",innerHTML:a});this.el().hasChildNodes()?this.el().replaceChildren(o):this.el().appendChild(o)}}}])}();function xi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(xi=function(){return!!e})()}yi.registerComponent("VideoJSTitleLink",bi);var ki;(ki=document.createElement("div")).style.display="none",ki.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'.concat('\n<symbol id="zoomed-out" viewBox="0 0 20 20">\n  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>\n  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>\n  <g id="SVGRepo_iconCarrier">\n    <path fill="#ffffff" fill-rule="evenodd" d="M4 9a5 5 0 1110 0A5 5 0 014 9zm5-7a7 7 \n      0 104.2 12.6.999.999 0 00.093.107l3 3a1 1 0 001.414-1.414l-3-3a.999.999 0 00-.107-.093A7 \n      7 0 009 2zM8 6.5a1 1 0 112 0V8h1.5a1 1 0 110 2H10v1.5a1 1 0 11-2 0V10H6.5a1 1 0 010-2H8V6.5z">\n    </path>\n  </g>\n</symbol>').concat('\n<symbol id="zoomed-in" viewBox="0 0 20 20">\n  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>\n  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>\n  <g id="SVGRepo_iconCarrier">\n    <path fill="#ffffff" fill-rule="evenodd" d="M9 4a5 5 0 100 10A5 5 0 009 4zM2 9a7 \n      7 0 1112.6 4.2.999.999 0 01.107.093l3 3a1 1 0 01-1.414 1.414l-3-3a.999.999 0 \n      01-.093-.107A7 7 0 012 9zm10.5 0a1 1 0 00-1-1h-5a1 1 0 100 2h5a1 1 0 001-1z">\n    </path>\n  </g>\n</symbol>',"</svg>"),document.body.appendChild(ki);var wi=v.default.getComponent("Button"),Ei=function(){function t(r,n){var a,i,o,l;return Ba(this,t),i=this,l=[r,n],o=Wa(o=t),a=Ga(i,xi()?Reflect.construct(o,l||[],Wa(i).constructor):o.apply(i,l)),P(a,"setTrackScrubberValue",function(e,t){document.documentElement.style.setProperty("--range-scrubber","calc(".concat(e,"%)"));var r=a.options.trackScrubberRef;if(r.current&&r.current.children){var n=T(r.current.children,3);n[0];var i=n[1];n[2],i.setAttribute("aria-valuenow",t)}}),a.setAttribute("data-testid","videojs-track-scrubber-button"),a.addClass("vjs-button vjs-track-scrubber"),a.controlText("Toggle track scrubber"),a.el().innerHTML='\n      <svg class="vjs-icon-zoom" role="presentation">\n        <use xlink:href="#zoomed-out"></use>\n      </svg>',a.options=n,a.player=r,a.playerInterval,a.zoomedOutRef=e.createRef(),a.currentTrackRef=e.createRef(),a.player.on("ready",function(){a.options.trackScrubberRef.current&&(a.playerInterval=setInterval(function(){a.handleTimeUpdate()},100))}),a.player.on("loadstart",function(){a.options.trackScrubberRef.current&&(a.updateComponent(),a.playerInterval||(a.playerInterval=setInterval(function(){a.handleTimeUpdate()},100)))}),a.player.on("fullscreenchange",function(){if(a.player.isFullscreen()&&!a.zoomedOutRef.current){var e=a.zoomedOutRef.current;a.setZoomedOut(!e)}}),a.player.on("dispose",function(){clearInterval(a.playerInterval)}),a}return Xa(t,wi),Ua(t,[{key:"setCurrentTrack",value:function(e){this.currentTrackRef.current=e}},{key:"setZoomedOut",value:function(e){this.zoomedOutRef.current=e,e?(this.options.trackScrubberRef.current.classList.add("hidden"),this.el().innerHTML='\n        <svg class="vjs-icon-zoom" role="presentation">\n          <use xlink:href="#zoomed-out"></use>\n        </svg>'):(this.options.trackScrubberRef.current.classList.remove("hidden"),this.el().innerHTML='\n        <svg class="vjs-icon-zoom" role="presentation">\n          <use xlink:href="#zoomed-in"></use>\n        </svg>')}},{key:"attachListeners",value:function(){var e=this,t=this.options.trackScrubberRef;if(t.current){this.populateTrackScrubber(),this.updateTrackScrubberProgressBar();var r=!1,n=T(t.current.children,3);n[0];var a=n[1];n[2],a.addEventListener("mouseenter",function(t){e.handleMouseMove(t)}),a.addEventListener("pointerup",function(t){r&&e.handleSetProgress(t)}),a.addEventListener("pointermove",function(t){e.handleMouseMove(t),r=!0}),a.addEventListener("pointerdown",function(t){1===t.which&&(e.handleSetProgress(t),r=!1)})}}},{key:"updateComponent",value:function(){this.zoomedOutRef.current=!0,this.currentTrackRef.current={},this.attachListeners()}},{key:"handleKeyDown",value:function(e){32!==e.which&&13!==e.which||(e.preventDefault(),this.handleTrackScrubberClick(),e.stopPropagation())}},{key:"handleClick",value:function(){this.handleTrackScrubberClick()}},{key:"handleTrackScrubberClick",value:function(){var e=this.currentTrackRef,t=this.player;if(this.options.trackScrubberRef.current&&e.current){t.isFullscreen()&&t.exitFullscreen();var r=this.zoomedOutRef.current;this.setZoomedOut(!r)}}},{key:"handleTimeUpdate",value:function(){var e,t=this.player,r=this.options,n=this.zoomedOutRef;if(t.canvasIsEmpty&&!n.current&&this.setZoomedOut(!0),!t.isDisposed()&&!t.ended()){var a,i,o=t.currentTime();if(t.markers&&"function"!=typeof t.markers&&"function"==typeof t.markers.getMarkers&&(null===(e=t.markers.getMarkers())||void 0===e?void 0:e.length)>0&&!r.isPlaylist)this.readPlayerMarkers();else this.setCurrentTrack({duration:null!==(a=t.playableDuration)&&void 0!==a?a:t.duration(),time:null!==(i=t.altStart)&&void 0!==i?i:0,key:"",text:"Complete media file"}),o=t.srcIndex&&t.srcIndex>0?o+t.altStart:o;this.updateTrackScrubberProgressBar(o)}}},{key:"updateTrackScrubberProgressBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.player,r=this.currentTrackRef;r.current||t.markers&&"function"==typeof t.markers.getMarkers&&this.readPlayerMarkers();var n=t.altStart,a=t.srcIndex>0?e-r.current.time+n:e-r.current.time,i=Math.min(100,Math.max(0,100*a/r.current.duration));this.populateTrackScrubber(a,i)}},{key:"populateTrackScrubber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.options.trackScrubberRef;if(r.current){var n=T(r.current.children,3),a=n[0];n[1];var i=n[2];this.setTrackScrubberValue(t,e),i.innerHTML=Wt(this.currentTrackRef.current.duration);var o=!isNaN(e)&&e>0?e:0;a.innerHTML=Wt(o)}}},{key:"readPlayerMarkers",value:function(){var e=this.player.markers.getMarkers().filter(function(e){return"ramp--track-marker--fragment"==e.class});(null==e?void 0:e.length)>0&&this.setCurrentTrack(e[0])}},{key:"handleMouseMove",value:function(e){var t=this.options.timeToolRef;if(t.current){var r=this.getTrackTime(e);if(isFinite(r)){var n=e.offsetX-t.current.offsetWidth/2;t.current.style.left=n+"px",t.current.innerHTML=Wt(r)}}}},{key:"handleSetProgress",value:function(e){var t=this.currentTrackRef,r=this.player;if(t.current){var n=this.getTrackTime(e);if(null!=n){var a=Math.min(100,Math.max(0,n/t.current.duration*100));this.setTrackScrubberValue(a,n);var i=(null==r?void 0:r.srcIndex)>0?n:n+t.current.time;r.currentTime(i)}}}},{key:"getTrackTime",value:function(e){var t=this.currentTrackRef;if(t.current){var r=e.offsetX;if(r&&null!=r)return r/e.target.clientWidth*t.current.duration}}}])}();function Ti(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Si(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Si(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function Si(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ii(t){var r=t.enableFileDownload,n=t.enableTitleLink,a=t.isVideo,i=t.options,o=t.placeholderText,l=t.scrubberTooltipRef,s=t.tracks,u=t.trackScrubberRef,d=t.videoJSLangMap,f=t.withCredentials,p=jn(),h=Pn(),g=En(),y=Tn(),b=g.canvasDuration,x=g.canvasLink,k=g.hasMultiItems,w=g.targets,E=g.autoAdvance,S=g.structures,C=g.canvasSegments,I=S.hasStructure,R=S.structItems,O=p.clickedUrl,_=p.isEnded,j=p.isPlaying,A=p.currentTime,D=ka("startVolume",1),N=T(D,2),L=N[0],q=N[1],F=ka("startMuted",!1),B=T(F,2),U=B[0],V=B[1],H=ka("startCaptioned",!0),G=T(H,2),z=G[0],W=G[1],J=ka("startQuality",null),K=T(J,2),Z=K[0],Q=K[1],X=e.useRef(null),$=e.useRef(),Y=e.useRef(),ee=Aa(),te=ee.canvasIndex,re=ee.canvasIsEmpty,ne=ee.lastCanvasIndex,ae=Da({enableFileDownload:r,withCredentials:f,lastCanvasIndex:ne}),ie=ae.isPlaylist,oe=ae.renderingFiles,le=ae.srcIndex,se=ae.switchPlayer,ue=function(t){var r=t.lastCanvasIndex,n=e.useContext(yn),a=e.useContext(gn),i=a.autoAdvance,o=a.canvasIndex,l=a.canvasIsEmpty,s=e.useState(zt/1e3),u=T(s,2),c=u[0],d=u[1],f=e.useRef(null);e.useEffect(function(){m(),l&&!f.current&&i&&(d(zt/1e3),p())},[o,i,l]);var p=e.useCallback(function(){var e=(new Date).getTime();f.current=setInterval(function(){var t=(new Date).getTime(),a=(zt-(t-e))/1e3;a>0?d(Math.ceil(a)):(o<r&&i&&n({canvasIndex:o+1,type:"switchCanvas"}),m())},1e3)}),m=e.useCallback(function(){clearInterval(f.current),f.current=null});return{messageTime:c,clearDisplayTimeInterval:m,createDisplayTimeInterval:p}}({lastCanvasIndex:ne}),ce=ue.messageTime,de=e.useRef();de.current=e.useMemo(function(){return re},[re]);var fe=e.useRef();fe.current=e.useMemo(function(){return _},[_]);var pe=e.useRef();pe.current=e.useMemo(function(){return j},[j]);var me=e.useRef();me.current=e.useMemo(function(){return E},[E]);var ve=e.useRef();ve.current=e.useMemo(function(){return le},[le]);var he=e.useRef();he.current=e.useMemo(function(){return A},[A]);var ge=e.useRef();ge.current=e.useMemo(function(){return s},[s]);var ye=e.useRef();ye.current=e.useMemo(function(){return O},[O]);var be=function(e){var t=e.currentWidth()-24;e.controlBar.width("".concat(t,"px"))},xe=function(e){e.one("loadedmetadata",function(){console.log("Player loadedmetadata");var t=fe.current?0:Math.max(he.current,e.currentTime());if(e.currentTime(t),be(e),e.duration(b),(da||ha)&&4!=e.readyState()&&e.load(),fe.current||pe.current){var r=e.play();void 0!==r&&r.then(function(t){e.currentTime(he.current)}).catch(function(e){})}a&&_e(e);var n=$t(e.src(),b);null!=n?(e.playableDuration=n.end-n.start,e.altStart=n.start):(e.playableDuration=b,e.altStart=w[le].altStart),e.canvasIndex=Re.current,da&&Ae()})},ke=function(t){var r=t.options,n=t.playerInitSetup,a=t.startQuality,i=t.tracks,o=t.updatePlayer,l=t.videoJSRef,s=t.videoJSLangMap,u=e.useContext(gn),c=e.useContext(In),d=e.useContext(Mn),f=u.canvasDuration,p=u.canvasIndex,m=u.canvasIsEmpty,h=u.currentNavItem,g=u.playlist,y=c.currentTime,b=c.isClicked,x=c.player,k=c.searchMarkers,w=e.useState(""),E=T(w,2),S=E[0],C=E[1],I=e.useState(null),R=T(I,2),O=R[0],_=R[1],j=e.useState(!1),P=T(j,2),A=P[0],D=P[1],N=e.useRef(A),L=function(e){D(e),N.current=e},q=e.useRef(null),F=function(e){e?q.current=e:q.current.dispose()};e.useEffect(function(){return function(){q.current&&(F(null),document.removeEventListener("keydown",lr),L(!1))}},[]),e.useEffect(function(){var e,t;if(H(r.sources),!q.current&&(null===(e=r.sources)||void 0===e?void 0:e.length)>0){v.default.addLanguage(r.language,JSON.parse(s)),G(),v.default.log.level("off");var a=v.default(l.current,r,function(){n(a)});F(a),d({player:a,type:"updatePlayer"}),U(a)}else if(q.current&&(null===(t=r.sources)||void 0===t?void 0:t.length)>0){var i,u=q.current;S&&(null===(i=u.markers)||void 0===i||i.removeAll()),C(null),m?L(!0):(u.addClass("vjs-disabled"),L(!1),o(u),d({player:u,type:"updatePlayer"}))}},[r.sources,l]),e.useEffect(function(){if(q.current){var e=q.current;m?(e.audioOnlyMode(!1),e.canvasIsEmpty=!0,e.aspectRatio("16:9"),e.controlBar.addClass("vjs-hidden"),e.removeClass("vjs-disabled"),e.pause(),C(null==h?void 0:h.id)):e.controlBar.removeClass("vjs-hidden")}},[p,m,h]),e.useEffect(function(){q.current&&q.current.currentTime(y,d({type:"resetClick"}))},[b,x]);var B=e.useMemo(function(){var e;if((null==g||null===(e=g.markers)||void 0===e?void 0:e.length)>0){var t=g.markers.filter(function(e){return e.canvasIndex===p});if((null==t?void 0:t.length)>0)return t[0].canvasMarkers.map(function(e){return{time:parseFloat(e.time),text:e.value,class:"ramp--track-marker--playlist"}})}},[g.markers]);e.useEffect(function(){if(q.current&&q.current.markers&&A){var e;"function"==typeof q.current.markers&&q.current.markers({markerTip:{display:!1,text:function(e){return e.text}},markerStyle:{},markers:[]});var t=[];(null==B?void 0:B.length)>0&&(t=B.map(function(e){return{time:parseFloat(e.time),text:e.value,class:"ramp--track-marker--playlist"}})),null===(e=q.current.markers)||void 0===e||e.removeAll(),q.current.markers.add([].concat(M(O?[O]:[]),M(k),M(t)))}},[O,k,f,p,q.current,A,B]);var U=function(e){e.controlBar.getChild("PlayToggle").on("pointerdown",function(){V()}),e.on("pointerdown",function(e){"video"==e.target.nodeName.toLowerCase()&&V()}),document.addEventListener("keydown",function(e){lr(e,q.current,m)===_t&&V()}),window.addEventListener("resize",function(){null!=e&&e.player_&&e.trigger("resize")}),window.visualViewport&&window.visualViewport.addEventListener("resize",function(){null!=e&&e.player_&&e.trigger("resize")})},V=function(){d({isPlaying:!1,type:"setPlayingStatus"})},H=function(e){var t=null==e?void 0:e.find(function(e){return 1==e.selected}),r=null==e?void 0:e.find(function(e){return e.label==a});r&&(t.selected=!1,r.selected=!0)},G=function(){(null==i?void 0:i.length)>0&&l.current&&i.map(function(e){var t=document.createElement("track");t.setAttribute("key",e.key),t.setAttribute("src",e.src),t.setAttribute("kind",e.kind),t.setAttribute("label",e.label),t.setAttribute("srclang",e.srclang),l.current.appendChild(t)})};return{activeId:S,fragmentMarker:O,isReadyRef:N,playerRef:q,setActiveId:C,setFragmentMarker:_,setIsReady:L}}({options:i,playerInitSetup:function(e){e.on("ready",function(){console.log("Player ready"),be(e),(pa||fa)&&e.controlBar.addClass("vjs-mobile-visible"),e.error()?e.trigger("error"):(e.muted(U),e.volume(L),e.canvasIndex=Re.current,e.duration(b),e.srcIndex=le,e.targets=w,n&&(e.canvasLink=x),e.getChild("controlBar").qualitySelector.setIcon("cog"))}),e.on("emptied",function(){var t,r,n;if((null===(t=ge.current)||void 0===t?void 0:t.length)>0&&a&&(null===(r=e.textTracks())||void 0===r?void 0:r.length)<=(null===(n=ge.current)||void 0===n?void 0:n.length)){if(da)for(var i=e.remoteTextTracks(),o=i.length;o--;)e.removeRemoteTextTrack(i[o]);ge.current.forEach(function(t){var r;t.label==(null===(r=Y.current)||void 0===r?void 0:r.label)?t.mode="showing":t.mode="disabled",e.addRemoteTextTrack(t,!1)})}}),e.on("canplay",function(){h({isEnded:!1,type:"setIsEnded"})}),e.on("play",function(){h({isPlaying:!0,type:"setPlayingStatus"})}),e.on("timeupdate",function(){Ae()}),e.on("resize",function(){be(e)}),e.on("ended",function(){setTimeout(function(){Te.current&&pe.current&&(h({isEnded:!0,type:"setIsEnded"}),e.pause(),de.current||Pe())},100)}),e.on("volumechange",function(){V(e.muted()),q(e.volume())}),e.on("loadeddata",function(){Me(!0),Ae()}),e.on("qualityRequested",function(e,t){Q(t.label)}),e.on("seeked",function(t){e.hasClass("vjs-disabled")&&e.removeClass("vjs-disabled"),4!=e.readyState()&&0==e.currentTime()&&e.currentTime()!=he.current&&e.currentTime(he.current),setTimeout(function(){h({type:"setCurrentTime",currentTime:e.currentTime()})},0)}),e.on("error",function(t){var r="Something went wrong. Please try again later or contact support for help.";switch(e.error().code){case 1:console.error("MEDIA_ERR_ABORTED: The fetching process for the media resource was aborted by the user agent             at the userâ€™s request.");break;case 2:r="The media could not be loaded due to a network error. Please try again later.",console.error("MEDIA_ERR_NETWORK: A network error caused the user agent to stop fetching the media resource,             after the resource was established to be usable.");break;case 3:r="Media is corrupt or has features not supported by the browser.           Please try a different media or contact support for help.",console.error("MEDIA_ERR_DECODE: An error occurred while decoding the media resource, after             the resource was established to be usable.");break;case 4:r="Media could not be loaded.  Network error or media format is not supported.",console.error("MEDIA_ERR_SRC_NOT_SUPPORTED: The media resource indicated by the src attribute was not suitable.");break;default:console.error("An unknown error occurred.")}var n=e.getChild("ErrorDisplay");n&&(n.contentEl().innerText=r,n.removeClass("vjs-hidden"),e.removeClass("vjs-error"),e.removeClass("vjs-disabled")),t.stopPropagation()}),xe(e)},updatePlayer:function(e){e.duration(b),e.src(i.sources),e.poster(i.poster),e.canvasIndex=Re.current,e.canvasIsEmpty=de.current,e.srcIndex=le,e.targets=w,n&&(e.canvasLink=x);for(var t=e.remoteTextTracks(),o=t.length;o--;)e.removeRemoteTextTrack(t[o]);if((null==s?void 0:s.length)>0&&a&&s.forEach(function(t){e.addRemoteTextTrack(t,!1)}),null!=e.getChild("controlBar")&&!re){var c=e.getChild("controlBar"),d=pa?c.children().findIndex(function(e){return"MuteToggle"==e.name_}):c.children().findIndex(function(e){return"VolumePanel"==e.name_});if(I||ie?c.getChild("videoJSTrackScrubber")||c.addChild("videoJSTrackScrubber",{trackScrubberRef:u,timeToolRef:l},d+1):c.removeChild("videoJSTrackScrubber"),pa||(c.removeChild("volumePanel"),c.addChild("volumePanel",{inline:!a},d),e.trigger("volumechange")),(null==s?void 0:s.length)>0&&a&&!c.getChild("subsCapsButton"))c.addChild("subsCapsButton",{},d+1).children_[0].addClass("captions-on");if(a?(e.audioOnlyMode(!1),e.removeClass("vjs-audio"),e.aspectRatio("16:9"),e.addChild("bigPlayButton")):(e.audioOnlyMode(!0),e.addClass("vjs-audio"),e.height(e.controlBar.height()),e.removeChild("bigPlayButton")),r){var f=c.children().findIndex(function(e){return"FullscreenToggle"==e.name_}),p=c.children().findIndex(function(e){return"VideoJSFileDownload"==e.name_});if(p=p<0?f:p,c.removeChild("videoJSFileDownload"),(null==oe?void 0:oe.length)>0){var m={title:"Download Files",controlText:"Alternate resource download",files:oe};c.addChild("videoJSFileDownload",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ci(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},m),p)}}}e.structStart=he.current,xe(e)},startQuality:Z,tracks:s,videoJSRef:X,videoJSLangMap:d}),we=ke.activeId,Ee=ke.fragmentMarker,Te=ke.isReadyRef,Se=ke.playerRef,Ce=ke.setActiveId,Ie=ke.setFragmentMarker,Me=ke.setIsReady,Re=e.useRef();Re.current=e.useMemo(function(){return te},[te]);var Oe=e.useRef();Oe.current=e.useMemo(function(){return we},[we]);var _e=function(e){var t,r=e.textTracks();if(pa&&!la&&r.on("addtrack",function(){for(var t=0;t<r.length;t++)""===r[t].language&&""===r[t].label&&e.textTracks().removeTrack(r[t]),z&&Y.current&&(r.tracks_.filter(function(e){return e.label===Y.current.label&&e.language===Y.current.language})[0].mode="showing")}),(null===(t=r.tracks_)||void 0===t?void 0:t.length)>0){for(var n=null,a=!1,i=0;i<r.tracks_.length;i++){var o=r.tracks_[i];"subtitles"!==o.kind&&"captions"!==o.kind||""==o.language||""==o.label||(o.mode="disabled",a||(n=o),a=!0)}n&&z&&(n.mode="showing",Y.current=n,je(!0))}r.on("change",function(){for(var e=[],t=0;t<r.tracks_.length;t++){var n=r[t],a=n.mode,i=n.label,o=n.kind;e.push(r[t].mode),"showing"!==a||""==i||"subtitles"!==o&&"captions"!==o||(Y.current=r[t])}var l=!!e.includes("showing");je(l),W(l)})},je=function(e){var t=Se.current.controlBar.getChild("subsCapsButton");null!=t&&t&&null!=t&&t.children_&&(e?(t.children_[0].addClass("captions-on"),$.current=!0):(t.children_[0].removeClass("captions-on"),$.current=!1,Y.current=null))},Pe=e.useMemo(function(){return na(function(){var e=Re.current===ne;if(me.current&&!e||k)if(Se.current&&Se.current.markers&&(Se.current.pause(),Ie(null),Se.current.markers.removeAll()),k){if(!(le+1<w.length))return;y({srcIndex:le+1,type:"setSrcIndex"}),h({currentTime:0,type:"setCurrentTime"}),Se.current.play()}else if((null==R?void 0:R.length)>0){var t=R[Re.current+1];if(t){y({canvasIndex:Re.current+1,type:"switchCanvas"}),h({startTime:0,type:"setTimeFragment"}),h({currentTime:0,type:"setCurrentTime"});var r=C.filter(function(e){return e.canvasIndex===t.canvasIndex&&1===e.itemIndex}),n=null!=t.id?t:r[0],a=0;null!=n&&null!=n.id&&(a=n.times.start),0===a?y({item:n,type:"switchItem"}):n.isEmpty&&(y({item:n,type:"switchItem"}),Se.current.currentTime(a),t.isEmpty||Se.current.play())}}})},[Re.current]),Ae=e.useMemo(function(){return na(function(){var e=Se.current;if(e&&Te.current){var t,r=null!==(t=e.currentTime())&&void 0!==t?t:he.current;k&&ve.current>0&&(r+=w[ve.current].altStart);var n,a,i=Le(r);if(Oe.current!==(null==i?void 0:i.id))if(i)if(y({item:i,type:"switchItem"}),Ce(i.id),!ie&&e.markers){var o=i.times,l=o.start,s=o.end;if(h({endTime:s,startTime:l,type:"setTimeFragment"}),l!==s){var u=s>i.canvasDuration?i.canvasDuration:s;Ie({time:l,duration:u-l,text:l,class:"ramp--track-marker--fragment"})}else Ie(null)}else null!==Ee&&Ie(null);else y({item:null,type:"switchItem"}),Ce(null),Ie(null);if(ye.current&&!e.paused())h({type:"clearClickedUrl"}),e.structStart=null!==(n=null==e||null===(a=e.targets[0])||void 0===a?void 0:a.start)&&void 0!==n?n:0}},10)},[]),De=null,Ne=null,Le=function(e){if(ie)return C[Re.current];var t=sr(e),r=C.filter(function(e){if(Qt(e.times,e.canvasDuration)&&t>=e.times.start&&t<e.times.end)return e});if(ye.current){var n=r.filter(function(e){return e.id===ye.current});r=(null==n?void 0:n.length)>0?n:r}var a,i=Ti(r);try{for(i.s();!(a=i.n()).done;){var o=a.value,l=o.isCanvas,s=o.canvasDuration,u=o.canvasIndex,c=o.times;if(u==Re.current+1){if(l)return o;var d=Qt(c,s);if(t>=c.start&&t<c.end&&d)return o}}}catch(e){i.e(e)}finally{i.f()}return null},qe=function(e){se(e,!0)},Fe=function(e,t,r){32!==e.which&&13!==e.which||se(t,!0,r)};return c.default.createElement("div",null,c.default.createElement("div",{"data-vjs-player":!0,"data-canvasindex":Re.current},de.current&&c.default.createElement("div",{"data-testid":"inaccessible-message-display",style:{position:Se.current?"absolute":"relative",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:"medium",textAlign:"center",color:"#fff",backgroundColor:"black",zIndex:101,aspectRatio:Se.current?"":"16/9"}},c.default.createElement("p",{className:"ramp--media-player_inaccessible-message-content","data-testid":"inaccessible-message-content",dangerouslySetInnerHTML:{__html:o}}),ne>0&&c.default.createElement("div",{className:"ramp--media-player_inaccessible-message-buttons","data-testid":"inaccessible-message-buttons"},te>=1&&c.default.createElement("button",{"aria-label":"Go back to previous item",onClick:function(){return qe(te-1)},onKeyDown:function(e){return Fe(e,te-1,"previousBtn")},"data-testid":"inaccessible-previous-button"},c.default.createElement(Ca,{flip:!0})," Previous"),te!=ne&&c.default.createElement("button",{"aria-label":"Go to next item",onClick:function(){return qe(te+1)},onKeyDown:function(e){return Fe(e,te+1,"nextBtn")},"data-testid":"inaccessible-next-button"},"Next ",c.default.createElement(Ca,null))),te!=ne&&ne>0&&c.default.createElement("p",{"data-testid":"inaccessible-message-timer",className:m.default("ramp--media-player_inaccessible-message-timer",me.current?"":"hidden")},"Next item in ".concat(ce," second").concat(1===ce?"":"s"))),c.default.createElement("video",{"data-testid":"videojs-".concat(a?"video":"audio","-element"),"data-canvasindex":Re.current,ref:X,className:m.default("video-js vjs-big-play-centered vjs-theme-ramp vjs-disabled",la?"is-mobile":""),onTouchStart:function(e){De=e.touches[0].clientX,Ne=e.touches[0].clientY},onTouchEnd:function(e){var t=Se.current;e.changedTouches[0].clientX==De&&e.changedTouches[0].clientY==Ne&&(t.paused()?t.play():t.pause())},style:{display:"".concat(de.current?"none":"")}})),(I||ie)&&c.default.createElement("div",{className:"vjs-track-scrubber-container hidden",ref:u,id:"track_scrubber"},c.default.createElement("p",{className:"vjs-time track-currenttime",role:"presentation"}),c.default.createElement("span",{type:"range","aria-label":"Track scrubber",role:"slider",tabIndex:0,className:"vjs-track-scrubber",style:{width:"100%"}},!ma&&c.default.createElement("span",{className:"tooltiptext",ref:l,"aria-hidden":!0,role:"presentation"})),c.default.createElement("p",{className:"vjs-time track-duration",role:"presentation"})))}v.default.registerComponent("VideoJSTrackScrubber",Ei),require("@silvermine/videojs-quality-selector")(v.default),Ii.propTypes={enableFileDownload:Ln.bool,enableTitleLink:Ln.bool,isVideo:Ln.bool,options:Ln.object,placeholderText:Ln.string,scrubberTooltipRef:Ln.object,tracks:Ln.array,trackScrubberRef:Ln.object,videoJSLangMap:Ln.string,withCredentials:Ln.bool};var Mi={"Audio Player":"Audio Player","Video Player":"Video Player",Play:"Play",Pause:"Pause",Replay:"Replay","Current Time":"Current Time",Duration:"Duration","Remaining Time":"Remaining Time","Stream Type":"Stream Type",LIVE:"LIVE","Seek to live, currently behind live":"Seek to live, currently behind live","Seek to live, currently playing live":"Seek to live, currently playing live",Loaded:"Loaded",Progress:"Progress","Progress Bar":"Progress Bar","progress bar timing: currentTime={1} duration={2}":"{1} of {2}",Fullscreen:"Fullscreen","Exit Fullscreen":"Exit Fullscreen",Mute:"Mute",Unmute:"Unmute","Playback Rate":"Playback Rate",Subtitles:"Subtitles","subtitles off":"subtitles off",Captions:"Captions","captions off":"captions off",Chapters:"Chapters",Descriptions:"Descriptions","descriptions off":"descriptions off","Audio Track":"Audio Track","Volume Level":"Volume Level","You aborted the media playback":"You aborted the media playback","A network error caused the media download to fail part-way.":"A network error caused the media download to fail part-way.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"The media could not be loaded, either because the server or network failed or because the format is not supported.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.","No compatible source was found for this media.":"No compatible source was found for this media.","The media is encrypted and we do not have the keys to decrypt it.":"The media is encrypted and we do not have the keys to decrypt it.","Play Video":"Play Video",Close:"Close","Close Modal Dialog":"Close Modal Dialog","Modal Window":"Modal Window","This is a modal window":"This is a modal window","This modal can be closed by pressing the Escape key or activating the close button.":"This modal can be closed by pressing the Escape key or activating the close button.",", opens captions settings dialog":", opens captions settings dialog",", opens subtitles settings dialog":", opens subtitles settings dialog",", opens descriptions settings dialog":", opens descriptions settings dialog",", selected":", selected","captions settings":"captions settings","subtitles settings":"subtitles settings","descriptions settings":"descriptions settings",Text:"Text",White:"White",Black:"Black",Red:"Red",Green:"Green",Blue:"Blue",Yellow:"Yellow",Magenta:"Magenta",Cyan:"Cyan",Background:"Background",Window:"Window",Transparent:"Transparent","Semi-Transparent":"Semi-Transparent",Opaque:"Opaque","Font Size":"Font Size","Text Edge Style":"Text Edge Style",None:"None",Raised:"Raised",Depressed:"Depressed",Uniform:"Uniform","Drop shadow":"Drop shadow","Font Family":"Font Family","Proportional Sans-Serif":"Proportional Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportional Serif","Monospace Serif":"Monospace Serif",Casual:"Casual",Script:"Script","Small Caps":"Small Caps",Reset:"Reset","restore all settings to the default values":"restore all settings to the default values",Done:"Done","Caption Settings Dialog":"Caption Settings Dialog","Beginning of dialog window. Escape will cancel and close the window.":"Beginning of dialog window. Escape will cancel and close the window.","End of dialog window.":"End of dialog window.","{1} is loading.":"{1} is loading.","Exit Picture-in-Picture":"Exit Picture-in-Picture","Picture-in-Picture":"Picture-in-Picture","No content":"No content",Color:"Color",Opacity:"Opacity","Text Background":"Text Background","Caption Area Background":"Caption Area Background","Playing in Picture-in-Picture":"Playing in Picture-in-Picture","Skip backward {1} seconds":"Skip backward {1} seconds","Skip forward {1} seconds":"Skip forward {1} seconds"};function Ri(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Oi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ri(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _i=function(t){var r=t.enableFileDownload,n=void 0!==r&&r,a=t.enablePIP,o=void 0!==a&&a,l=t.enablePlaybackRate,s=void 0!==l&&l,d=t.enableTitleLink,f=void 0!==d&&d,p=t.withCredentials,m=void 0!==p&&p,v=t.language,h=void 0===v?"en":v,g=En(),y=jn(),b=i.useErrorBoundary().showBoundary,x=g.srcIndex,k=g.playlist,w=g.structures,E=k.isPlaylist,T=w.hasStructure,S=y.currentTime,C=e.useRef(),I=e.useRef(),M=e.useRef("{}"),R=Aa(),O=R.canvasIsEmpty,_=R.canvasIndex,j=R.isMultiCanvased,P=R.lastCanvasIndex,D=Da({enableFileDownload:n,lastCanvasIndex:P,withCredentials:m}),N=D.isMultiSourced,L=D.isVideo,q=D.playerConfig,F=D.ready,B=D.renderingFiles,U=D.nextItemClicked,V=D.switchPlayer,H=q.error,z=q.poster,W=q.sources,J=q.targets,K=q.tracks,Z=e.useMemo(function(){return A(G.mark(function e(){var t;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,function(e){return Promise.resolve().then(function(){return u(require(e))})}("video.js/dist/lang/".concat(h,".json"));case 1:t=e.sent,M.current=JSON.stringify(t),e.next=3;break;case 2:e.prev=2,e.catch(0),console.warn("".concat(h," is not available, defaulting to English")),M.current=JSON.stringify(Mi);case 3:case"end":return e.stop()}},e,null,[[0,2]])}))},[h]);e.useEffect(function(){try{Z()}catch(e){b(e)}},[]);var Q=e.useMemo(function(){return{autoplay:!1,id:"iiif-media-player",playbackRates:s?[.5,.75,1,1.5,2]:[],experimentalSvgIcons:!0,controls:!0,fluid:!0,language:h,inactivityTimeout:pa||ma?0:2e3,html5:{nativeTextTracks:!la&&(fa&&!da||va)},errorDisplay:{uncloseable:!1},userActions:{hotkeys:da?void 0:function(e){lr(e,this)}},videoJSTitleLink:f,sources:[]}},[h,s,f]),X=e.useMemo(function(){return Oi(Oi({},Q),{},O?{sources:[]}:{aspectRatio:L?"16:9":"1:0",audioOnlyMode:!L,bigPlayButton:L,poster:L?z:null,controlBar:{children:[j?"videoJSPreviousButton":"","playToggle",j?"videoJSNextButton":"","videoJSProgress","videoJSCurrentTime","timeDivider","durationDisplay","customControlSpacer",pa?"muteToggle":"volumePanel",K.length>0&&L?"subsCapsButton":"",T||E?"videoJSTrackScrubber":"","qualitySelector",s?"playbackRateMenuButton":"",o?"pictureInPictureToggle":"",n?"videoJSFileDownload":"","fullscreenToggle"],videoJSProgress:{nextItemClicked:U},volumePanel:!pa&&{inline:!L},videoJSCurrentTime:{srcIndex:x,targets:J,currentTime:S||0},videoJSFileDownload:n&&{title:"Download Files",controlText:"Alternate resource download",files:B},videoJSPreviousButton:j&&{canvasIndex:_,switchPlayer:V},videoJSNextButton:j&&{canvasIndex:_,lastCanvasIndex:P,switchPlayer:V},videoJSTrackScrubber:(T||E)&&{trackScrubberRef:C,timeToolRef:I,isPlaylist:E}},sources:N?[W[x]]:W,errorDisplay:{uncloseable:!((null==W?void 0:W.length)>1||j)}})},[L,q,x]);return F&&null!=X||O?c.default.createElement("div",{"data-testid":"media-player",className:"ramp--media_player",role:"complementary","aria-label":"media player"},c.default.createElement(Ii,{enableFileDownload:n,enableTitleLink:f,isVideo:L,options:X,placeholderText:H,scrubberTooltipRef:I,tracks:K,trackScrubberRef:C,videoJSLangMap:M.current,withCredentials:m})):null};_i.propTypes={enableFileDownload:Ln.bool,enablePIP:Ln.bool,enablePlaybackRate:Ln.bool,enableTitleLink:Ln.bool,withCredentials:Ln.bool,language:Ln.string};var ji=y(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Pi=g(ji),Ai=function(e){var t=e.numberOfSections,r=La(),n=r.collapseExpandAll,a=r.isCollapsed,i=function(){n()};return c.default.createElement("button",{className:"ramp--structured-nav__collapse-all-btn","data-testid":"collapse-expand-all-btn",onClick:i,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),i()),a&&39===e.keyCode&&i(),a||37!==e.keyCode||i()},role:"button"},a?"Expand":"Close",t>1?" ".concat(t," Sections"):" Section",c.default.createElement("i",{className:"arrow ".concat(a?"down":"up")}))},Di=function(t){var r=t.canvasDuration,n=t.canvasIndex,a=t.duration,i=t.id,o=t.isTitle,l=t.isCanvas,s=t.isClickable,u=t.isEmpty,d=t.label,f=t.summary,p=t.homepage,v=t.isRoot,h=t.items,g=t.itemIndex,y=t.rangeId,b=t.sectionCount,x=t.sectionRef,k=t.structureContainerRef,w=t.times,E=t.setFocusedItem,S=e.useRef(null),C=La(),I=C.isCollapsed,M=C.updateSectionStatus,R=e.useState(!v),O=T(R,2),_=O[0],j=O[1],P=Na({itemId:i,itemIndex:g,liRef:B?x:S,sectionRef:x,structureContainerRef:k,isCanvas:l,isEmpty:u,canvasDuration:r,setSectionIsCollapsed:j,times:w}),A=P.currentNavItem,D=P.handleClick,N=P.isActiveLi,L=P.isActiveSection,q=P.isPlaylist,F=P.screenReaderTime,B=e.useMemo(function(){return l&&!q},[l,q]),U=e.useMemo(function(){return(null==h?void 0:h.length)>0},[h]);e.useEffect(function(){!S.current||(null==A?void 0:A.id)!=i||null==S.current.isClicked||S.current.isClicked||null==k.current.isScrolling||k.current.isScrolling||o||or(S.current,k),S.current&&(S.current.isClicked=!1)},[A]),e.useEffect(function(){v||I==_||j(I)},[I]),e.useEffect(function(){n+1===g&&x.current&&null!=x.current.isClicked&&!x.current.isClicked&&null!=k.current.isScrolling&&!k.current.isScrolling&&B&&or(x.current,k),x.current&&(x.current.isClicked=!1)},[n,B]),e.useEffect(function(){L&&B&&or(x.current,k)},[L]);var V=e.useMemo(function(){return q?u?"Restricted playlist item ".concat(g).concat(d," starts a ").concat(zt/1e3," \n          second timer to auto-advance to next playlist item"):"Playlist item ".concat(g).concat(d," ").concat(a," starting at ").concat(F):B?null!=i?"Load media for Canvas ".concat(g,",").concat(d,",").concat(a):v?"Table of contents for ".concat(d,",").concat(a):"Section for Canvas ".concat(g).concat(d,",").concat(a):"Structure item with label ".concat(g).concat(d," ").concat(a," starting at ").concat(F," in Canvas ").concat(n)},[F,q,B]),H=function(){j(!_),M(g-1,!_)},G=function(e){D(e),L&&H()},z=function(e){if(void 0!==i&&(13!==e.keyCode&&32!==e.keyCode||(D(e),_&&H()),39==e.keyCode&&_&&H(),37!==e.keyCode||_||(H(),E(e.target)),39===e.keyCode&&!_&&S.current)){var t=S.current.querySelectorAll("a.ramp--structured-nav__item-link");(null==t?void 0:t.length)>0&&(t[0].focus(),E(t[0])),e.stopPropagation()}},W=function(e){39===e.keyCode&&e.stopPropagation(),37===e.keyCode&&x.current&&(x.current.focus(),E(x.current)),32===e.keyCode&&D(e)};if(""!=d)return c.default.createElement("li",{"data-testid":"tree-item",ref:S,role:"treeitem",className:m.default("ramp--structured-nav__tree-item",B?"section-tree-item":"",N?"active":""),"data-label":d,"data-summary":f,"aria-expanded":(null==h?void 0:h.length)>0?"true":void 0,"aria-posinset":q?g:null},c.default.createElement(e.Fragment,{key:y},B?c.default.createElement("div",{className:m.default("ramp--structured-nav__section","ramp--structured-nav__section-head-buttons",L?"active":""),"data-testid":"treeitem-section","data-mediafrag":null!=i?i:"",tabIndex:-1},c.default.createElement("button",{"data-testid":null==i?"treeitem-section-span":"treeitem-section-button",ref:x,onClick:null!=i?G:null,onKeyDown:null!=i?z:null,"aria-label":V,role:"button",className:m.default("ramp--structured-nav__section-title",null==i&&"not-clickable",L?"active":""),tabIndex:-1},c.default.createElement("span",{className:"ramp--structured-nav__title","aria-label":d},v?"":"".concat(g,"."),c.default.createElement("span",{className:"ramp--structured-nav__section-label"},d),""!=a&&c.default.createElement("span",{className:"ramp--structured-nav__section-duration"},a))),U&&!v&&c.default.createElement("span",{className:"collapse-expand-button",tabIndex:-1,role:"button","aria-expanded":_?"false":"true","aria-label":"".concat(_?"Expand":"Collapse"," ").concat(d," section"),"data-testid":"section-collapse-icon",onClick:H},c.default.createElement("i",{className:m.default("arrow",_?"down":"up")}))):c.default.createElement(c.default.Fragment,null,o?c.default.createElement("span",{className:"ramp--structured-nav__item-title"},d):c.default.createElement(e.Fragment,{key:i},c.default.createElement("div",{className:"tracker"}),s?c.default.createElement("a",{role:"button",className:"ramp--structured-nav__item-link",href:p&&""!=p?p:i,"aria-label":V,onClick:D,onKeyDown:W,tabIndex:-1},u&&c.default.createElement(Ia,null),"".concat(g,"."),c.default.createElement("span",{className:"structured-nav__item-label","aria-label":d},d," ",a.length>0?" (".concat(a,")"):"")):c.default.createElement("span",{"aria-label":d},d)))),(!_&&U||o)&&c.default.createElement("ul",{className:"ramp--structured-nav__tree",role:"group","data-testid":"tree-group"},h.map(function(e,t){return c.default.createElement(Di,Pi({},e,{key:t,sectionCount:b,sectionRef:x,structureContainerRef:k,setFocusedItem:E}))})))};function Ni(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Li(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Li(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Di.propTypes={canvasDuration:Ln.number.isRequired,canvasIndex:Ln.number.isRequired,duration:Ln.string.isRequired,id:Ln.string,isTitle:Ln.bool.isRequired,isCanvas:Ln.bool.isRequired,isClickable:Ln.bool.isRequired,isEmpty:Ln.bool.isRequired,label:Ln.string.isRequired,summary:Ln.string,homepage:Ln.string,isRoot:Ln.bool.isRequired,items:Ln.array.isRequired,itemIndex:Ln.number,rangeId:Ln.string.isRequired,sectionCount:Ln.number.isRequired,sectionRef:Ln.object.isRequired,structureContainerRef:Ln.object.isRequired,times:Ln.object.isRequired,setFocusedItem:Ln.func};var qi=function(r){var n,a,o=r.showAllSectionsButton,l=void 0!==o&&o,s=r.sectionsHeading,u=void 0===s?"Sections":s,d=Tn(),f=Pn(),p=jn(),v=p.clickedUrl,h=p.isClicked,g=p.isPlaying,y=p.player,b=En(),x=b.allCanvases,k=b.canvasDuration,w=b.canvasIndex,E=b.hasMultiItems,T=b.targets,S=b.manifest,C=b.playlist,I=b.canvasIsEmpty,M=b.canvasSegments,R=i.useErrorBoundary().showBoundary,O=e.useRef(),_=e.useRef(),j=e.useRef(I),A=e.useRef(!1),D=e.useRef(),N=e.useRef(),L=e.useRef(!1),q=e.useRef(null),F=function(e){q.current=e},B=e.useRef(-1),U=function(e){B.current=e},V=e.useRef(null);e.useEffect(function(){if(S)try{var e=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[],i=0,o=!1,l=0,s=!1,u=0,c=function(e,t){var n=e.getBehavior();if(!yr.includes(n)){var d,f,p,m=ar(e.getLabel().getValue()),v=e.getCanvasIds(),h=i,g=i,y=t==e&&0==l,b=!1,x=!1,k=void 0,w=void 0,E=void 0;o?(p=y||r.length>1&&t==e.parentRange,r.length>1&&t==e.parentRange?l+=1:1==r.length&&(l=1)):p=t==e.parentRange&&null!=r[l-1],(null===(d=e.getRanges())||void 0===d?void 0:d.length)>0&&!y&&p&&(s=!0);var T=e.getDuration();if(null!=T&&!y){var S=T.start;h=T.end-S,p&&(g=h)}if(v.length>0&&(null==r?void 0:r.length)>0){var C=r.filter(function(e){return e.canvasId===kr(v[0])})[0];if(x=C.isEmpty,k=C.summary,w=C.homepage,b=!0,null!=C.range){var I=C.range,M=I.start,R=I.end;g=R-M,p&&(h=R-M)}}!p&&v.length>0&&u++,v.length>0&&(E=p?"".concat(v[0].split(",")[0],","):v[0]);var O=E?$t(E,g):{start:0,end:0},_=P({label:m,summary:k,isRoot:y,homepage:w,canvasDuration:g,id:E,times:O,isTitle:0===v.length,rangeId:e.id,isEmpty:x,isCanvas:p,itemIndex:p?l:u,canvasIndex:l,items:(null===(f=e.getRanges())||void 0===f?void 0:f.length)>0?e.getRanges().map(function(e){return c(e,t)}):[],duration:Wt(h),isClickable:b},"homepage",w);return v.length>0&&a.push(_),_}};try{var d=t.parseManifest(e).getAllRanges();if(0===(null==d?void 0:d.length))return{structures:[],timespans:[],markRoot:!1,hasCollapsibleStructure:s};var f=d[0],p=[],m=f.getBehavior();if(m&&yr.includes(m))return{structures:[],timespans:[],hasCollapsibleStructure:s};if(n||"top"===m){var v=f.getRanges();(null==v?void 0:v.length)>0&&v.map(function(e,t){var r=e.getBehavior();yr.includes(r)||(u=0,l=t+1,p.push(c(e,f)))})}else o=!0,i=r.reduce(function(e,t){return e+t.range.end},0),p.push(c(f,f,l));var h=o&&(null==r?void 0:r.length)>1;return{structures:p,timespans:a,markRoot:h,hasCollapsibleStructure:s}}catch(e){throw console.error("iiif-parser -> getStructureRanges() -> error parsing structures"),new Error(Vt)}}(S,x,C.isPlaylist),r=e.structures,n=e.timespans,a=e.markRoot,i=e.hasCollapsibleStructure;_.current=r,O.current=r,A.current=a,L.current=i&&l&&!C.isPlaylist,(null==r?void 0:r.length)>0&&r[0].isRoot&&(O.current=r[0].items),d({structures:O.current,type:"setStructures"}),d({timespans:n,type:"setCanvasSegments"}),D.current.isScrolling=!1}catch(e){R(e)}},[S]),e.useEffect(function(){I&&C.isPlaylist&&d({item:M[w],type:"switchItem"})},[I,w]),e.useEffect(function(){if(h){var e=M.filter(function(e){return e.id===v});if((null==e?void 0:e.length)>0){var t=e[0],r=t.isCanvas,n=t.items;(!r||0==n.length&&r)&&d({item:e[0],type:"switchItem"})}var a=x.findIndex(function(e){return e.canvasURL===kr(v)}),i=$t(v,k);if(!i||null==i)return void console.error("StructuredNavigation -> invalid media fragment in structure item -> ",i);var o=i.start;if(E){var l=function(e,t,r){var n,a;return e.map(function(i,o){var l=o>0?e[o].altStart:0;isNaN(u)&&(u=r);var s=i.start,u=i.end,c=l+s,d=l+u;t.start>=c&&t.start<d&&(n=o,a=t.start-l)}),{srcIndex:n,fragmentStart:a}}(T,i,k),s=l.srcIndex;o=l.fragmentStart,d({srcIndex:s,type:"setSrcIndex"})}else w!=a&&a>-1&&(d({canvasIndex:a,type:"switchCanvas"}),j.current=O.current[a].isEmpty);y&&!j.current?(y.currentTime(o),f({startTime:i.start,endTime:i.end,type:"setTimeFragment"}),y.structStart=o,f({currentTime:o,type:"setCurrentTime"}),g&&y.userActive(!0)):j.current&&f({type:"resetClick"})}},[h,y]),e.useEffect(function(){if(D.current){var e=D.current,t=D.current.parentElement,r=Math.abs(e.scrollHeight-(e.scrollTop+e.clientHeight))<=1;N.current=!r,t&&G.observe(t)}},[y]);var H=function(e){var t=e.target;t.classList.contains("ramp--structured-nav__border")&&(t=t.firstChild);var r=t.nextSibling,n=Math.abs(t.scrollHeight-(t.scrollTop+t.clientHeight))<=1;t&&n&&t.classList.contains("scrollable")?t.classList.remove("scrollable"):!t||n||t.classList.contains("scrollable")||t.classList.add("scrollable"),r&&n&&r.classList.contains("scrollable")?r.classList.remove("scrollable"):!r||n||r.classList.contains("scrollable")||r.classList.add("scrollable")},G=new ResizeObserver(function(e){var t,r=Ni(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;H(n)}}catch(e){r.e(e)}finally{r.f()}}),z=function(e){D.current.isScrolling=e};return S?c.default.createElement("div",{className:m.default("ramp--structured-nav",l&&!C.isPlaylist?" display":""),role:"complementary","aria-label":"structured navigation"},l&&!C.isPlaylist&&c.default.createElement("div",{className:"ramp--structured-nav__sections"},c.default.createElement("span",{className:m.default("ramp--structured-nav__sections-text",A.current&&"hidden")},u),L.current&&c.default.createElement(Ai,{numberOfSections:null===(n=_.current)||void 0===n?void 0:n.length})),c.default.createElement("div",{className:"ramp--structured-nav__border",tabIndex:-1},c.default.createElement("div",{"data-testid":"structured-nav",className:m.default("ramp--structured-nav__content",N.current&&"scrollable",(null==C?void 0:C.isPlaylist)&&"playlist-items",A.current&&"ramp--structured-nav__content-with_root"),ref:D,onScroll:H,onMouseLeave:function(){return z(!1)},onMouseOver:function(){return z(!0)},tabIndex:0,onKeyDown:function(e){var t=D.current.querySelectorAll("button.ramp--structured-nav__section-title, a.ramp--structured-nav__item-link");if((null==t?void 0:t.length)>0){if(q.current){var r=Array.prototype.indexOf.call(t,q.current);U(r),F(null)}var n=B.current;if("ArrowDown"===e.key)n=(B.current+1)%t.length,e.preventDefault();else if("ArrowUp"===e.key)n=(B.current-1+t.length)%t.length,e.preventDefault();else if("Tab"===e.key&&e.shiftKey)return void(D.current.parentElement.parentElement&&n<0?D.current.parentElement.parentElement.focus():(e.preventDefault(),D.current.parentElement.focus()));n>-1&&n<t.length&&(t[B.current]&&(t[B.current].tabIndex=-1),t[n].tabIndex=0,t[n].focus(),U(n))}}},(null===(a=_.current)||void 0===a?void 0:a.length)>0?c.default.createElement("ul",{className:"ramp--structured-nav__tree",role:"tree","data-testid":"nested-tree","aria-label":"nested structure tree content",ref:V},_.current.map(function(t,r){return c.default.createElement(Di,Pi({},t,{key:r,sectionCount:_.current.length,sectionRef:e.createRef(),structureContainerRef:D,setFocusedItem:F}))})):c.default.createElement("p",{className:"ramp--no-structure"},"There are no structures in the manifest"),c.default.createElement("div",{"aria-live":"assertive",className:"ramp--structured-nav__sr-only"})),c.default.createElement("span",{className:m.default(N.current&&"scrollable")},"Scroll to see more"))):c.default.createElement("p",null,"No manifest - Please provide a valid manifest.")};qi.propTypes={};var Fi=y(function(e){e.exports=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),Bi=g(y(function(e){e.exports=function(e,t){if(null==e)return{};var r,n,a=Fi(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a},e.exports.__esModule=!0,e.exports.default=e.exports})),Ui=function(e){var t=e.fileUrl,r=e.fileName,n=e.machineGenerated,a=e.fileExt;return c.default.createElement("button",{className:"ramp--transcript_menu_button ramp--transcript_downloader","data-testid":"transcript-downloader",onClick:function(e){e.preventDefault(),Xt(t,r,a,n)},href:"#","aria-label":"Transcript download button"},c.default.createElement(Ra,null))};Ui.propTypes={fileUrl:Ln.string,fileName:Ln.string,machineGenerated:Ln.bool,fileExt:Ln.string};var Vi=function(e){var t=e.selectTranscript,r=e.transcriptData,n=e.transcriptInfo,a=e.noTranscript,i=n.filename,o=n.id,l=n.tUrl,s=n.tFileExt,u=n.isMachineGen;return r?[c.default.createElement("div",{key:"transcript-selector","data-testid":"transcript-selector",className:"ramp--transcript_selector"},c.default.createElement("select",{"data-testid":"transcript-select-option",value:o||"",onChange:function(e){t(e.target.value)},"aria-label":"Select transcripts","aria-expanded":!1,"aria-haspopup":"true"},r.map(function(e,t){return c.default.createElement("option",{value:e.id,label:"".concat(e.title).concat(e.numberOfHits?" ("+e.numberOfHits+")":""),key:t},"".concat(e.title).concat(e.numberOfHits?" ("+e.numberOfHits+")":""))})),!a&&c.default.createElement(Ui,{key:"transcript-downloader",fileUrl:l,fileName:i,fileExt:s,machineGenerated:u}))]:null};Vi.propTypes={selectTranscript:Ln.func.isRequired,transcriptData:Ln.array.isRequired,transcriptInfo:Ln.shape({title:Ln.string,id:Ln.string,tUrl:Ln.string,tFileExt:Ln.string,isMachineGen:Ln.bool}).isRequired,noTranscript:Ln.bool.isRequired};var Hi=e.memo(Vi),Gi=function(t){var r=t.searchResults,n=t.searchQuery,a=void 0===n?null:n,i=t.focusedMatchIndex,o=t.setFocusedMatchIndex,l=t.setSearchQuery,s=e.useRef(null);e.useEffect(function(){s.current&&a&&(s.current.value=a)},[!!s.current]);var u=e.useMemo(function(){return ra(function(e){l(e.target.value)},100)},[]),d=null===a||""===a.replace(/\s/g,""),f=null;return d||(0===r.matchingIds.length?f=c.default.createElement("div",{className:"ramp--transcript_search_navigator"},c.default.createElement("span",{"data-testid":"transcript-search-count",className:"ramp--transcript_search_count"},"no results found in this transcript")):null!==i&&(f=c.default.createElement("div",{className:"ramp--transcript_search_navigator"},c.default.createElement("button",{type:"button","data-testid":"transcript-search-prev",className:"ramp--transcript_menu_button ramp--transcript_search_prev",disabled:0===i,title:"Previous Search Result",onClick:function(e){e.preventDefault(),e.stopPropagation(),i>0&&o(i-1)}},c.default.createElement(Ma,{flip:!0})),c.default.createElement("span",{className:"ramp--transcript_search_count","data-testid":"transcript-search-count"},i+1," of ",r.matchingIds.length," results"),c.default.createElement("button",{className:"ramp--transcript_menu_button ramp--transcript_search_next",type:"button","data-testid":"transcript-search-next",disabled:i>=r.matchingIds.length-1,title:"Next Search Result",onClick:function(e){e.preventDefault(),e.stopPropagation(),i<r.matchingIds.length-1&&o(i+1)}},c.default.createElement(Ma,null))))),c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"ramp--transcript_search_input"},c.default.createElement("input",{type:"text",ref:s,"data-testid":"transcript-search-input","aria-label":"Search the transcript",placeholder:"Search Transcript...",onChange:function(e){""==e.target.value.trim()?l(null):u(e)}}),!d&&c.default.createElement("button",{type:"button","aria-label":"Clear search query!","data-testid":"transcript-search-clear",className:"ramp--transcript_menu_button ramp--transcript_search_clear",onClick:function(){l(null),s.current&&(s.current.value=""),s.current.focus()}},c.default.createElement("span",null))),f)};Gi.propTypes={setSearchQuery:Ln.func.isRequired,focusedMatchIndex:Ln.number,setFocusedMatchIndex:Ln.func.isRequired,searchQuery:Ln.string,searchResults:Ln.any};var zi=["showSearch","setAutoScrollEnabled","autoScrollEnabled","searchQuery","setSearchQuery","searchResults","focusedMatchIndex","setFocusedMatchIndex"];function Wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Ki=function(e){var t=e.showSearch,r=e.setAutoScrollEnabled,n=e.autoScrollEnabled,a=e.searchQuery,i=void 0===a?null:a,o=e.setSearchQuery,l=e.searchResults,s=e.focusedMatchIndex,u=e.setFocusedMatchIndex,d=Bi(e,zi),f=d.transcriptInfo,p=f.tType,m=f.isMachineGen;return c.default.createElement("div",{className:"ramp--transcript_menu"},t&&c.default.createElement(Gi,{searchResults:l,searchQuery:i,setSearchQuery:o,focusedMatchIndex:s,setFocusedMatchIndex:u}),c.default.createElement(Hi,d),c.default.createElement("div",{className:"ramp--transcript_menu-info"},m&&c.default.createElement("p",{key:"machine-gen-msg",className:"ramp--transcript_machine_generated","data-testid":"transcript-machinegen-msg"},"Machine-generated transcript may contain errors."),p===Pr.timedText&&c.default.createElement("div",{className:"ramp--transcript_auto_scroll_check","data-testid":"transcript-auto-scroll-check"},c.default.createElement("input",{type:"checkbox",id:"auto-scroll-check",name:"autoscrollcheck","aria-checked":n,title:null!==i?"Auto-scroll is disabled when searching":"",checked:n,disabled:null!==i,onChange:function(){r(!n)}}),c.default.createElement("label",{htmlFor:"auto-scroll-check",title:null!==i?"Auto-scroll is disabled when searching":""},"Auto-scroll with media"))))};Ki.propTypes=Ji(Ji({showSearch:Ln.bool,autoScrollEnabled:Ln.bool.isRequired,setAutoScrollEnabled:Ln.func.isRequired},Hi.propTypes),Ki.propTypes);var Zi=g(y(function(e){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.__esModule=!0,e.exports.default=e.exports}));function Qi(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Xi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function Xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var $i,Yi=function(e,r,n,a,i){var o;if(!e||void 0===e)return[];var l=[],s=[];(null===(o=e.items)||void 0===o?void 0:o.length)>0&&e.items.map(function(e){var n,a=new t.Annotation(e);if("supplementing"==a.getMotivation()){var i=a.getTarget(),o=kr(i),l=a.getBody()[0].getProperty("value"),u=null===(n=ao(l,r))||void 0===n?void 0:n.length;s.push({target:i,targetURI:o,value:l,hitCount:u})}});for(var u,c=(u="targetURI",s.reduce(function(e,t){return(e[t[u]]=e[t[u]]||[]).push(t),e},{})),d=[].concat(M(Rr.webvtt),M(Rr.srt)),f=function(){var e=T(m[p],2),t=e[0],r=e[1],n=i.filter(function(e){return e.url==t})[0].format,a=r;d.includes(n)&&(a=r.filter(function(e){return e.target!=e.targetURI})),l.push({transcriptURL:t,numberOfHits:a.reduce(function(e,t){return e+t.hitCount},0)})},p=0,m=Object.entries(c);p<m.length;p++)f();var v=c[a.url];return a.isTimed&&null!=v&&(v=v.filter(function(e){return e.target!=e.targetURI})),{matchedTranscriptLines:eo(v,r,n),hitCounts:l,allSearchHits:c}},eo=function(e,t,r){var n=t.trim().toLocaleLowerCase(),a=[];if(void 0!==e){var i=[];return e.map(function(e){var o=e.target,l=e.value,s=e.hitCount,u=$t(o),c=l.replace(/<\/?[^>]+>/gi,""),d=0,f=0,p=void 0;if(null!=u){d=u.start,f=u.end,p=r.findIndex(function(e){return e.begin==d&&e.end==f});var m=n.match(/[a-zA-Z]+/gi)?n.match(/[a-zA-Z]+/gi)[0]:n;if(-1!==c.toLocaleLowerCase().indexOf(m)&&-1!=p){var v=ro(l,r[p].text,t);a.push({tag:Dr,begin:d,end:f,id:p,match:v,matchCount:s,text:r[p].text})}}else{var h=to(r,l,t,i);a=[].concat(M(a),M(h))}}),a}},to=function(e,t,r,n){var a=no(t),i=ao(t,r),o=0,l=[];if(1==(null==e?void 0:e.length)){var s=e[0],u=s.id,c=s.text,d=s.textDisplayed||c;if(no(d).includes(a))return n.push(u),[{tag:Nr,begin:void 0,end:void 0,id:u,match:ro(t,d,r),matchCount:i.length,text:d}]}for(var f=function(){var t=e[p],r=t.id,s=t.text,u=t.textDisplayed||s,c=u.length,d=a.indexOf(no(u),o);if(-1===d)return 1;var f=d+c,m=i.filter(function(e){return e.start<f&&e.end>d}).map(function(e){return{start:Math.max(0,e.start-d),end:Math.min(c,e.end-d),content:e.content}}),v=oo(u,m);n.push(r),l.push({tag:Nr,begin:void 0,end:void 0,id:r,match:v,matchCount:m.length,text:u}),o=f},p=n[n.length-1]+1||0;p<e.length;p++)f();return l},ro=function(e,t,r){var n=ao(e,r);return oo(t,n)},no=function(e){return e.replace(/<[^>]*>/g,"")},ao=function(e,t){for(var r,n=[],a=/<em>(.*?)<\/em>/g,i=t.replace(/[^\w']/g,"").toLowerCase(),o=[];null!==(r=a.exec(e));)o.push({content:r[1],index:r.index,fullMatch:r[0]});if(0===o.length)return n;for(var l=no(e),s=0,u=0,c=0,d=o;c<d.length;c++){var f=d[c],p=s+no(e.substring(u,f.index)).length,m=p+f.content.length;n.push({start:p,end:m,content:f.content}),s=m,u=f.index+f.fullMatch.length}if(n.length<=1)return n;for(var v=[],h=0;h<n.length;){for(var g=n[h],y=h+1;y<n.length&&n[y].start<=g.end+2&&g.content.replace(/[^\w']/g,"").toLowerCase()!=i;){var b=l.substring(g.end,n[y].start);g={start:g.start,end:n[y].end,content:g.content+b+n[y].content},y++}v.push(g),h=y}return v},io=function(e){if(e.nodeType===Node.TEXT_NODE)return e.nodeValue;if(e.nodeType===Node.ELEMENT_NODE){for(var t="",r=e.firstChild;r;r=r.nextSibling)t+=io(r);return t}return""},oo=function(e,t){if(0===t.length)return e;var r="undefined"!=typeof document?document.createElement("div"):null;return r.innerHTML=e,function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===r.length)return n;if(t.nodeType===Node.TEXT_NODE){var a=t.nodeValue,i=[],o=0,l=r.filter(function(e){return e.start<n+a.length&&e.end>n});if(0===l.length)return n+a.length;for(var s=0;s<l.length;s++){var u=l[s],c=Math.max(0,u.start-n),d=Math.min(a.length,u.end-n);o<c&&i.push(document.createTextNode(a.slice(o,c)));var f=document.createElement("span");f.className="ramp--transcript_highlight",f.textContent=a.slice(c,d),i.push(f),o=d}o<a.length&&i.push(document.createTextNode(a.slice(o)));var p,m=Qi(i.reverse());try{for(m.s();!(p=m.n()).done;){var v=p.value;t.after(v)}}catch(e){m.e(e)}finally{m.f()}return t.remove(),n+a.length}if(t.nodeType===Node.ELEMENT_NODE){var h,g=io(t),y=Qi(r);try{for(y.s();!(h=y.n()).done;){if(g===h.value.content){var b=document.createElement("span");for(b.className="ramp--transcript_highlight";t.firstChild;)b.appendChild(t.firstChild);return t.appendChild(b),n+g.length}}}catch(e){y.e(e)}finally{y.f()}for(var x=t.firstChild,k=n;x;){var w=x.nextSibling;k=e(x,r,k),x=w}return k}return n}(r,t),r.innerHTML};function lo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var uo={initialSearchQuery:null,showMarkers:!0,matcherFactory:function(e){var t=e.map(function(e){return e.text.toLocaleLowerCase()});return function(r,n){var a=new RegExp(String.raw($i||($i=Zi(["",""])),r),"i"),i=r.trim().toLocaleLowerCase(),o=t.reduce(function(t,r,n){var o=r.search(a);if(-1!==o){var l=e[n],s=[l.text.slice(0,o),l.text.slice(o,o+i.length),l.text.slice(o+i.length)],u=s[1],c=s[2],d="".concat(s[0],'<span class="ramp--transcript_highlight">').concat(u,"</span>").concat(c);return[].concat(M(t),[so(so({},l),{},{score:n,match:d,matchCount:1})])}return t},[]);return{matchedTranscriptLines:o,hitCounts:[],allSearchHits:null}}},sorter:function(e){return e.sort(function(e,t){return e.id-t.id})},matchesOnly:!1};function co(t){var r=t.query,n=t.sorter,a=void 0===n?uo.sorter:n,i=t.enabled,o=void 0===i||i,l=t.transcripts,s=t.canvasIndex,u=t.selectedTranscript,c=t.canvasTranscripts,d=t.showMarkers,f=void 0===d?uo.showMarkers:d,p=t.matchesOnly,m=void 0===p?uo.matchesOnly:p,v=t.matcherFactory,h=void 0===v?uo.matcherFactory:v,g=e.useState({results:{},ids:[],matchingIds:[],counts:[]}),y=T(g,2),b=y[0],x=y[1],k=e.useState(),w=T(k,2),E=w[0],S=w[1],C=e.useState(null),I=T(C,2),R=I[0],O=I[1],_=e.useState([]),j=T(_,2),D=j[0],N=j[1],L=e.useRef(null),q=e.useRef(0),F=e.useMemo(function(){var e=(l||[]).map(function(e,t){return"string"==typeof e?{text:e,id:t}:so({id:t},e)}),t=e.reduce(function(e,t){return so(so({},e),{},P({},t.id,t))},{}),r=h(e);return null!=E&&null!=E&&(r=function(e,t,r,n){return function(){var a=A(G.mark(function a(i,o){var l,s,u,c,d,f;return G.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(s=new Headers).append("pragma","no-cache"),s.append("cache-control","no-cache"),a.next=1,fetch("".concat(e,"?q=").concat(i),{signal:o.signal,headers:s});case 1:return u=a.sent,a.next=2,u.json();case 2:if(c=a.sent,!((null===(l=c.items)||void 0===l?void 0:l.length)>0)){a.next=3;break}return d=Yi(c,i,t,r,n),a.abrupt("return",d);case 3:return a.abrupt("return",{matchedTranscriptLines:[],hitCounts:[],allSearchHits:null});case 4:return a.prev=4,"AbortError"!==(f=a.catch(0)).name&&console.error(f),a.abrupt("return",{matchedTranscriptLines:[],hitCounts:[],allSearchHits:null});case 5:case"end":return a.stop()}},a,null,[[0,4]])}));return function(e,t){return a.apply(this,arguments)}}()}(E,e,u,c)),{matcher:r,itemsWithIds:e,itemsIndexed:t}},[l,h,null==u?void 0:u.url]),B=F.matcher,U=F.itemsWithIds,V=F.itemsIndexed,H=e.useContext(Mn),z=e.useContext(gn);e.useEffect(function(){if(z&&s>=0){var e=z.manifest,t=z.allCanvases,r=null;null!=t&&t.length?r=t[s].searchService:e&&(r=Cr(e)),S(r)}O(null)},[s]),e.useEffect(function(){L.current&&L.current.abort(),r&&W()},[r]),e.useEffect(function(){if(!U.length)return H&&H({type:"setSearchMarkers",payload:[]}),void x(so(so({},b),{},{results:{},matchingIds:[],ids:[]}));if(!o||!r){H&&H({type:"setSearchMarkers",payload:[]});var e=a(M(U)).map(function(e){return e.id});return x(so(so({},b),{},{results:V,matchingIds:[],ids:e})),void(r||O(null))}var t=D.length>0&&D.filter(function(e){return e.url==u.url}).length>0;if(null!=R&&t){var n=D.filter(function(e){return e.url==u.url})[0];J(n.markedSearchHits,null==b?void 0:b.counts,R)}else W()},[B,r,o,a,m,f,H,u]);var W=function(){q.current||clearTimeout(q.current);var e=new AbortController;L.current=e,q.current=setTimeout(function(){Promise.resolve(B(r,L.current)).then(function(t){var r=t.matchedTranscriptLines,n=t.hitCounts,a=t.allSearchHits;e.signal.aborted||J(r,n,a)}).catch(function(e){console.error("Search failed: ",r)})})},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];O(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null),N({url:u.url,markedSearchHits:e});var n={results:U,matchingIds:[],ids:a(M(U)).map(function(e){return e.id}),counts:(null==t?void 0:t.length)>0?t:[]};if(void 0!==e){var i=e.reduce(function(e,t){return so(so({},e),{},P({},t.id,t))},{}),o=a(M(e),!0),l=[];if(o.map(function(e){if(null!=e.matchCount)for(var t=0;t<e.matchCount;)l.push(e.id),t++}),m)x(so(so({},n),{},{results:i,ids:l,matchingIds:l}));else{var s=so(so({},V),i),c=a(Object.values(s),!1).map(function(e){return e.id});if(n=so(so({},n),{},{results:s,ids:c,matchingIds:l}),x(n),H)if(f){var d=[];(n.matchingIds.length<25||(null==r?void 0:r.length)>=4&&n.matchingIds.length<45)&&(d=n.matchingIds.map(function(e){return{time:n.results[e].begin,text:"",class:"ramp--track-marker--search"}})),H({type:"setSearchMarkers",payload:d})}else H({type:"setSearchMarkers",payload:[]})}}else x(so({},n))};return b}var fo=["initialSearchQuery"];function po(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?po(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):po(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var vo=e.memo(function(t){var r=t.item,n=t.goToItem,a=t.isActive,i=t.isFirstItem,o=t.focusedMatchId,l=t.setFocusedMatchId,s=t.autoScrollEnabled,u=t.showMoreSettings,d=t.showNotes,f=t.transcriptContainerRef,p=t.focusedMatchIndex,v=e.useRef(null),h=r.id===o,g=e.useRef(h),y=e.useRef(a),b=e.useRef(-1),x=e.useRef(-1),k=e.useRef(0),w=e.useRef(null),E=e.useRef(null),T=u.textLineLimit,S=u.enableShowMore&&r.tag===Dr&&null==r.match,C=e.useRef(!0),I=function(e){return C.current=e};e.useEffect(function(){var e=!1,t=x.current;a&&!y.current?s&&(y.current=!0,e=!0):y.current=!1,h&&!g.current?(g.current=!0,e=!0):g.current=!1,e&&v.current&&or(v.current,f,!0),k.current=t<o||t<0||!t?-1:r.matchCount,x.current=o},[s,a,h,v.current]),e.useEffect(function(){if(v.current&&h){var e=v.current.querySelectorAll(".ramp--transcript_highlight");e.forEach(function(e){return e.classList.remove("current-hit")});var t=b.current;if(k.current=p>t?k.current+1:k.current<=0?0:k.current-1,k.current>-1){var r=e[k.current];null!=r&&(r.classList.add("current-hit"),or(r,f,!0))}b.current=p}},[p]);var M=function(e){if(e.preventDefault(),e.stopPropagation(),"A"==e.target.tagName){var t=e.target.getAttribute("href");if(null!=t&&t.match(/https?:\/\/[^\s/$.?#].[^\s]*/gi))return void window.open(t,"_self");e.preventDefault()}r.match&&o!==r.id?l(r.id):null!==o&&r.tag===Dr&&or(v.current,f,!0),n(r)},R=e.useMemo(function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.textDisplayed:e.text;return e.match&&(t=e.match),e.speaker?"<u>".concat(e.speaker,":</u> ").concat(t):t}(r,r.tag===Nr)},[r]),O=Fa({autoScrollEnabled:s,enableShowMore:S,MAX_LINES:T,refs:{annotationRef:v,annotationTagsRef:null,annotationTextsRef:w,annotationTimesRef:E,containerRef:f},setIsShowMoreRef:I,setIsActive:l,texts:R}),_=O.handleKeyDown,j=O.handleLinkClicks,P=O.handleLinkKeyDown,A=O.handleShowMoreLessClick,D=O.handleShowMoreLessKeydown,N=O.hasLongerText,L=O.textToShow,q=e.useMemo(function(){return c.default.createElement("div",{key:"cue_".concat(r.id),className:"ramp--transcript_cue-texts",ref:w},(null==L?void 0:L.length)>0&&c.default.createElement("p",{key:"cue-text_".concat(r.id),"data-testid":"transcript_timed_text",className:"ramp--transcript_text",onClick:j,onKeyDown:P,dangerouslySetInnerHTML:{__html:L}}),N&&S&&c.default.createElement("button",{key:"cue-show-more_".concat(r.id),role:"button","aria-label":C.current?"show more":"show less","aria-pressed":C.current?"false":"true",className:"ramp--transcript__show-more-less","data-testid":"transcript-cue-show-more-".concat(r.id),onClick:function(){return A(C.current,I)},onKeyDown:function(e){return D(e,C.current,I)}},C.current?"Show more":"Show less"))},[S,L,N,d]),F=e.useMemo(function(){switch(r.tag){case Ar:return"transcript_note";case Lr:return"transcript_metadata";case Dr:return"transcript_item";case Nr:return"transcript_untimed_text";default:return null}},[r.tag,d]);return r.tag?c.default.createElement("span",{ref:v,className:m.default("ramp--transcript_item",a&&"active",h&&"focused",r.tag===Nr&&"untimed",r.tag===Lr&&"metadata-block"),"data-testid":F,tabIndex:i&&null==r.begin?0:-1,onClick:null==r.begin?M:null,"aria-label":null==r.begin&&Jt(R)},r.tag===Dr&&"number"==typeof r.begin&&c.default.createElement("span",{className:"ramp--transcript_time","data-testid":"transcript_time",role:"button",ref:E,onClick:M,onKeyDown:function(e){return _(e,M)},tabIndex:i?0:-1,"aria-label":"".concat(Wt(r.begin,!0),", ").concat(Jt(R))},"[",Wt(r.begin,!0),"]"),q):null}),ho=e.memo(function(t){var r=t.seekPlayer,n=t.currentTime,a=t.searchResults,i=t.focusedMatchId,o=t.transcriptInfo,l=t.setFocusedMatchId,s=t.autoScrollEnabled,u=t.showMoreSettings,d=t.showNotes,f=t.transcriptContainerRef,p=t.focusedMatchIndex,m=e.useState(null),v=T(m,2),h=v[0],g=v[1],y=e.useCallback(function(e){"number"==typeof e.begin?(r(e.begin),g(null)):g(e.id)},[r]),b=Object.keys(Pr).find(function(e){return Pr[e]===o.tType}),x=e.useRef(null),k=e.useMemo(function(){if(null!=a&&a.results&&Object.values(a.results).length>0){var e=Object.values(a.results).find(function(e){return e.tag!=Lr&&e.tag!=Ar});if(e)return e.id}return null},[a]),w=e.useRef(0);return o.tError?c.default.createElement("p",{key:"no-transcript",id:"no-transcript","data-testid":"no-transcript",role:"listitem"},o.tError):a.results&&0!==a.results.length?c.default.createElement("div",{"data-testid":"transcript_".concat(b),onKeyDown:function(e){var t,r=x.current.querySelectorAll(".ramp--transcript_time"),n=Array.from(x.current.children).filter(function(e){var t;return(null===(t=e.textContent)||void 0===t?void 0:t.length)>0}),a=(null==r?void 0:r.length)||(null==n?void 0:n.length)||0;if(a>0){var i=w.current;"ArrowDown"===e.key?(i=(w.current+1)%a,e.preventDefault()):"ArrowUp"===e.key&&(i=(w.current-1+a)%a,e.preventDefault()),i!==w.current&&((null==r?void 0:r.length)>0?(r[w.current].tabIndex=-1,r[i].tabIndex=0,r[i].focus(),or(r[i],f)):(null==n?void 0:n.length)>0&&(n[w.current].tabIndex=-1,n[i].tabIndex=0,n[i].focus(),or(n[i],f,!0)),t=i,w.current=t)}},ref:x,"aria-label":"Scrollable transcript cues"},a.ids.map(function(e){return c.default.createElement(vo,{key:e,goToItem:y,focusedMatchId:i,isActive:h===e||"number"==typeof a.results[e].begin&&a.results[e].tag!==Ar&&a.results[e].tag!==Lr&&a.results[e].begin<=n&&n<=a.results[e].end,item:a.results[e],isFirstItem:k===e,autoScrollEnabled:s,setFocusedMatchId:l,showNotes:d,showMoreSettings:u,transcriptContainerRef:f,focusedMatchIndex:p})})):c.default.createElement(qn,null)}),go=function(t){var r=t.playerID,n=t.manifestUrl,a=t.showMetadata,i=void 0!==a&&a,o=t.showNotes,l=void 0!==o&&o,s=t.showMoreSettings,u=void 0===s?{}:s,d=t.search,f=void 0===d?{}:d,p=t.transcripts,v=void 0===p?[]:p,h=e.useState(-1),g=T(h,2),y=g[0],b=g[1],x=e.useMemo(function(){return na(b,50)},[]);u=mo(mo({},{enableShowMore:!1,textLineLimit:6}),u);var k,w,E=qa({manifestUrl:n,playerID:r,setCurrentTime:x,showMetadata:i,showNotes:l,transcripts:v}),S=E.canvasIndexRef,C=E.canvasTranscripts,I=E.isEmpty,M=E.isLoading,R=E.NO_SUPPORT_MSG,O=E.playerRef,_=E.selectedTranscript,j=E.selectTranscript,P=E.transcript,A=E.transcriptInfo,D=(k=mo(mo({},f),{},{isSearchable:A.tType===Pr.timedText||A.tType===Pr.docx||A.tType===Pr.plainText,showMarkers:A.tType===Pr.timedText}))&&k.isSearchable?so(so(so({},uo),k),{},{enabled:!0}):so(so({},uo),{},{enabled:!1}),N=D.initialSearchQuery,L=Bi(D,fo),q=e.useState(N),F=T(q,2),B=F[0],U=F[1],V=co(mo(mo({},L),{},{query:B,transcripts:P,canvasIndex:S.current,selectedTranscript:_,canvasTranscripts:C})),H=function(t){var r=t.searchResults,n=e.useState(null),a=T(n,2),i=a[0],o=a[1],l=null===i?null:r.matchingIds[i],s=e.useCallback(function(e){var t=r.matchingIds.indexOf(e);o(-1!==t?t:null)},[r.matchingIds]);return e.useEffect(function(){r.matchingIds.length||null===i?r.matchingIds.length&&null===i?o(0):null!==i&&i>=r.matchingIds.length&&o(r.matchingIds.length-1):o(null)},[r.matchingIds,i]),e.useEffect(function(){r.matchingIds.length&&i>0&&o(null)},[r.matchingIds]),{focusedMatchId:l,setFocusedMatchId:s,focusedMatchIndex:i,setFocusedMatchIndex:o}}({searchResults:V}),G=H.focusedMatchId,z=H.setFocusedMatchId,W=H.focusedMatchIndex,J=H.setFocusedMatchIndex,K=function(e){var t=e.searchResults,r=e.canvasTranscripts,n=e.searchQuery;if(null==t||!t.counts||0===(null==r?void 0:r.length)||null===n)return r;var a=t.counts,i=[];return r.map(function(e){var t,r=(null===(t=a.find(function(t){return t.transcriptURL===e.url}))||void 0===t?void 0:t.numberOfHits)||0;i.push(so(so({},e),{},{numberOfHits:r}))}),i}({searchResults:V,canvasTranscripts:C,searchQuery:B}),Z=e.useState(!0),Q=T(Z,2),X=Q[0],$=Q[1],Y=e.useRef(X),ee=e.useRef(),te=e.useCallback(function(e){x(e),O.current&&O.current.currentTime(e)},[]);return M?c.default.createElement(qn,null):c.default.createElement("div",{className:"ramp--transcript_nav","data-testid":"transcript_nav",key:A.title,role:"complementary","aria-label":"transcript display"},!I&&c.default.createElement(Ki,{showSearch:L.enabled,selectTranscript:j,transcriptData:K,transcriptInfo:A,noTranscript:(null===(w=A.tError)||void 0===w?void 0:w.length)>0&&A.tError!=R,setAutoScrollEnabled:function(e){Y.current=e,$(e)},setFocusedMatchIndex:J,focusedMatchIndex:W,autoScrollEnabled:Y.current,searchResults:V,searchQuery:B,setSearchQuery:U}),c.default.createElement("div",{className:m.default("transcript_content",P?"":"static"),"data-testid":"transcript_content_".concat(A.tType),"aria-label":"Attached Transcript content",ref:ee,tabIndex:-1},c.default.createElement(ho,{currentTime:y,seekPlayer:te,searchResults:V,focusedMatchId:G,transcriptInfo:A,setFocusedMatchId:z,autoScrollEnabled:Y.current&&null===B,showMoreSettings:u,showNotes:l,transcriptContainerRef:ee,focusedMatchIndex:W})))};go.propTypes={playerID:Ln.string.isRequired,manifestUrl:Ln.string,showSearch:Ln.bool,showMetadata:Ln.bool,showNotes:Ln.bool,showMoreSettings:Ln.shape({enableShowMore:Ln.bool,textLineLimit:Ln.number}),search:Ln.oneOf([Ln.bool,Ln.shape({initialSearchQuery:Ln.string,showMarkers:Ln.bool,matcherFactory:Ln.func,sorter:Ln.func,matchesOnly:Ln.bool})]),transcripts:Ln.arrayOf(Ln.shape({canvasId:Ln.number.isRequired,items:Ln.arrayOf(Ln.shape({title:Ln.string,url:Ln.string}))}))};var yo=function(t){var r=t.displayOnlyCanvasMetadata,n=void 0!==r&&r,a=t.displayAllMetadata,i=void 0!==a&&a,o=t.displayTitle,l=void 0===o||o,s=t.showHeading,u=void 0===s||s,d=t.itemHeading,f=void 0===d?"Item Details":d,p=t.sectionHeaading,m=void 0===p?"Section Details":p,v=En(),h=v.manifest,g=v.canvasIndex,y=e.useState(),b=T(y,2),x=b[0],k=b[1],w=e.useState(),E=T(w,2);E[0];var S=E[1],C=e.useState(),I=T(C,2),M=I[0],R=I[1],O=e.useState(),_=T(O,2),j=_[0],P=_[1],A=e.useState(),D=T(A,2),N=D[0],L=D[1],q=e.useState(),F=T(q,2),B=F[0],U=F[1],V=e.useState(),H=T(V,2),G=H[0],z=H[1],W=e.useState(!1),J=T(W,2),K=J[0],Z=J[1],Q=e.useRef();e.useEffect(function(){if(h){var e,t=n||i;L(t);var r=!n||i;P(r);var a=function(e,t){var r=[],n={canvasMetadata:r,manifestMetadata:[],rights:[]},a=e.items;if(t&&a){for(var i in a){var o=parseInt(i),l=Sr(a[o],"Canvas");r.push({canvasindex:o,metadata:Tr(a[o].metadata,"Canvas"),rights:l})}n.canvasMetadata=r}var s=Tr(e.metadata,"Manifest");n.manifestMetadata=s;var u=Sr(e,"Manifest");return n.rights=u,n}(h,t);if(t&&(u=a.canvasMetadata,S(u),Q.current=u,X()),r){var o,s=a.manifestMetadata;l||(s=s.filter(function(e){return"title"!=e.label.toLowerCase()})),k(s),Z((null===(o=s)||void 0===o?void 0:o.length)>0)}(null===(e=a.rights)||void 0===e?void 0:e.length)>0&&U(a.rights)}var u},[h]),e.useEffect(function(){g>=0&&N&&X()},[g]);var X=function(){var e=Q.current.filter(function(e){return e.canvasindex===g})[0];if(null!=e){var t,r=e.metadata,n=e.rights;l||null==r||(r=r.filter(function(e){return"title"!=e.label.toLowerCase()})),R(r),Z((null===(t=r)||void 0===t?void 0:t.length)>0),null!=n&&(null==n?void 0:n.length)>0&&z(n)}},$=function(t){var r=[];return(null==t?void 0:t.length)>0&&t.map(function(t,n){r.push(c.default.createElement(e.Fragment,{key:n},c.default.createElement("dt",null,t.label),c.default.createElement("dd",{dangerouslySetInnerHTML:{__html:t.value}})))}),c.default.createElement("dl",null,r)},Y=e.useMemo(function(){if(j&&(null==x?void 0:x.length)>0)return c.default.createElement(c.default.Fragment,null,i&&c.default.createElement("span",null,f),$(x),(null==B?void 0:B.length)>0&&c.default.createElement("span",{className:"ramp--metadata-rights-heading","data-testid":"manifest-rights"},"Rights"),$(B))},[x]),ee=e.useMemo(function(){if(N&&(null==M?void 0:M.length)>0)return c.default.createElement(c.default.Fragment,null,i&&c.default.createElement("span",null,m),$(M),(null==G?void 0:G.length)>0&&c.default.createElement("span",{className:"ramp--metadata-rights-heading","data-testid":"canvas-rights"},"Rights"),$(G))},[M]);return c.default.createElement("div",{"data-testid":"metadata-display",className:"ramp--metadata-display",role:"complementary","aria-label":"metadata display"},u&&c.default.createElement("div",{className:"ramp--metadata-display-title","data-testid":"metadata-display-title"},c.default.createElement("h4",null,"Details")),K?c.default.createElement("div",{className:"ramp--metadata-display-content"},Y,ee):c.default.createElement("div",{"data-testid":"metadata-display-message",className:"ramp--metadata-display-message"},c.default.createElement("p",null,"No valid Metadata is in the Manifest/Canvas(es)")))};yo.propTypes={displayOnlyCanvasMetadata:Ln.bool,displayAllMetadata:Ln.bool,displayTitle:Ln.bool,showHeading:Ln.bool,itemHeading:Ln.string,sectionHeaading:Ln.string};var bo=function(e){var t=e.label,r=void 0===t?"Autoplay":t,n=e.showLabel,a=void 0===n||n,i=En().autoAdvance,o=Tn(),l=function(e){e.target.setAttribute("aria-checked",String(!i)),o({autoAdvance:!i,type:"setAutoAdvance"})};return c.default.createElement("div",{role:"switch",onClick:l,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l(e))},"aria-checked":String(i),tabIndex:0,"data-testid":"auto-advance",className:"ramp--auto-advance"},a&&c.default.createElement("span",{className:"ramp--auto-advance-label","data-testid":"auto-advance-label"},r),c.default.createElement("span",{className:"slider"},c.default.createElement("span",{"data-testid":"auto-advance-toggle"})))};bo.propTypes={label:Ln.string,showLabel:Ln.bool};var xo=function(t){var r,n=t.newMarkerEndpoint,a=t.canvasId,i=t.handleCreate,o=t.csrfToken,l=e.useState(!1),s=T(l,2),u=s[0],d=s[1],f=e.useState(!1),p=T(f,2),v=p[0],h=p[1],g=e.useState(!1),y=T(g,2),b=y[0],x=y[1],k=e.useState(""),w=T(k,2),E=w[0],S=w[1],C=e.useState(),I=T(C,2),M=I[0],R=I[1],O=Aa().getCurrentTime;e.useEffect(function(){return d(!1),function(){var e;null===(e=r)||void 0===e||e.abort()}},[a]);var _=e.useCallback(function(e){e.preventDefault();var t=e.target,l=new FormData(t),s=Object.fromEntries(l.entries()),u=s.label,c=s.time,f={type:"Annotation",motivation:"highlighting",body:{type:"TextualBody",format:"text/html",value:u},target:"".concat(a,"#t=").concat(Kt(c))},p={method:"POST",credentials:"same-origin",headers:{Accept:"application/json"},body:JSON.stringify(f)};void 0!==o&&(p.headers["X-CSRF-Token"]=o),r=new AbortController,fetch(n,p,{signal:r.signal}).then(function(e){if(201!=e.status)throw new Error;return e.json()}).then(function(e){var t=function(e){if(!e)return null;var t,r=e.target.split("#t="),n=T(r,2),a=n[0],i=n[1],o=e.body;return 0===Object.keys(o).length?null:"TextualBody"===(null==o?void 0:o.type)?{id:e.id,time:parseFloat(i),timeStr:Wt(parseFloat(i),!0,!0),canvasId:a,value:null!==(t=null==o?void 0:o.value)&&void 0!==t?t:""}:null}(e);t&&i(t),d(!1)}).catch(function(e){console.error("CreateMarker -> handleCreateMarker() -> failed to create annotation; ",e),x(!0),S("Marker creation failed.")})},[a]),j=e.useCallback(function(){d(!1),h(!1),S(""),x(!1)}),P=function(e){var t,r,n=null!==(t=null==e||null===(r=e.target)||void 0===r?void 0:r.value)&&void 0!==t?t:e;R(n);var a=ir(n);h(a)};return c.default.createElement("div",{className:"ramp-markers-display__new-marker","data-testid":"create-new-marker"},c.default.createElement("button",{type:"submit",onClick:function(){var e=Wt(O(),!0,!0);P(e),d(!0)},className:"ramp--markers-display__edit-button","data-testid":"create-new-marker-button"},"Add New Marker"),u&&c.default.createElement("form",{className:"ramp--markers-display__new-marker-form",method:"post",onSubmit:_,"data-testid":"create-new-marker-form"},c.default.createElement("table",{className:"create-marker-form-table"},c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement("label",{htmlFor:"new-marker-title"},"Title:"),c.default.createElement("input",{id:"new-marker-title","data-testid":"create-marker-title",type:"text",className:"ramp--markers-display__create-marker",name:"label"})),c.default.createElement("td",null,c.default.createElement("label",{htmlFor:"new-marker-time"},"Time:"),c.default.createElement("input",{id:"new-marker-time","data-testid":"create-marker-timestamp",type:"text",className:m.default("ramp--markers-display__create-marker",v?"time-valid":"time-invalid"),name:"time",value:M,onChange:P})),c.default.createElement("td",null,c.default.createElement("div",{className:"marker-actions"},b&&c.default.createElement("p",{className:"ramp--markers-display__error-message"},E),c.default.createElement("button",{type:"submit",className:"ramp--markers-display__edit-button","data-testid":"edit-save-button",disabled:!v},c.default.createElement(Ta,null)," Save"),c.default.createElement("button",{className:"ramp--markers-display__edit-button-danger","data-testid":"edit-cancel-button",onClick:j},c.default.createElement(Sa,null)," Cancel"))))))))};xo.propTypes={newMarkerEndpoint:Ln.string.isRequired,canvasId:Ln.string,handleCreate:Ln.func.isRequired,csrfToken:Ln.string};var ko=function(t){var r,n=t.marker,a=t.handleSubmit,i=t.handleDelete,o=t.toggleIsEditing,l=t.csrfToken,s=e.useState(!1),u=T(s,2),d=u[0],f=u[1],p=e.useState(!0),v=T(p,2),h=v[0],g=v[1],y=e.useState(),b=T(y,2),x=b[0],k=b[1],w=e.useState(!1),E=T(w,2),S=E[0],C=E[1],I=e.useState(!1),M=T(I,2),R=M[0],O=M[1],_=e.useState(""),j=T(_,2),P=j[0],A=j[1],D=function(){var t=e.useContext(gn).playlist,r=t.isEditing,n=t.hasAnnotationService;return{isDisabled:e.useMemo(function(){return r},[r]),hasAnnotationService:n}}(),N=D.hasAnnotationService,L=D.isDisabled,q=Aa().player;e.useEffect(function(){return function(){var e;null===(e=r)||void 0===e||e.abort()}},[]),e.useEffect(function(){B(n.value),H(n.timeStr)},[n]);var F=e.useRef(n.value),B=function(e){F.current=e},U=e.useRef(Kt(n.timeStr)),V=e.useRef(n.timeStr),H=function(e){V.current=e,U.current=Kt(e)},G=function(){O(!1),A("")},z=function(){C(!1),f(!1),o(!1)},W=e.useCallback(function(e){e.preventDefault();var t=parseFloat(e.target.dataset.offset);if(q){var r=q.targets[0],n=r.start,a=r.end;switch(!0){case t>=n&&t<=a:q.currentTime(t);break;case t<n:q.currentTime(n);break;case t>a:q.currentTime(a)}}},[q]);return d?c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement("input",{id:"marker-edit-label","data-testid":"edit-label",defaultValue:F.current,type:"text",className:"ramp--markers-display__edit-marker",onChange:function(e){return B(e.target.value)},name:"label"})),c.default.createElement("td",null,c.default.createElement("input",{className:m.default("ramp--markers-display__edit-marker",h?"time-valid":"time-invalid"),id:"marker-edit-time","data-testid":"edit-timestamp",defaultValue:V.current,type:"text",onChange:function(e){return function(e){var t=ir(e);g(t),H(e)}(e.target.value)},name:"time"})),c.default.createElement("td",null,c.default.createElement("div",{className:"marker-actions"},R&&c.default.createElement("p",{className:"ramp--markers-display__error-message"},P),c.default.createElement("button",{type:"submit",onClick:function(){var e={type:"Annotation",motivation:"highlighting",body:{type:"TextualBody",format:"text/html",value:F.current},id:n.id,target:"".concat(n.canvasId,"#t=").concat(Kt(V.current))},t={method:"PUT",credentials:"same-origin",headers:{Accept:"application/json"},body:JSON.stringify(e)};void 0!==l&&(t.headers["X-CSRF-Token"]=l),r=new AbortController,fetch(n.id,t,{signal:r.signal}).then(function(e){if(201!=e.status)throw new Error;a(F.current,V.current,n.id),G(),z()}).catch(function(e){console.error("MarkerRow -> handleEditSubmit -> failed to update annotation; ",e),O(!0),A("Marker update failed")})},disabled:!h,className:"ramp--markers-display__edit-button","data-testid":"edit-save-button"},c.default.createElement(Ta,null)," Save"),c.default.createElement("button",{className:"ramp--markers-display__edit-button-danger","data-testid":"edit-cancel-button",onClick:function(){H(x.time),B(x.label),k({}),G(),z()}},c.default.createElement(Sa,null)," Cancel")))):S?c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement("a",{href:"".concat(n.canvasId,"#t=").concat(U.current,","),onClick:function(e){return W(e)},"data-offset":U.current},F.current)),c.default.createElement("td",null,V.current),c.default.createElement("td",null,c.default.createElement("div",{className:"marker-actions"},c.default.createElement("p",null,"Are you sure?"),c.default.createElement("button",{type:"submit",className:"ramp--markers-display__edit-button-danger","data-testid":"delete-confirm-button",onClick:function(){var e={method:"DELETE",credentials:"same-origin",headers:{Accept:"application/json"}};void 0!==l&&(e.headers["X-CSRF-Token"]=l),r=new AbortController,fetch(n.id,e,{signal:r.signal}).then(function(e){if(200!=e.status)throw new Error;i(n.id),G(),z()}).catch(function(e){console.error("MarkerRow -> submitDelete() -> failed to delete annotation; ",e),z(),O(!0),A("Marker delete failed."),setTimeout(function(){G()},1500)})}},c.default.createElement(Ta,null)," Yes"),c.default.createElement("button",{className:"ramp--markers-display__edit-button","data-testid":"delete-cancel-button",onClick:z},c.default.createElement(Sa,null)," Cancel")))):c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement("a",{href:"".concat(n.canvasId,"#t=").concat(U.current,","),onClick:function(e){return W(e)},"data-offset":U.current},F.current)),c.default.createElement("td",null,V.current),N&&c.default.createElement("td",null,c.default.createElement("div",{className:"marker-actions"},R&&c.default.createElement("p",{className:"ramp--markers-display__error-message"},P),c.default.createElement("button",{onClick:function(){k({time:V.current,label:F.current}),f(!0),o(!0)},className:"ramp--markers-display__edit-button","data-testid":"edit-button",disabled:L},c.default.createElement(wa,null)," Edit"),c.default.createElement("button",{className:"ramp--markers-display__edit-button-danger","data-testid":"delete-button",disabled:L,onClick:function(){C(!0),o(!0)}},c.default.createElement(Ea,null)," Delete"))))};ko.propTypes={marker:Ln.object.isRequired,handleSubmit:Ln.func.isRequired,handleDelete:Ln.func.isRequired,toggleIsEditing:Ln.func.isRequired,csrfToken:Ln.string};var wo=function(t){var r=t.canvasAnnotationSets,n=void 0===r?[]:r,a=t.duration,i=void 0===a?0:a,o=t.setDisplayedAnnotationSets,l=t.setAutoScrollEnabled,s=t.autoScrollEnabled,u=e.useState([]),d=T(u,2),f=d[0],p=d[1],m=e.useState(!1),v=T(m,2),h=v[0],g=v[1],y=e.useState([]),b=T(y,2),x=b[0],k=b[1],w=e.useRef(null),E=e.useRef(null),S=e.useRef(null),C=e.useState(!1),I=T(C,2),R=I[0],O=I[1],_=e.useRef(!1),j=function(e){_.current=e,O(e)},P=function(){return j(!_.current)},D=e.useRef(0),N=function(e){return D.current=e};e.useEffect(function(){if(p([]),o([]),g(!1),j(!1),(null==n?void 0:n.length)>0){var e=n.sort(function(e,t){return e.label.localeCompare(t.label)});k(e),q(e[0])}else k([]);return document.addEventListener("click",H),function(){document.removeEventListener("click",H)}},[n]);var L=e.useCallback(function(e){return f.includes(e.label)},[f]),q=function(){var e=A(G.mark(function e(t){var r,n,a;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.items,L(t)){e.next=5;break}if(!t.url||t.items){e.next=4;break}if(null!=t&&t.linkedResource){e.next=2;break}return e.next=1,ln(t.url,i);case 1:n=e.sent,r=(null==n?void 0:n.length)>0?n[0].items:[],e.next=4;break;case 2:return e.next=3,pn(t);case 3:a=e.sent,r=a;case 4:B(t,r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),F=function(e){p(function(t){return t.filter(function(t){return t!==e.label})}),o(function(t){return t.filter(function(t){return t.label!=e.label})})},B=function(e,t){null!=t&&(e.items=t,p(function(t){return[].concat(M(t),[e.label])}),o(function(t){return[].concat(M(t),[e])}))},U=function(){var e=A(G.mark(function e(t){var r;return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g(r=!h),!r){e.next=2;break}return e.next=1,Promise.all(x.map(function(e){q(e)}));case 1:e.next=3;break;case 2:p([]),o([]);case 3:t.stopPropagation(),P();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=A(G.mark(function e(t){return G.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q(t),L(t)&&F(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),H=function(e){var t;null!=w&&null!==(t=w.current)&&void 0!==t&&t.contains(e.target)||!_.current||j(!1)},z=function(e){var t=S.current.children,r=D.current;switch(e.key){case"Enter":case" ":e.preventDefault();var n=x.filter(function(t){return e.target.id==t.label})[0];null!=n?V(n):U(e);break;case"ArrowDown":e.preventDefault(),r=(D.current+1)%t.length;break;case"ArrowUp":e.preventDefault(),r=(D.current-1+t.length)%t.length;break;case"Home":case"PageUp":e.preventDefault(),r=0;break;case"End":case"PageDown":e.preventDefault(),r=t.length-1;break;case"Escape":e.preventDefault(),P(),E.current.focus();break;case"Tab":P();break;default:W(e)}r!==D.current&&(t[r].focus(),t[r].scrollIntoView(),N(r))},W=function(e){var t=e.key,r=1===t.length&&t.match(/\S/);setTimeout(function(){if(r&&S.current){var e=S.current.children,n=e.length>1;for(var a in e){var i;if((!n||0!=a)&&(null===(i=e[a].textContent)||void 0===i?void 0:i.trim()[0].toLowerCase())===t){e[a].focus(),N(a);break}}}},0)};return(null==x?void 0:x.length)>0?c.default.createElement("div",{className:"ramp--annotations__select"},c.default.createElement("label",null,"Annotation sets: "),c.default.createElement("div",{className:"ramp--annotations__multi-select","data-testid":"annotation-multi-select",ref:w},c.default.createElement("span",{className:"ramp--annotations__multi-select-header",onClick:P,onKeyDown:function(e){switch(e.key){case"Enter":case" ":e.preventDefault(),P();break;case"ArrowDown":case"ArrowUp":_.current||j(!0);var t=document.querySelector(".annotations-dropdown-item");t&&(e.preventDefault(),t.focus(),N(0));break;case"Home":case"PageUp":case"End":case"PageDown":!function(){if(_.current&&S.current){var t=S.current.children;("Home"===e.key||"PageUp"===e.key)&&(null==t?void 0:t.length)>0&&(t[0].focus(),N(0)),("End"===e.key||"PageDown"===e.key)&&(null==t?void 0:t.length)>0&&(t[t.length-1].focus(),N(t.length-1))}}();break;case"Escape":e.preventDefault(),_.current&&P();break;default:if(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||e.key.length>1)return;_.current||j(!0),W(e)}},"aria-haspopup":!0,"aria-expanded":R,"aria-controls":"annotations-dropdown-menu",id:"dropdown-button",role:"button",tabIndex:0,ref:E},f.length>0?"".concat(f.length," of ").concat(x.length," sets selected"):"Select Annotation set(s)",c.default.createElement("span",{className:"annotations-dropdown-arrow ".concat(R?"open":"")},"â–¼")),R&&c.default.createElement("ul",{className:"annotations-dropdown-menu",role:"listbox","aria-labelledby":"dropdown-button","aria-multiselectable":!0,tabIndex:-1,ref:S},(null==x?void 0:x.length)>1&&c.default.createElement("li",{key:"select-all",className:"annotations-dropdown-item",role:"option",tabIndex:0,"aria-selected":h,onKeyDown:z,id:"select-all-annotation-sets"},c.default.createElement("label",null,c.default.createElement("input",{type:"checkbox","aria-checked":h,checked:h,onChange:U,tabIndex:0,role:"checkbox"}),"Show all Annotation sets")),x.map(function(e,t){return c.default.createElement("li",{key:"annotaion-set-".concat(t),className:"annotations-dropdown-item",role:"option",tabIndex:0,"aria-selected":L(e),onKeyDown:z,id:e.label},c.default.createElement("label",null,c.default.createElement("input",{type:"checkbox","aria-checked":L(e),checked:L(e),onChange:function(){return V(e)},tabIndex:0,role:"checkbox"}),e.label))})),c.default.createElement("div",{className:"ramp--annotations__scroll","data-testid":"annotations-scroll"},c.default.createElement("input",{type:"checkbox",id:"scroll-check",name:"scrollcheck","aria-checked":s,title:"Auto-scroll with media",checked:s,onChange:function(){l(!s)},onKeyDown:function(e){" "!=e.key&&"Enter"!=e.key||(e.preventDefault(),l(function(e){return!e}))}}),c.default.createElement("label",{htmlFor:"scroll-check",title:"Auto-scroll with media"},"Auto-scroll with media")))):null};wo.propTypes={canvasAnnotationSets:Ln.array.isRequired,duration:Ln.number.isRequired,setDisplayedAnnotationSets:Ln.func.isRequired,setAutoScrollEnabled:Ln.func.isRequired,autoScrollEnabled:Ln.bool.isRequired};var Eo=function(t){var r=t.annotation,n=t.autoScrollEnabled,a=t.containerRef,i=t.displayedAnnotations,o=t.displayMotivations,l=t.index,s=t.showMoreSettings,u=r.canvasId,d=r.motivation,f=r.time,p=r.value,v=s.enableShowMore,h=s.textLineLimit,g=e.useState(!1),y=T(g,2),b=y[0],x=y[1],k=Aa(),w=k.player,E=k.currentTime,S=function(t){var r=t.annotationId,n=t.canvasId,a=t.startTime,i=t.endTime,o=t.currentTime,l=t.displayedAnnotations,s=void 0===l?[]:l,u=e.useContext(gn),c=e.useContext(yn),d=u.allCanvases,f=u.canvasIndex,p=u.clickedAnnotation,m=e.useMemo(function(){return d[f].canvasId==n},[n,f]);return{checkCanvas:e.useCallback(function(e){if(!m){var t=d.filter(function(e){return e.canvasId===n});if((null==t?void 0:t.length)>0){var r=t[0];c({canvasIndex:r.canvasIndex,type:"switchCanvas"})}}c({clickedAnnotation:e,type:"setClickedAnnotation"})},[m]),inPlayerRange:e.useMemo(function(){var e,t=s.findIndex(function(e){var t;return(null===(t=e.time)||void 0===t?void 0:t.start)===a}),n=t<(null==s?void 0:s.length)&&t>-1?s[t+1]:void 0,l=null!=n?null===(e=n.time)||void 0===e?void 0:e.start:void 0,u=s.filter(function(e){var t;return(null===(t=e.time)||void 0===t?void 0:t.start)<=o});if(null!=p){if(p.id===r)return!0;(void 0===p.time.end&&p.time.start!=o||p.time.start>o||p.time.end<o)&&setTimeout(function(){c({clickedAnnotation:null,type:"setClickedAnnotation"})},0)}else if((null==u?void 0:u.length)>0){var d,f=u[u.length-1];return f.time.start===a&&void 0===i||(null===(d=f.time)||void 0===d?void 0:d.start)===a&&o<=i||null!=l&&o<l&&a<=o&&o<=i}},[o,s])}}({canvasId:u,annotationId:r.id,startTime:null==f?void 0:f.start,endTime:null==f?void 0:f.end,currentTime:E,displayedAnnotations:i}),C=S.checkCanvas,I=S.inPlayerRange,M=e.useRef(null),R=e.useRef(null),O=e.useRef(null),_=e.useRef(null),j=e.useRef(null),P=e.useRef(!0),A=function(e){return P.current=e},D=e.useMemo(function(){return p.filter(function(e){return e.purpose.includes("tagging")})},[p]),N=e.useMemo(function(){var e=p.filter(function(e){return an.some(function(t){return e.purpose.includes(t)})});return(null==e?void 0:e.length)>0?e.map(function(e){return e.value}).join("<br>"):""},[p]),L=e.useMemo(function(){return!((null==o?void 0:o.length)>0)||o.some(function(e){return d.includes(e)})},[r,o]),q=Fa({autoScrollEnabled:n,enableShowMore:v,inPlayerRange:I,MAX_LINES:h,refs:{annotationRef:M,annotationTagsRef:R,annotationTextsRef:_,annotationTimesRef:O,containerRef:a,moreTagsButtonRef:j},setIsShowMoreRef:A,setIsActive:x,tags:D,texts:N}),F=q.handleKeyDown,B=q.handleLinkClicks,U=q.handleLinkKeyDown,V=q.handleShowMoreLessClick,H=q.handleShowMoreLessKeydown,G=q.hasLongerTags,z=q.hasLongerText,W=q.setShowMoreTags,J=q.showMoreTags,K=q.textToShow,Z=q.toggleTagsView,Q=e.useCallback(function(e){var t;e.preventDefault(),C(r);var n=null==f?void 0:f.start;if(w&&(null==w||null===(t=w.targets)||void 0===t?void 0:t.length)>0){var a=w.targets[0],i=a.start,o=a.end;switch(!0){case n>=i&&n<=o:w.currentTime(n);break;case n<i:w.currentTime(i);break;case n>o:w.currentTime(o)}}},[r,w]),X=function(){var e=!J;Z(e),W(e),e&&or(M.current,a,!0)};return L?c.default.createElement("div",{key:"li_".concat(l),ref:M,"data-testid":"annotation-row",className:m.default("ramp--annotations__annotation-row",b&&"active"),"aria-label":Jt(K)},c.default.createElement("div",{key:"row_".concat(l),role:"button",tabIndex:0===l?0:-1,onClick:Q,onKeyDown:function(e){return F(e,Q)},"data-testid":"annotation-row-button",className:"ramp--annotations__annotation-row-time-tags"},c.default.createElement("div",{key:"times_".concat(l),className:"ramp--annotations__annotation-times",ref:O},null!=(null==f?void 0:f.start)&&c.default.createElement("span",{className:"ramp--annotations__annotation-start-time","data-testid":"annotation-start-time"},Wt(null==f?void 0:f.start,!0,!0)),null!=(null==f?void 0:f.end)&&c.default.createElement("span",{className:"ramp--annotations__annotation-end-time","data-testid":"annotation-end-time"}," - ".concat(Wt(null==f?void 0:f.end,!0,!0)))),c.default.createElement("div",{key:"tags_".concat(l),className:"ramp--annotations__annotation-tags","data-testid":"annotation-tags-".concat(l),ref:R},(null==D?void 0:D.length)>0&&D.map(function(e,t){return c.default.createElement("p",{key:"tag_".concat(t),className:"ramp--annotations__annotation-tag","data-testid":"annotation-tag-".concat(t),style:{backgroundColor:e.tagColor}},e.value)}),G&&c.default.createElement("button",{key:"show-more-tags_".concat(l),role:"button","aria-label":J?"Show hidden tags":"Hide overflowing tags","aria-pressed":J?"false":"true",className:"ramp--annotations__show-more-tags","data-testid":"show-more-annotation-tags-".concat(l),onClick:X,onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),X())},ref:j},c.default.createElement("i",{className:"arrow ".concat(J?"right":"left")})))),c.default.createElement("div",{key:"text_".concat(l),className:"ramp--annotations__annotation-texts",ref:_},(null==K?void 0:K.length)>0&&c.default.createElement("p",{key:"text_".concat(l),"data-testid":"annotation-text-".concat(l),className:"ramp--annotations__annotation-text",onClick:B,onKeyDown:U,dangerouslySetInnerHTML:{__html:K}}),z&&v&&c.default.createElement("button",{key:"show-more_".concat(l),role:"button","aria-label":P.current?"show more":"show less","aria-pressed":P.current?"false":"true",className:"ramp--annotations__show-more-less","data-testid":"annotation-show-more-".concat(l),onClick:function(){return V(P.current,A)},onKeyDown:function(e){return H(e,P.current,A)}},P.current?"Show more":"Show less"))):null};Eo.propTypes={annotation:Ln.object.isRequired,autoScrollEnabled:Ln.bool.isRequired,containerRef:Ln.object.isRequired,displayedAnnotations:Ln.array,displayMotivations:Ln.array.isRequired,index:Ln.number,showMoreSettings:Ln.object.isRequired};var To=function(t){var r=t.annotations,n=t.canvasIndex,a=t.duration,i=t.displayMotivations,o=t.showMoreSettings,l=e.useState([]),s=T(l,2),u=s[0],d=s[1],f=e.useState([]),p=T(f,2),m=p[0],v=p[1],h=e.useState(!0),g=T(h,2),y=g[0],b=g[1],x=e.useState(!0),k=T(x,2),w=k[0],E=k[1],S=e.useRef(null),C=e.useRef(null),I=e.useRef(0);e.useEffect(function(){if(E(!0),(null==r?void 0:r.length)>0){var e=r.filter(function(e){return e.canvasIndex===n})[0];e._;var t=e.annotationSets;(null==t?void 0:t.length)>0&&d(t.filter(function(e){return e.timed}))}},[r,n]);var M=e.useMemo(function(){return(null==m?void 0:m.length)>0?ur(m.map(function(e){return e.items}).flat()):[]},[m]),R=e.useMemo(function(){return(null==m?void 0:m.length)>0&&m.map(function(e){return e.linkedResource}).reduce(function(e,t){return e||t},!1)},[m]),O=e.useMemo(function(){var e,t;if((null==M?void 0:M.length)>0&&null!=M[0]){var r;null===(r=e)||void 0===r||r.abort(),E(!1);var n=M.map(function(e){return e.motivation});return(null==i?void 0:i.length)>0?i.some(function(e){return n.flat().includes(e)}):an.some(function(e){return n.flat().includes(e)})}return null===(t=e)||void 0===t||t.abort(),e=new AbortController,R&&function(e,t,r){if(null==r||!r.aborted){var n=setTimeout(function(){null!=r&&r.aborted||e()},t);null==r||r.addEventListener("abort",function(){clearTimeout(n)})}}(function(){E(!1)},500,e.signal),!1},[M]),_=e.useMemo(function(){return c.default.createElement(wo,{key:n,canvasAnnotationSets:u,duration:a,setDisplayedAnnotationSets:v,setAutoScrollEnabled:b,autoScrollEnabled:y})},[y,u]),j=function(e){var t,r=C.current.querySelectorAll(".ramp--annotations__annotation-row-time-tags");if((null==r?void 0:r.length)>0){var n=I.current;"ArrowDown"===e.key?(n=(I.current+1)%r.length,e.preventDefault()):"ArrowUp"===e.key&&(n=(I.current-1+r.length)%r.length,e.preventDefault()),n!==I.current&&(r[I.current].tabIndex=-1,r[n].tabIndex=0,r[n].focus(),or(r[n],S,!0),t=n,I.current=t)}},P=e.useMemo(function(){return w?c.default.createElement(qn,null):O&&(null==M?void 0:M.length)>0?c.default.createElement("div",{onKeyDown:j,ref:C,"aria-label":"Scrollable time-synced annotations list"},M.map(function(e,t){return c.default.createElement(Eo,{key:t,annotation:e,displayMotivations:i,autoScrollEnabled:y,containerRef:S,displayedAnnotations:M,showMoreSettings:o,index:t})})):c.default.createElement("p",{"data-testid":"no-annotations-message"},(null==i?void 0:i.length)>0?"No Annotations were found with ".concat(i.join("/")," motivation."):"No Annotations were found for the selected set(s).")},[O,M,w,y]);return(null==u?void 0:u.length)>0?c.default.createElement("div",{className:"ramp--annotations__list","data-testid":"annotations-list"},_,c.default.createElement("div",{className:"ramp--annotations__content","data-testid":"annotations-content",tabIndex:-1,ref:S},P)):c.default.createElement("p",{"data-testid":"no-annotation-sets-message"},"No Annotations sets were found for the Canvas.")};function So(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?So(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):So(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}To.propTypes={annotations:Ln.array.isRequired,canvasIndex:Ln.number.isRequired,displayMotivations:Ln.array.isRequired,duration:Ln.number.isRequired,showMoreSettings:Ln.object.isRequired};var Io=function(t){var r,n=t.displayMotivations,a=void 0===n?[]:n,o=t.headingText,l=void 0===o?"Annotations":o,s=t.showHeading,u=void 0===s||s,d=t.showMoreSettings;d=Co(Co({},{enableShowMore:!1,textLineLimit:6}),d);var f=En(),p=f.allCanvases,m=f.annotations,v=f.canvasDuration,h=f.canvasIndex,g=f.playlist,y=Tn();!function(){var t=e.useContext(gn),r=e.useContext(yn),n=t.annotations,a=t.canvasIndex,i=t.manifest,o=t.playlist.isPlaylist;e.useEffect(function(){if(((null==n?void 0:n.length)>0||0===(null==n?void 0:n.filter(function(e){return e.canvasIndex===a}).length))&&null!==i){var e=on(i,a);r({annotations:e,type:"setAnnotations"})}},[i]),e.useEffect(function(){if(o&&(null==n?void 0:n.length)>0){var e=n.filter(function(e){return e.canvasIndex===a}),t=[];if((null==e?void 0:e.length)>0){var i=e[0];i._,t=i.annotationSets.map(function(e){return e.markers}).filter(function(e){return null!=e}).flat()}r({markers:{canvasIndex:a,canvasMarkers:t},type:"setPlaylistMarkers"})}},[o,a,n])}();var b=g.annotationServiceId,x=g.hasAnnotationService,k=g.isPlaylist,w=g.markers,E=e.useState([]),S=T(E,2);S[0];var C=S[1],I=i.useErrorBoundary().showBoundary,R=e.useRef(),O=e.useRef([]),_=function(e){C.apply(void 0,M(e)),O.current=e},j=null===(r=document.getElementsByName("csrf-token")[0])||void 0===r?void 0:r.content;e.useEffect(function(){try{if(k&&(null==w?void 0:w.length)>0){var e=w.filter(function(e){return e.canvasIndex===h});(null==e?void 0:e.length)>0?_(e[0].canvasMarkers):_([])}null!=p&&(null==p?void 0:p.length)>0&&(R.current=p[h].canvasId)}catch(e){I(e)}},[k,h,w]);var P=e.useCallback(function(e,t,r){var n=O.current.map(function(n){return n.id===r&&(n.value=e,n.timeStr=t,n.time=Kt(t)),n});_(n),y({updatedMarkers:n,type:"setPlaylistMarkers"})}),A=e.useCallback(function(e){var t=O.current.filter(function(t){return t.id!=e});_(t),y({updatedMarkers:t,type:"setPlaylistMarkers"})}),D=e.useCallback(function(e){_([].concat(M(O.current),[e])),y({updatedMarkers:O.current,type:"setPlaylistMarkers"})}),N=e.useCallback(function(e){y({isEditing:e,type:"setIsEditing"})}),L=e.useMemo(function(){if(x)return c.default.createElement(xo,{newMarkerEndpoint:b,canvasId:R.current,handleCreate:D,csrfToken:j})},[x,R.current,j]),q=e.useMemo(function(){if(O.current.length>0)return c.default.createElement("table",{className:"ramp--markers-display_table","data-testid":"markers-display-table"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,c.default.createElement("label",{htmlFor:"marker-edit-label"},"Name")),c.default.createElement("th",null,c.default.createElement("label",{htmlFor:"marker-edit-time"},"Time")),x&&c.default.createElement("th",null,"Actions"))),c.default.createElement("tbody",null,O.current.map(function(e,t){return c.default.createElement(ko,{key:t,marker:e,handleSubmit:P,handleDelete:A,toggleIsEditing:N,csrfToken:j})})))},[O.current]);return c.default.createElement("div",{className:"ramp--annotations-display","data-testid":"annotations-display",role:"complementary","aria-label":"annotations display"},u&&c.default.createElement("div",{className:"ramp--annotations__title","data-testid":"annotations-display-title"},c.default.createElement("h4",null,l)),k&&c.default.createElement(c.default.Fragment,null,L,q),(null==m?void 0:m.length)>0&&!k&&c.default.createElement(To,{annotations:m,canvasIndex:h,displayMotivations:a,duration:v,showMoreSettings:d}))};Io.propTypes={displayMotivations:Ln.array,headingText:Ln.string,showHeading:Ln.bool,showMoreSettings:Ln.object},exports.Annotations=Io,exports.AutoAdvanceToggle=bo,exports.IIIFPlayer=Vn,exports.MediaPlayer=_i,exports.MetadataDisplay=yo,exports.StructuredNavigation=qi,exports.SupplementalFiles=function(t){var r=t.itemHeading,n=void 0===r?"Item files":r,a=t.sectionHeading,o=void 0===a?"Section files":a,l=t.showHeading,s=void 0===l||l,u=En().renderings,d=e.useState(),f=T(d,2),p=f[0],m=f[1],v=e.useState(),h=T(v,2),g=h[0],y=h[1],b=e.useState(!1),x=T(b,2),k=x[0],w=x[1],E=e.useState(!1),S=T(E,2),C=S[0],I=S[1],M=i.useErrorBoundary().showBoundary;e.useEffect(function(){try{var e;m(null==u?void 0:u.manifest);var t=null==u?void 0:u.canvas,r=0;t&&(y(t),r=t.reduce(function(e,t){return e+t.files.length},0),w(r>0)),r>0||(null==u||null===(e=u.manifest)||void 0===e?void 0:e.length)>0?I(!0):I(!1)}catch(e){M(e)}},[u]);var R=e.useMemo(function(){return c.default.createElement(c.default.Fragment,null,C&&c.default.createElement("div",{className:"ramp--supplemental-files-display-content","data-testid":"supplemental-files-display-content"},Array.isArray(p)&&p.length>0&&c.default.createElement(c.default.Fragment,null,c.default.createElement("h4",null,n),c.default.createElement("dl",{key:"item-files"},p.map(function(t,r){return c.default.createElement(e.Fragment,{key:r},c.default.createElement("dd",{key:"item-file-".concat(r)},c.default.createElement("a",{href:t.id,key:r},t.label)))}))),Array.isArray(g)&&k&&c.default.createElement(c.default.Fragment,null,c.default.createElement("h4",null,o),g.map(function(e,t){var r=e.files;return r.length>0&&c.default.createElement("dl",{key:"section-".concat(t,"-label")},c.default.createElement("dt",{key:e.label},e.label),r.map(function(e,r){return c.default.createElement("dd",{key:"section-".concat(t,"-file-").concat(r)},c.default.createElement("a",{href:e.id,key:r},e.label))}))}))),!C&&c.default.createElement("div",{"data-testid":"supplemental-files-empty",className:"ramp--supplemental-files-empty"},c.default.createElement("p",null,"No Supplemental file(s) in Manifest")))},[C,k]);return c.default.createElement("div",{"data-testid":"supplemental-files",className:"ramp--supplemental-files",role:"complementary","aria-label":"supplemental files"},s&&c.default.createElement("div",{className:"ramp--supplemental-files-heading","data-testid":"supplemental-files-heading"},c.default.createElement("h4",null,"Files")),R)},exports.Transcript=go;
