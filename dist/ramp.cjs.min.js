"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("manifesto.js"),r=require("mime-db"),n=require("sanitize-html"),a=require("react-error-boundary"),i=require("video.js"),u=require("react-dom"),o=require("mammoth");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=l(e),s=l(r),f=l(n),d=l(i),p=l(u),v=l(o),h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var g=y((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports})),b=y((function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,u,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw a}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports})),_=y((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports})),x=y((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports})),w=y((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports})),E=m(y((function(e){e.exports=function(e,t){return g(e)||b(e,t)||x(e,t)||w()},e.exports.__esModule=!0,e.exports.default=e.exports}))),k=y((function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),T=m(k),j=y((function(e){var t=k.default;e.exports=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),S=y((function(e){var t=k.default;e.exports=function(e){var r=j(e,"string");return"symbol"===t(r)?r:String(r)},e.exports.__esModule=!0,e.exports.default=e.exports})),I=m(y((function(e){e.exports=function(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports})));function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=c.default.createContext(),R=c.default.createContext(),M={manifest:null,canvasIndex:0,currentNavItem:null,canvasDuration:0,canvasIsEmpty:!1,targets:[],hasMultiItems:!1,srcIndex:0,startTime:0,autoAdvance:!1,playlist:{markers:[],isEditing:!1,isPlaylist:!1,hasAnnotationService:!1,annotationServiceId:""},structures:[],canvasSegments:[]};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updateManifest":return O(O({},e),{},{manifest:O({},t.manifest)});case"switchCanvas":return O(O({},e),{},{canvasIndex:t.canvasIndex});case"switchItem":return O(O({},e),{},{currentNavItem:t.item});case"canvasDuration":return O(O({},e),{},{canvasDuration:t.canvasDuration});case"canvasTargets":return O(O({},e),{},{targets:t.canvasTargets});case"hasMultipleItems":return O(O({},e),{},{hasMultiItems:t.isMultiSource});case"setSrcIndex":return O(O({},e),{},{srcIndex:t.srcIndex});case"setItemStartTime":return O(O({},e),{},{startTime:t.startTime});case"setAutoAdvance":return O(O({},e),{},{autoAdvance:t.autoAdvance});case"setPlaylistMarkers":if(t.markers)return O(O({},e),{},{playlist:O(O({},e.playlist),{},{markers:t.markers})});if(t.updatedMarkers)return O(O({},e),{},{playlist:O(O({},e.playlist),{},{markers:e.playlist.markers.map((function(r){return r.canvasIndex===e.canvasIndex&&(r.canvasMarkers=t.updatedMarkers),r}))})});case"setIsEditing":return O(O({},e),{},{playlist:O(O({},e.playlist),{},{isEditing:t.isEditing})});case"setIsPlaylist":return O(O({},e),{},{playlist:O(O({},e.playlist),{},{isPlaylist:t.isPlaylist})});case"setCanvasIsEmpty":return O(O({},e),{},{canvasIsEmpty:t.isEmpty});case"setAnnotationService":return O(O({},e),{},{playlist:O(O({},e.playlist),{},{annotationServiceId:t.annotationService,hasAnnotationService:!!t.annotationService})});case"setStructures":return O(O({},e),{},{structures:t.structures});case"setCanvasSegments":return O(O({},e),{},{canvasSegments:t.timespans});default:throw new Error("Unhandled action type: ".concat(t.type))}}function N(e){var t=e.initialState,r=void 0===t?M:t,n=e.children,a=c.default.useReducer(A,r),i=E(a,2),u=i[0],o=i[1];return c.default.createElement(P.Provider,{value:u},c.default.createElement(R.Provider,{value:o},n))}function L(){var e=c.default.useContext(P);if(void 0===e)throw new Error("useManifestState must be used within a ManifestProvider");return e}function D(){var e=c.default.useContext(R);if(void 0===e)throw new Error("useManifestDispatch must be used within a ManifestProvider");return e}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U=c.default.createContext(),q=c.default.createContext(),V={player:null,clickedUrl:"",isClicked:!1,isPlaying:!1,startTime:null,endTime:null,isEnded:!1,currentTime:null,playerRange:{start:null,end:null},playerFocusElement:""};function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updatePlayer":return F(F({},e),{},{player:t.player});case"navClick":return F(F({},e),{},{clickedUrl:t.clickedUrl,isClicked:!0});case"resetClick":return F(F({},e),{},{isClicked:!1});case"setTimeFragment":return F(F({},e),{},{startTime:t.startTime,endTime:t.endTime});case"setPlayingStatus":return F(F({},e),{},{isPlaying:t.isPlaying});case"setCaptionStatus":return F(F({},e),{},{captionOn:t.captionOn});case"setIsEnded":return F(F({},e),{},{isEnded:t.isEnded});case"setCurrentTime":return F(F({},e),{},{currentTime:t.currentTime});case"setPlayerRange":return F(F({},e),{},{playerRange:F(F({},e.playerRange),{},{start:t.start,end:t.end})});case"setPlayerFocusElement":return F(F({},e),{},{playerFocusElement:t.element?t.element:""});default:throw new Error("Unhandled action type: ".concat(t.type))}}function z(e){var t=e.initialState,r=void 0===t?V:t,n=e.children,a=c.default.useReducer(W,r),i=E(a,2),u=i[0],o=i[1];return c.default.createElement(U.Provider,{value:u},c.default.createElement(q.Provider,{value:o},n))}function G(){var e=c.default.useContext(U);if(void 0===e)throw new Error("usePlayerState must be used within the PlayerProvider");return e}function H(){var e=c.default.useContext(q);if(void 0===e)throw new Error("usePlayerDispatch must be used within the PlayerProvider");return e}function $(){}function J(){}J.resetWarningCache=$;var Z=function(){function e(e,t,r,n,a,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:J,resetWarningCache:$};return r.PropTypes=r,r},K=y((function(e){e.exports=Z()})),Y=["doc","docx","json","js","srt","txt","vtt","png","jpeg","jpg","pdf"],X={transcript:1,caption:2,both:3},Q="Error encountered. Please check your Manifest.",ee=Q,te=3e3,re=te;function ne(e){var r=t.parseManifest(e).getSequences();if(null!=r&&null!=r[0])return r;throw new Error(ee)}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(isNaN(e))return"";var n=Math.floor(e/3600),a=Math.floor(e%3600/60),i=e-60*a-3600*n,u="",o=n<10?"0".concat(n):"".concat(n);u=t||n>0?u+"".concat(o,":"):u;var l=a<10?"0".concat(a):"".concat(a);u+="".concat(l,":");var c=r?i.toFixed(3):parseInt(i);return c=i<10?"0".concat(c):"".concat(c),u+="".concat(c)}function ie(e){var t=e.split(":").reverse(),r=E(t,3),n=r[0],a=r[1],i=r[2];return(null!=i?3600*parseInt(i):0)+(null!=a?60*parseInt(a):0)+(""===n?0:parseFloat(n))}function ue(e){if(!e.ok)throw new Error(ee);return e}function oe(e,t){return void 0!==e&&(void 0===t||!(e.end>t.end||e.start<t.start))}function le(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=""===r?e.split(".").reverse()[0]:r,i=Y.includes(a)?a:"doc",u=t.endsWith(a)?t.split(".".concat(a))[0]:t;if(n&&(u="".concat(u," (machine generated)")),e.endsWith("transcripts")||e.endsWith("captions"))fetch(e).then((function(e){e.blob().then((function(e){var t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="".concat(u,".").concat(i),r.click()}))})).catch((function(e){console.log(e)}));else{var o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("download","".concat(u,".").concat(i)),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}function ce(e,t){if(void 0===e);else{var r=e.split("#t=")[1];if(void 0!==r){var n=r.split(",");return null==n[1]&&(n[1]=t),{start:Number(n[0]),end:Number(n[1])}}}}function se(e,r){var n=[];if(!e)return n;var a=null;if(e.length&&(a=new t.AnnotationPage(e[0],{})),!a)return n;var i=a.getItems();if(void 0===i)return n;for(var u=0;u<i.length;u++){var o=i[u],l=new t.Annotation(o,{});l.getMotivation()==r&&n.push(l)}return n}function fe(e){var t=e.manifest,r=e.canvasIndex,n=e.key,a=e.motivation,i=[];try{var u=ne(t)[0].getCanvases()[r];return u&&(i=se(u.__jsonld[n],a)),i}catch(e){throw e}}function de(e,t,r){var n,a=[],i=[],u=!1;if(!e||0===e.length)return{error:"No resources found in Manifest",canvasTargets:i,resources:a,isMultiSource:u};if(e.length>1)u=!0,e.map((function(e,n){var u=pe(e.getBody()[0],r);if("painting"===r){var o=function(e,t,r){var n=ce(e.getTarget(),t);if(null!=n||!n)return n.id=e.id,isNaN(n.end)&&(n.end=t),n.end=Number((n.end-n.start).toFixed(2)),n.duration=n.end,n.altStart=n.start,n.start=0,n.sIndex=r,n}(e,t,n);i.push(o)}u.length>0&&a.push(u[0])}));else{if(!((null===(n=e[0].getBody())||void 0===n?void 0:n.length)>0))return{resources:a,error:"No resources found"};e[0].getBody().map((function(e){var t=pe(e,r);t.length>0&&a.push(t[0])}))}return{canvasTargets:i,isMultiSource:u,resources:a}}function pe(e,t){var r=[],n=X.both;if("supplementing"===t&&(n=he(e.id)),n!=X.transcript){var a={src:e.id,type:e.getProperty("format"),kind:e.getProperty("type"),label:e.getLabel().getValue()||"auto",value:e.getProperty("value")?e.getProperty("value"):""};r.push(a)}return r}function ve(e){var t=/(\(machine(\s|\-)generated\))/gi;return{isMachineGen:t.test(e),labelText:e.replace(t,"").trim()}}function he(e){var t=e.split("/").reverse()[0];return"transcripts"===t?X.transcript:"captions"===t?X.caption:X.both}function me(e){var t=function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'")};if(e&&"object"===T(e)){var r=Object.keys(e);if(r&&r.length>0){var n=r[0];return e[n].length>0?t(e[n][0]):""}}else if("string"==typeof e)return t(e);return"Label could not be parsed"}function ye(e){return/^(([0-1][0-9])|([2][0-3])):([0-5][0-9])(:[0-5][0-9](?:[.]\d{1,3})?)?$/.test(e)}function ge(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw i}}}}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var we={allowedTags:["a","b","br","i","img","p","small","span","sub","sup"],allowedAttributes:{a:["href"],img:["src","alt"]},allowedSchemesByTag:{a:["http","https","mailto"]}};function Ee(e){var t=[];try{var r=ne(e)[0].getCanvases();if(void 0===r)throw console.error("iiif-parser -> canvasesInManifest() -> no canvases were found in Manifest"),new Error(ee);return r.map((function(e){try{var r,n=e.getContent()[0].getBody().map((function(e){return e.id})),a=Number(e.getDuration());(null==n?void 0:n.length)>0&&(r=ce(n[0],a)),t.push({canvasId:e.id,range:void 0===r?{start:0,end:a}:r,isEmpty:0===n.length})}catch(r){t.push({canvasId:e.id,range:void 0,isEmpty:!0})}})),t}catch(e){throw e}}function ke(e,t){try{var r=ne(e)[0].getCanvasIndexById(t);return r||0===r?r:(console.log("Canvas not found in Manifest, ",t),0)}catch(e){throw e}}function Te(e){var t,r=e.manifest,n=e.canvasIndex,a=e.srcIndex,i=void 0===a?0:a,u=[];if(void 0===n||n<0)return{error:"Error fetching content"};try{if(void 0===(u=ne(r)[0].getCanvasByIndex(n)))throw console.error("iiif-parser -> getMediaInfo() -> canvas undefined  -> ",n),new Error(ee);var o=Number(u.getDuration()),l=je({manifest:r,canvasIndex:n,key:"items",motivation:"painting",duration:o}),c=l.resources,s=l.canvasTargets,f=l.isMultiSource,d=l.error;t=function(e,t,r){var n=!1;if(0===e.length)return[];if(t)e[r].selected=!0;else{var a,i=ge(e);try{for(i.s();!(a=i.n()).done;){var u=a.value;"auto"!=u.label||n||(n=!0,u.selected=!0)}}catch(e){i.e(e)}finally{i.f()}n||(e[0].selected=!0)}return e}(c,f,i);var p=je({manifest:r,canvasIndex:n,key:"annotations",motivation:"supplementing",duration:o}),v={sources:t,tracks:p?p.resources:[],canvasTargets:s,isMultiSource:f,error:d,canvas:{duration:o,height:u.getHeight(),width:u.getWidth()}};if(v.error)return xe({},v);var h=function(e){var t=e.filter((function(t,r){return e.indexOf(t)===r})),r=1===t.length?t[0].toLowerCase():"video";return r}(v.sources.map((function(e){return e.kind})));return xe(xe({},v),{},{error:null,mediaType:h})}catch(d){throw d}}function je(e){var t=e.manifest,r=e.canvasIndex,n=e.key,a=e.motivation,i=e.duration;return de(fe({manifest:t,canvasIndex:r,key:n,motivation:a}),i,a)}function Se(e){if(void 0!==e)return e.split("#t=")[0]}function Ie(e,t){var r,n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var i=ne(e);if((null==i?void 0:i.length)>0){var u=i[0].getCanvasByIndex(t).__jsonld.placeholderCanvas;if(!u)return a?null:(console.error("iiif-parser -> getPlaceholderCanvas() -> placeholderCanvas property not defined"),"This item cannot be played.");var o=se(u.items,"painting");if(o.length>0){var l=o[0].getBody()[0];return a?r="image"==l.getType()?l.id:null:(r=l.getLabel().getValue()?me(l.getLabel().getValue()):"This item cannot be played.",n=u.duration,re=n||te),r}}}catch(e){throw e}}function Ce(e,t,r){var n=s.default[e],a=n?n.extensions[0]:e,i=me(t);return{id:r,label:"".concat(i," (.").concat(a,")"),filename:i,fileExt:a}}function Oe(e){try{var r=[],n=[],a=t.parseManifest(e).getRenderings(),i=ne(e)[0].getCanvases();return null!=a&&null!=a&&a.map((function(e){var t=Ce(e.getFormat(),e.getProperty("label"),e.id);r.push(t)})),null!=i&&null!=i&&i.map((function(e,t){var r=e.__jsonld.rendering,a=[];r&&r.map((function(e){var t=Ce(e.format,e.label,e.id);a.push(t)}));var i=e.getLabel().getValue()||"Section "+(t+1);n.push({label:me(i),files:a})})),{manifest:r,canvas:n}}catch(e){throw e}}function Pe(e){var r,n=null===(r=t.parseManifest(e).getProperty("behavior"))||void 0===r?void 0:r.includes("auto-advance");return void 0!==n&&n}function Re(e){var r=Ee(e),n=[],a=0,i=function e(t,i,u){var o,l=me(t.getLabel().getValue()),c=t.getCanvasIds(),s=0,f=t.getDuration();if(null!=f){var d=f.start;s=f.end-d}var p=i==t.parentRange,v=!1,h=!1;if(c.length>0&&(null==r?void 0:r.length)>0){var m=r.filter((function(e){return e.canvasId===Se(c[0])}))[0];h=m.isEmpty,v=oe(t.getDuration(),m.range),p&&null!=m.range&&(s=m.range.end-m.range.start)}var y={label:l,isTitle:0===c.length,rangeId:t.id,id:c.length>0?p?"".concat(c[0].split(",")[0],","):c[0]:void 0,isEmpty:h,isCanvas:p,itemIndex:p?u:void 0,canvasIndex:u,items:(null===(o=t.getRanges())||void 0===o?void 0:o.length)>0?t.getRanges().map((function(t){return e(t,i,u)})):[],duration:ae(s),isClickable:v};return c.length>0&&(a++,p||(y.itemIndex=a),n.push(y)),y},u=t.parseManifest(e).getAllRanges();if(0===(null==u?void 0:u.length))return{structures:[],timespans:[]};var o=u[0],l=[],c=o.getRanges();return(null==c?void 0:c.length)>0&&c.map((function(e,t){"no-nav"!=e.getBehavior()&&(a=0,l.push(i(e,o,t+1)))})),{structures:l,timespans:n}}function Me(e){if(!e)return null;var t=e.getTarget().split("#t="),r=E(t,2),n=r[0],a=r[1],i=e.getBody();return(null==i?void 0:i.length)>0&&"TextualBody"===i[0].getProperty("type")?{id:e.id,time:parseFloat(a),timeStr:ae(parseFloat(a),!0,!0),canvasId:n,value:i[0].getProperty("value")?i[0].getProperty("value"):""}:null}function Ae(e){var r=e.manifestUrl,n=e.customErrorMessage,a=e.children,i=e.manifest,u=c.default.useState(i),o=E(u,2),l=o[0],s=o[1],f=c.default.useState(""),d=E(f,2),p=d[0],v=d[1],h=D();return c.default.useEffect((function(){if(ee=n||Q,l)h({manifest:l,type:"updateManifest"});else{fetch(r,{}).then((function(e){return e.json()})).then((function(e){s(e),h({manifest:e,type:"updateManifest"})})).catch((function(e){console.log("Error fetching manifest, ",e),v("Failed to fetch Manifest. Please check again.")}))}}),[]),c.default.useEffect((function(){if(l){h({autoAdvance:Pe(l),type:"setAutoAdvance"});var e=function(e){try{return me(e.label).includes("[Playlist]")}catch(e){return console.error("Cannot parse manfiest, ",e),!1}}(l);h({isPlaylist:e,type:"setIsPlaylist"});var r=function(e){var r=t.parseManifest(e).getService();return r&&"AnnotationService0"===r.getProperty("type")?r.id:null}(l);h({annotationService:r,type:"setAnnotationService"})}}),[l]),p.length>0?c.default.createElement("p",null,p):l?c.default.createElement(c.default.Fragment,null,a):c.default.createElement("p",null,"...Loading")}function Ne(e){var t=e.error,r=e.resetErrorBoundary;return c.default.createElement("div",{role:"alert",className:"ramp--error-message__alert"},c.default.createElement("span",{className:"ramp--error-message__message",dangerouslySetInnerHTML:{__html:t.message}}),c.default.createElement("button",{className:"ramp--error-message__reset-button",onClick:r},"Try again"))}Ae.propTypes={manifest:K.object,customErrorMessage:K.string,manifestUrl:K.string,children:K.node};var Le=function(e){e.message;var t=e.children;return c.default.createElement(a.ErrorBoundary,{FallbackComponent:Ne,onReset:function(e){}},t)};function De(e){var t=e.manifestUrl,r=e.manifest,n=e.customErrorMessage,a=e.children;return t||r?c.default.createElement(N,null,c.default.createElement(z,null,c.default.createElement(Le,null,c.default.createElement(Ae,{manifestUrl:t,manifest:r,customErrorMessage:n},a)))):c.default.createElement("p",null,"Please provide a valid manifest.")}Le.propTypes={message:K.string,children:K.object},De.propTypes={manifestUrl:K.string,manifest:K.object,customErrorMessage:K.string},De.defaultProps={};var Be=y((function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),Fe=m(Be),Ue=m(y((function(e){function t(e,t,r,n,a,i,u){try{var o=e[i](u),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(a,i){var u=e.apply(r,n);function o(e){t(u,a,i,o,l,"next",e)}function l(e){t(u,a,i,o,l,"throw",e)}o(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports}))),qe=y((function(e){e.exports=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a},e.exports.__esModule=!0,e.exports.default=e.exports})),Ve=m(y((function(e){e.exports=function(e,t){if(null==e)return{};var r,n,a=qe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a},e.exports.__esModule=!0,e.exports.default=e.exports}))),We=y((function(e){var t=k.default;function r(){e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},a=Object.prototype,i=a.hasOwnProperty,u=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),o=new I(n||[]);return u(i,"_invoke",{value:k(e,r,o)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var v={};function h(){}function m(){}function y(){}var g={};f(g,l,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(C([])));_&&_!==a&&i.call(_,l)&&(g=_);var x=y.prototype=h.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,r){function n(a,u,o,l){var c=p(e[a],e,u);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==t(f)&&i.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):r.resolve(f).then((function(e){s.value=e,o(s)}),(function(e){return n("throw",e,o,l)}))}l(c.arg)}var a;u(this,"_invoke",{value:function(e,t){function i(){return new r((function(r,a){n(e,t,r,a)}))}return a=a?a.then(i,i):i()}})}function k(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return O()}for(r.method=a,r.arg=i;;){var u=r.delegate;if(u){var o=T(u,r);if(o){if(o===v)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=p(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function T(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=p(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,v;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:O}}function O(){return{value:void 0,done:!0}}return m.prototype=y,u(x,"constructor",{value:y,configurable:!0}),u(y,"constructor",{value:m,configurable:!0}),m.displayName=f(y,s,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,f(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},n.awrap=function(e){return{__await:e}},w(E.prototype),f(E.prototype,c,(function(){return this})),n.AsyncIterator=E,n.async=function(e,t,r,a,i){void 0===i&&(i=Promise);var u=new E(d(e,t,r,a),i);return n.isGeneratorFunction(t)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},w(x),f(x,s,"Generator"),f(x,l,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=C,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return u.type="throw",u.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],u=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var o=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(o&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),v}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})),ze=We(),Ge=ze;try{regeneratorRuntime=ze}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=ze:Function("r","regeneratorRuntime = r")(ze)}y((function(e,t){!function(e){var t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a={markerStyle:{width:"7px","border-radius":"30%","background-color":"red"},markerTip:{display:!0,text:function(e){return"Break: "+e.text},time:function(e){return e.time}},breakOverlay:{display:!1,displayTime:3,text:function(e){return"Break overlay: "+e.overlayText},style:{width:"100%",height:"20%","background-color":"rgba(0,0,0,0.7)",color:"white","font-size":"17px"}},onMarkerClick:function(e){},onMarkerReached:function(e,t){},markers:[]};function i(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}function u(e){var t,r={top:0,bottom:0,left:0,width:0,height:0,right:0};try{t=e.getBoundingClientRect()}catch(e){t=r}return t}var o=-1;function l(e){if(!t.default.mergeOptions){var r=function(e){return!!e&&"object"===(void 0===e?"undefined":n(e))&&"[object Object]"===toString.call(e)&&e.constructor===Object},l=function e(t,n){var a={};return[t,n].forEach((function(t){t&&Object.keys(t).forEach((function(n){var i=t[n];r(i)?(r(a[n])||(a[n]={}),a[n]=e(a[n],i)):a[n]=i}))})),a};t.default.mergeOptions=l}t.default.dom.createEl||(t.default.dom.createEl=function(e,r,n){var a=t.default.Player.prototype.dom.createEl(e,r);return n&&Object.keys(n).forEach((function(e){a.setAttribute(e,n[e])})),a});var c=t.default.mergeOptions(a,e),s={},f=[],d=o,p=this,v=null,h=null,m=o;function y(){f.sort((function(e,t){return c.markerTip.time(e)-c.markerTip.time(t)}))}function g(e){e.forEach((function(e){e.key=i(),p.el().querySelector(".vjs-progress-holder").appendChild(x(e)),s[e.key]=e,f.push(e)})),y()}function b(e){return c.markerTip.time(e)/p.duration()*100}function _(e,t){t.className="vjs-marker "+(e.class||""),Object.keys(c.markerStyle).forEach((function(e){t.style[e]=c.markerStyle[e]}));var r=e.time/p.duration();if((r<0||r>1)&&(t.style.display="none"),t.style.left=b(e)+"%",e.duration)t.style.width=e.duration/p.duration()*100+"%",t.style.marginLeft="0px";else{var n=u(t);t.style.marginLeft=n.width/2+"px"}}function x(e){var r=t.default.dom.createEl("div",{},{"data-marker-key":e.key,"data-marker-time":c.markerTip.time(e)});return _(e,r),r.addEventListener("click",(function(t){var r=!1;if("function"==typeof c.onMarkerClick&&(r=!1===c.onMarkerClick(e)),!r){var n=this.getAttribute("data-marker-key");p.currentTime(c.markerTip.time(s[n]))}})),c.markerTip.display&&k(r),r}function w(e){f.forEach((function(t){var r=p.el().querySelector(".vjs-marker[data-marker-key='"+t.key+"']"),n=c.markerTip.time(t);(e||r.getAttribute("data-marker-time")!==n)&&(_(t,r),r.setAttribute("data-marker-time",n))})),y()}function E(e){h&&(m=o,h.style.visibility="hidden"),d=o;var t=[];e.forEach((function(e){var r=f[e];if(r){delete s[r.key],t.push(e);var n=p.el().querySelector(".vjs-marker[data-marker-key='"+r.key+"']");n&&n.parentNode.removeChild(n)}})),t.reverse(),t.forEach((function(e){f.splice(e,1)})),y()}function k(e){e.addEventListener("mouseover",(function(){var t=s[e.getAttribute("data-marker-key")];if(v){c.markerTip.html?v.querySelector(".vjs-tip-inner").innerHTML=c.markerTip.html(t):v.querySelector(".vjs-tip-inner").innerText=c.markerTip.text(t),v.style.left=b(t)+"%";var r=u(v),n=u(e);v.style.marginLeft=-parseFloat(r.width/2)+parseFloat(n.width/4)+"px",v.style.visibility="visible"}})),e.addEventListener("mouseout",(function(){v&&(v.style.visibility="hidden")}))}function T(){v=t.default.dom.createEl("div",{className:"vjs-tip",innerHTML:"<div class='vjs-tip-arrow'></div><div class='vjs-tip-inner'></div>"}),p.el().querySelector(".vjs-progress-holder").appendChild(v)}function j(){if(c.breakOverlay.display&&!(d<0)){var e=p.currentTime(),t=f[d],r=c.markerTip.time(t);e>=r&&e<=r+c.breakOverlay.displayTime?(m!==d&&(m=d,h&&(h.querySelector(".vjs-break-overlay-text").innerHTML=c.breakOverlay.text(t))),h&&(h.style.visibility="visible")):(m=o,h&&(h.style.visibility="hidden"))}}function S(){h=t.default.dom.createEl("div",{className:"vjs-break-overlay",innerHTML:"<div class='vjs-break-overlay-text'></div>"}),Object.keys(c.breakOverlay.style).forEach((function(e){h&&(h.style[e]=c.breakOverlay.style[e])})),p.el().appendChild(h),m=o}function I(){C(),j(),e.onTimeUpdateAfterMarkerUpdate&&e.onTimeUpdateAfterMarkerUpdate()}function C(){if(f.length){var t=function(e){return e<f.length-1?c.markerTip.time(f[e+1]):p.duration()},r=p.currentTime(),n=o;if(d!==o){var a=t(d);if(r>=c.markerTip.time(f[d])&&r<a)return;if(d===f.length-1&&r===p.duration())return}if(r<c.markerTip.time(f[0]))n=o;else for(var i=0;i<f.length;i++)if(a=t(i),r>=c.markerTip.time(f[i])&&r<a){n=i;break}n!==d&&(n!==o&&e.onMarkerReached&&e.onMarkerReached(f[n],n),d=n)}}function O(){c.markerTip.display&&T(),p.markers.removeAll(),g(c.markers),c.breakOverlay.display&&S(),I(),p.on("timeupdate",I),p.off("loadedmetadata")}p.on("loadedmetadata",(function(){O()})),p.markers={getMarkers:function(){return f},next:function(){for(var e=p.currentTime(),t=0;t<f.length;t++){var r=c.markerTip.time(f[t]);if(r>e){p.currentTime(r);break}}},prev:function(){for(var e=p.currentTime(),t=f.length-1;t>=0;t--){var r=c.markerTip.time(f[t]);if(r+.5<e)return void p.currentTime(r)}},add:function(e){g(e)},remove:function(e){E(e)},removeAll:function(){for(var e=[],t=0;t<f.length;t++)e.push(t);E(e)},updateTime:function(e){w(e)},reset:function(e){p.markers.removeAll(),g(e)},destroy:function(){p.markers.removeAll(),h&&h.remove(),v&&v.remove(),p.off("timeupdate",j),delete p.markers}}}t.default.registerPlugin("markers",l)}(d.default)}));var He=m(y((function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}))),$e=m(y((function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}))),Je=y((function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports})),Ze=m(Je),Ke=y((function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),Ye=m(y((function(e){e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}))),Xe=y((function(e){var t=k.default;e.exports=function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return Je(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),Qe=m(Xe),et=y((function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),tt=m(et);function rt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw i}}}}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=tt(e);if(t){var a=tt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Qe(this,r)}}var it=d.default.getComponent("Component"),ut=function(e){Ye(r,it);var t=at(r);function r(e,n){var a;return He(this,r),(a=t.call(this,e,n)).addClass("vjs-custom-progress-bar"),a.setAttribute("data-testid","videojs-custom-progressbar"),a.setAttribute("tabindex",0),a.mount=a.mount.bind(Ze(a)),a.handleTimeUpdate=a.handleTimeUpdate.bind(Ze(a)),a.initProgressBar=a.initProgressBar.bind(Ze(a)),a.setTimes=a.setTimes.bind(Ze(a)),a.player=e,a.options=n,a.currentTime=n.currentTime,a.state={startTime:null,endTime:null},a.times=n.targets[n.srcIndex],e.on("loadedmetadata",(function(){a.mount(),a.setTimes(),a.initProgressBar()})),a.on("dispose",(function(){p.default.unmountComponentAtNode(a.el())})),a}return $e(r,[{key:"setTimes",value:function(){var e=this.times,t=e.start,r=e.end,n=this.options,a=n.srcIndex,i=n.targets,u=t,o=r;i.length>1&&(u=t+i[a].altStart,o=r+i[a].altStart),this.setState({startTime:u,endTime:o})}},{key:"initProgressBar",value:function(){var e=this.options,t=e.duration,r=e.targets,n=this.state,a=100*n.startTime/t,i=100*(t-n.endTime)/t,u=100-a-i,o=document.getElementById("left-block"),l=document.getElementById("right-block"),c=document.getElementsByClassName("vjs-custom-progress-inactive");o&&(o.style.width=a+"%"),l&&(l.style.width=i+"%");var s,f=rt(c);try{for(f.s();!(s=f.n()).done;){var d=s.value,p=100*r[d.dataset.srcindex].duration/t;d.style.width=p+"%"}}catch(e){f.e(e)}finally{f.f()}document.getElementById("slider-range").style.width=u+"%"}},{key:"handleTimeUpdate",value:function(e){var t=this.player,r=this.times,n=this.options;this.state;var a=n.targets,i=n.srcIndex,u=r.start,o=r.end,l=a.filter((function(e,t){return t>i}));e<u&&t.currentTime(u),e>=o&&(0==l.length&&n.nextItemClicked(0,a[0].start),t.pause(),t.trigger("ended"),t.one("play",(function(){var e=t.currentTime();e<o?t.currentTime(e):t.currentTime(u)})));var c,s=rt(document.getElementsByClassName("vjs-custom-progress-inactive"));try{for(s.s();!(c=s.n()).done;){var f=c.value;f.dataset.srcindex<i&&f.style.setProperty("background","#477076")}}catch(e){s.e(e)}finally{s.f()}var d=Number(100*(e-u)/(o-u));document.documentElement.style.setProperty("--range-progress","calc(".concat(d,"%)"))}},{key:"mount",value:function(){p.default.render(c.default.createElement(ot,{handleOnChange:this.handleOnChange,player:this.player,handleTimeUpdate:this.handleTimeUpdate,initCurrentTime:this.options.currentTime,times:this.times,options:this.options}),this.el())}}]),r}();function ot(e){var t=e.player,r=e.handleTimeUpdate,n=e.initCurrentTime,a=e.times,i=e.options,u=c.default.useState(n),o=E(u,2),l=o[0],s=o[1],f=c.default.useState(t.currentTime()),d=E(f,2),p=d[0],v=d[1],h=c.default.useRef(),m=c.default.useRef(),y=c.default.useRef(),g=i.targets,b=i.srcIndex,_=c.default.useState([]),x=E(_,2),w=x[0],k=x[1],T=c.default.useState([]),j=E(T,2),S=j[0],I=j[1],C=c.default.useState(0),O=E(C,2),P=O[0],R=O[1],M=i.targets.length>1,A=c.default.useRef(n),N=c.default.useRef(l),L=function(e){N.current=e,s(e)},D=a.start,B=a.end;t.on("ready",(function(){var e=g.filter((function(e,t){return t>b})),t=g.filter((function(e,t){return t<b}));I(e),k(t),h.current&&y.current&&(h.current.style.top=-h.current.offsetHeight-3*y.current.offsetHeight+"px")})),t.on("loadedmetadata",(function(){var e=t.currentTime();L(e),v(e+g[b].altStart);var r,n=y.current.offsetWidth/(B-D),a=N.current*n,i=rt(document.getElementsByClassName("vjs-custom-progress-inactive"));try{for(i.s();!(r=i.n()).done;){var u=r.value;u.dataset.srcindex<b&&(a+=u.offsetWidth)}}catch(e){i.e(e)}finally{i.f()}h.current.style.left=a-h.current.offsetWidth/2+"px"})),t.on("timeupdate",(function(){var e,n;t.isDisposed()||(A.current>0&&0==t.currentTime()?(e=A.current,t.currentTime(A.current)):e=t.currentTime(),L(e),r(e),n=0,A.current=n)}));var F,U=function(e,t){var r=b;t&&(r=e.target.dataset.srcindex),R(r),v(function(e,t){var r=e.nativeEvent.offsetX/e.target.clientWidth*(e.target.max-e.target.min);return null!=t&&(r+=g[t].altStart),r}(e,r));var n=e.nativeEvent.offsetX-h.current.offsetWidth/2;m.current&&(n+=m.current.offsetWidth);var a,i=rt(document.querySelectorAll('input[type=range][class^="vjs-custom-progress"]'));try{for(i.s();!(a=i.n()).done;){var u=a.value;u.dataset.srcindex<r&&(n+=u.offsetWidth)}}catch(e){i.e(e)}finally{i.f()}h.current.style.left=n+"px"},q=function(e){var t=parseInt(e.target.dataset.srcindex),r=p;t>0&&(r-=g[t-1].duration),i.nextItemClicked(t,r)},V=function(e){var t=[];return e.map((function(e){t.push(c.default.createElement("input",{type:"range","aria-label":"Progress bar","aria-valuemax":e.end,"aria-valuemin":e.start,min:e.start,max:e.end,role:"slider","data-srcindex":e.sIndex,className:"vjs-custom-progress-inactive",onMouseMove:function(e){return U(e,!0)},onClick:q,key:e.sIndex,tabIndex:0}))})),t};return c.default.createElement("div",{className:"vjs-progress-holder vjs-slider vjs-slider-horizontal"},c.default.createElement("span",{className:"tooltiptext",ref:h,"aria-hidden":!0},(F=p,M||F>=D&&F<=B?ae(F):F>=B?ae(B):F<=D?ae(D):void 0)),w.length>0?V(w):c.default.createElement("div",{className:"block-stripes",role:"presentation",ref:m,id:"left-block",style:{width:"0%"}}),c.default.createElement("input",{type:"range","aria-label":"Progress bar","aria-valuemax":a.end,"aria-valuemin":a.start,"aria-valuenow":l,max:a.end,min:a.start,value:l,role:"slider","data-srcindex":b,className:"vjs-custom-progress",onChange:function(e){var r=p;P>0&&(r-=g[P].altStart),r>=D&&r<=B&&(t.currentTime(r),L(r))},onMouseMove:function(e){return U(e,!1)},id:"slider-range",ref:y,tabIndex:0}),S.length>0?V(S):c.default.createElement("div",{className:"block-stripes",role:"presentation",id:"right-block",style:{width:"0%"}}))}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=tt(e);if(t){var a=tt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Qe(this,r)}}it.registerComponent("VideoJSProgress",ut);var ct=d.default.getComponent("Component"),st=function(e){Ye(r,ct);var t=lt(r);function r(e,n){var a;return He(this,r),(a=t.call(this,e,n)).addClass("vjs-time-control"),a.setAttribute("role","presentation"),a.mount=a.mount.bind(Ze(a)),a.player=e,a.options=n,e.ready((function(){a.mount()})),a.on("dispose",(function(){p.default.unmountComponentAtNode(a.el())})),a}return $e(r,[{key:"mount",value:function(){p.default.render(c.default.createElement(ft,{player:this.player,options:this.options}),this.el())}}]),r}();function ft(e){var t=e.player,r=e.options,n=r.srcIndex,a=r.targets,i=c.default.useState(t.currentTime()),u=E(i,2),o=u[0],l=u[1],s=c.default.useRef(r.currentTime);return t.on("timeupdate",(function(){var e,r;t.isDisposed()||(e=s.current>0&&0==t.currentTime()?s.current:t.currentTime(),a.length>1&&(e+=a[n].altStart),l(e),r=0,s.current=r)})),c.default.createElement("span",{className:"vjs-current-time-display",role:"presentation"},ae(o))}ct.registerComponent("VideoJSCurrentTime",st);var dt=d.default.getComponent("MenuButton"),pt=d.default.getComponent("MenuItem"),vt=d.default.extend(dt,{constructor:function(e,t){dt.call(this,e,t),this.addClass("vjs-file-download-icon"),this.setAttribute("data-testid","videojs-file-download")},createItems:function(){var e,t=this.options_,r=this.player_,n=t.manifest,a=t.canvasIndex,i=Oe(n),u=i.manifest.concat(null===(e=i.canvas[a])||void 0===e?void 0:e.files);return(null==u?void 0:u.length)>0?u.map((function(e){var t=new pt(r,{label:e.label});return t.handleClick=function(){le(e.id,e.filename,e.fileExt)},t})):[]}});function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=tt(e);if(t){var a=tt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Qe(this,r)}}d.default.registerComponent("VideoJSFileDownload",vt);var mt=d.default.getComponent("Component"),yt=function(e){var t=e.scale;return c.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0)",style:{fill:"white",height:"1.25rem",width:"1.25rem",scale:t}},c.default.createElement("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),c.default.createElement("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("g",{id:"SVGRepo_iconCarrier"},c.default.createElement("path",{d:"M4 20L15.3333 12L4 4V20Z",fill:"#ffffff"}),c.default.createElement("path",{d:"M20 4H17.3333V20H20V4Z",fill:"#ffffff"})))},gt=function(e){Ye(r,mt);var t=ht(r);function r(e,n){var a;return He(this,r),(a=t.call(this,e,n)).setAttribute("data-testid","videojs-next-button"),a.mount=a.mount.bind(Ze(a)),a.options=n,a.player=e,e.ready((function(){a.mount()})),a.on("dispose",(function(){p.default.unmountComponentAtNode(a.el())})),a}return $e(r,[{key:"mount",value:function(){p.default.render(c.default.createElement(bt,Fe({},this.options,{player:this.player})),this.el())}}]),r}();function bt(e){var t=e.canvasIndex,r=e.lastCanvasIndex,n=e.switchPlayer,a=e.playerFocusElement;e.player;var i=c.default.useRef();c.default.useEffect((function(){"nextBtn"==a&&i.current.focus()}),[]);var u=function(e){t!=r&&n(t+1,!0,e?"nextBtn":"")};return c.default.createElement("div",{className:"vjs-button vjs-control"},c.default.createElement("button",{className:"vjs-button vjs-next-button",role:"button",ref:i,tabIndex:0,title:"Next",onClick:function(){return u(!1)},onKeyDown:function(e){32!==e.which&&13!==e.which||(e.stopPropagation(),u(!0))}},c.default.createElement(yt,{scale:"0.9"})))}function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=tt(e);if(t){var a=tt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Qe(this,r)}}mt.registerComponent("VideoJSNextButton",gt);var xt=d.default.getComponent("Component"),wt=function(e){var t=e.scale;return c.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{fill:"white",height:"1.25rem",width:"1.25rem",scale:t}},c.default.createElement("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),c.default.createElement("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("g",{id:"SVGRepo_iconCarrier"},c.default.createElement("path",{d:"M20 4L8.66667 12L20 20V4Z",fill:"#ffffff"}),c.default.createElement("path",{d:"M4 20H6.66667V4H4V20Z",fill:"#ffffff"})))},Et=function(e){Ye(r,xt);var t=_t(r);function r(e,n){var a;return He(this,r),(a=t.call(this,e,n)).setAttribute("data-testid","videojs-previous-button"),a.mount=a.mount.bind(Ze(a)),a.options=n,a.player=e,e.ready((function(){a.mount()})),a.on("dispose",(function(){p.default.unmountComponentAtNode(a.el())})),a}return $e(r,[{key:"mount",value:function(){p.default.render(c.default.createElement(kt,Fe({},this.options,{player:this.player})),this.el())}}]),r}();function kt(e){var t=e.canvasIndex,r=e.switchPlayer,n=e.playerFocusElement,a=e.player,i=c.default.useRef();c.default.useEffect((function(){"previousBtn"==n&&i.current.focus()}),[]);var u=function(e){t>-1&&0!=t?r(t-1,!0,e?"previousBtn":""):0==t&&a.currentTime(0)};return c.default.createElement("div",{className:"vjs-button vjs-control"},c.default.createElement("button",{className:"vjs-button vjs-previous-button",role:"button",ref:i,tabIndex:0,title:0==t?"Replay":"Previous",onClick:function(){return u(!1)},onKeyDown:function(e){32!==e.which&&13!==e.which||(e.stopPropagation(),u(!0))}},c.default.createElement(wt,{scale:"0.9"})))}xt.registerComponent("VideoJSPreviousButton",Et);var Tt=["isVideo","isPlaylist","switchPlayer"];function jt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return St(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return St(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw i}}}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ot(e){var t=e.isVideo,r=e.isPlaylist,n=e.switchPlayer,a=Ve(e,Tt),i=G(),u=H(),o=L(),l=D(),s=o.canvasDuration,f=o.canvasIndex,p=o.currentNavItem,v=o.manifest,h=o.hasMultiItems,m=o.srcIndex,y=o.targets,g=o.autoAdvance,b=o.playlist,_=o.structures,x=o.canvasSegments,w=i.isClicked,k=i.isEnded,T=i.isPlaying,j=i.player;i.startTime;var S=i.currentTime,I=i.playerRange,C=i.playerFocusElement,O=c.default.useState(f),P=E(O,2),R=P[0],M=P[1],A=c.default.useState(!1),N=E(A,2),B=N[0],F=N[1],U=c.default.useState(!1),q=E(U,2),V=q[0],W=q[1],z=c.default.useState(!1),$=E(z,2),J=$[0],Z=$[1],K=c.default.useState(""),Y=E(K,2),X=Y[0],Q=Y[1],ee=c.default.useRef(),te=c.default.useRef();te.current=g;var re=c.default.useRef();re.current=X;var ne=function(e){Q(e),re.current=e},ae=c.default.useRef();ae.current=S;var ie=c.default.useRef();ie.current=B;var ue=c.default.useRef();ue.current=p;var le=c.default.useRef(null),se=c.default.useRef();se.current=x;var fe=c.default.useRef();fe.current=_,c.default.useEffect(Ue(Ge.mark((function e(){var t,r;return Ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ct({},a),M(f),null!=ee.current&&(r=le.current=d.default(ee.current,t)),W(!0),u({player:r,type:"updatePlayer"});case 5:case"end":return e.stop()}}),e)}))),[]),c.default.useEffect((function(){return function(){null!=le.current&&(le.current.dispose(),W(!1),F(!1))}}),[]),c.default.useEffect((function(){j&&V&&(j.on("ready",(function(){console.log("Player ready"),""==C&&j.focus(),t||j.getChild("controlBar").getChild("VolumePanel").addClass("vjs-slider-active")})),j.on("ended",(function(){u({isEnded:!0,type:"setIsEnded"}),pe()})),j.on("loadedmetadata",(function(){console.log("loadedmetadata"),j.markers&&(r?j.markers({markerTip:{display:!0,text:function(e){return e.text}},markerStyle:{"border-radius":0,height:"0.5em",width:"0.5em",transform:"rotate(-45deg)",top:"4px",content:"","border-style":"solid","border-width":"0.25em 0.25em 0 0","background-color":"transparent"},markers:[]}):j.markers({markerTip:{display:!0,text:function(e){return e.text}},markerStyle:{opacity:"0.5","background-color":"#80A590","border-radius":0,height:"16px",top:"-7px"},markers:[]})),j.duration=function(){return s},k?j.currentTime(0):j.currentTime(S),(k||T)&&j.play(),u({isEnded:!1,type:"setIsEnded"});var e=j.textTracks();e.on("change",(function(){for(var t=[],r=0;r<e.length;r++)t.push(e[r].mode);var n=!!t.includes("showing");de(n)})),F(!0)})),j.on("waiting",(function(){w&&k&&j.currentTime(ae.current)})),j.on("pause",(function(){u({isPlaying:!1,type:"setPlayingStatus"})})),j.on("play",(function(){u({isPlaying:!0,type:"setPlayingStatus"})})),j.on("timeupdate",(function(){ve()})))}),[j]),c.default.useEffect((function(){var e;if((null===(e=b.markers)||void 0===e?void 0:e.length)>0){var t=b.markers.filter((function(e){return e.canvasIndex===f}))[0].canvasMarkers,r=[];t.map((function(e){r.push({time:parseFloat(e.time),text:e.value})})),j&&j.markers&&B&&(j.markers.removeAll(),j.markers.add(r))}}),[j,B,b.markers]),c.default.useEffect((function(){w&&f!==R&&n(f,!1),M(f)}),[f]),c.default.useEffect((function(){if(j&&le.current&&!j.isDisposed()&&null!==p&&B&&!r&&j.markers){r||j.markers.removeAll();var e=ce(p.id,s),t=e.start,n=e.end;u({endTime:n,startTime:t,type:"setTimeFragment"}),t!=n&&j.markers.add([{time:t,duration:n-t,text:p.label}])}}),[p,B,x]),c.default.useEffect((function(){null!==j&&null!=j&&B&&j.currentTime(S,u({type:"resetClick"}))}),[w,B]),c.default.useEffect((function(){j&&le.current&&!j.isDisposed()&&0==J&&j.markers&&!r&&j.markers.removeAll()}),[J]);var de=function(e){e?j.controlBar.subsCapsButton.addClass("captions-on"):j.controlBar.subsCapsButton.removeClass("captions-on")},pe=function(){var e;if(te.current)if((null===(e=fe.current)||void 0===e?void 0:e.length)>0){var t=fe.current[f+1];if(t&&null!=t){l({canvasIndex:f+1,type:"switchCanvas"}),u({startTime:0,type:"setTimeFragment"}),u({currentTime:0,type:"setCurrentTime"});var r=se.current.filter((function(e){return e.canvasIndex===t.canvasIndex&&1===e.itemIndex})),n=null!=t.id?t:r[0],a=0;null!=n&&null!=n.id&&(a=ce(n.id,s).start),0===a?(Z(!0),l({item:n,type:"switchItem"})):l({item:null,type:"switchItem"}),M(R+1)}}else h&&(m+1<y.length?l({srcIndex:m+1,type:"setSrcIndex"}):l({srcIndex:0,type:"setSrcIndex"}),u({currentTime:0,type:"setCurrentTime"}))},ve=function(){if(null!==j&&ie.current&&!w){var e=me(j.currentTime());e&&re.current!=e.id?(ne(e.id),Z(!0),l({item:e,type:"switchItem"})):null===e&&j.markers&&he()}},he=function(){ue.current&&l({item:null,type:"switchItem"}),ne(null),Z(!1)},me=function(e){var t=e;h&&(t+=y[m].altStart);var r,n=jt(se.current);try{for(n.s();!(r=n.n()).done;){var a=r.value,i=a.id,u=a.isCanvas,o=Se(i);if(ke(v,o)==f){if(u)return a;var l=ce(i,s),c=oe(l,I);if(t>=l.start&&t<l.end&&c)return a}}}catch(e){n.e(e)}finally{n.f()}return null};return c.default.createElement("div",{"data-vjs-player":!0},t?c.default.createElement(c.default.Fragment,null,c.default.createElement("video",{id:"iiif-media-player","data-testid":"videojs-video-element","data-canvasindex":R,ref:function(e){return ee.current=e},className:"video-js vjs-big-play-centered"})):c.default.createElement("audio",{id:"iiif-media-player","data-testid":"videojs-audio-element","data-canvasindex":R,ref:function(e){return ee.current=e},className:"video-js vjs-default-skin"}))}function Pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}require("@silvermine/videojs-quality-selector")(d.default),Ot.propTypes={isVideo:K.bool,isPlaylist:K.bool,switchPlayer:K.func,videoJSOptions:K.object};var Mt=function(e){var t=e.enableFileDownload,r=void 0!==t&&t,n=e.enablePIP,i=void 0!==n&&n,u=L(),o=G(),l=H(),s=D(),f=a.useErrorBoundary().showBoundary,d=c.default.useState({error:"",sources:[],tracks:[],poster:null}),p=E(d,2),v=p[0],h=p[1],m=c.default.useState(!1),y=E(m,2),g=y[0],b=y[1],_=c.default.useState(W),x=E(_,2),w=x[0],k=x[1],T=c.default.useState(),j=E(T,2),S=j[0],I=j[1],C=c.default.useState(!1),O=E(C,2),P=O[0],R=O[1],M=c.default.useState(0),A=E(M,2),N=A[0],B=A[1],F=c.default.useState(),U=E(F,2),q=U[0],V=U[1],W=u.canvasIndex,z=u.manifest,$=u.canvasDuration,J=u.canvasIsEmpty,Z=u.srcIndex,K=u.targets,Y=u.playlist,X=u.autoAdvance,Q=o.playerFocusElement,ee=o.currentTime,te=o.isEnded,ae=c.default.useRef();ae.current=W;var ie=c.default.useRef();ie.current=X;var ue=c.default.useRef(null);c.default.useEffect((function(){if(z)try{oe(W);var e=function(e){try{var t=ne(e),r=!1,n=0;return t.length>0&&(r=t[0].isMultiCanvas(),n=t[0].getLastPageIndex()),{isMultiCanvas:r,lastIndex:n>-1?n:0}}catch(e){throw e}}(z),t=e.isMultiCanvas,r=e.lastIndex;R(t),B(r)}catch(e){f(e)}return function(){b(!1),k(0),l({player:null,type:"updatePlayer"})}}),[z,W,Z]);var oe=function(e,t){ue.current&&(clearTimeout(ue.current),ue.current=null);try{var r=Te({manifest:z,canvasIndex:e,srcIndex:Z}),n=r.isMultiSource,a=r.sources,i=r.tracks,u=r.canvasTargets,o=r.mediaType,c=r.canvas,d=r.error;V("video"===o),s({canvasTargets:u,type:"canvasTargets"}),s({canvasDuration:c.duration,type:"canvasDuration"}),s({isMultiSource:n,type:"hasMultipleItems"}),t&&((null==u?void 0:u.length)>0?l({currentTime:u[0].altStart,type:"setCurrentTime"}):l({currentTime:0,type:"setCurrentTime"})),h(Rt(Rt({},v),{},{error:d,sources:a,tracks:i})),le(c.duration,a,e,n),I(n),k(e),b(!d)}catch(e){f(e)}},le=function(e,t,r,n){var a={};if(n)l({start:0,end:e,type:"setPlayerRange"}),s({type:"setCanvasIsEmpty",isEmpty:!1});else if(0===t.length){l({type:"updatePlayer"});var i=Ie(z,r);h(Rt(Rt({},v),{},{error:i})),ie.current&&te&&(l({isEnded:!1,type:"setIsEnded"}),ue.current=setTimeout((function(){s({canvasIndex:ae.current+1,type:"switchCanvas"})}),re)),s({type:"setCanvasIsEmpty",isEmpty:!0})}else{var u=(null==t?void 0:t.length)>0?t.filter((function(e){return e.selected}))[0]:null;u&&(null==(a=ce(u.src,e))&&(a={start:0,end:e}),a.altStart=a.start,s({canvasTargets:[a],type:"canvasTargets"}),l({start:a.start,end:a.end,type:"setPlayerRange"}),s({type:"setCanvasIsEmpty",isEmpty:!1}))}},se=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";ae.current!=e&&s({canvasIndex:e,type:"switchCanvas"}),l({element:r,type:"setPlayerFocusElement"}),oe(e,t)},fe=J?{}:{aspectRatio:q?"16:9":"1:0",autoplay:!1,bigPlayButton:q,poster:q?Ie(z,W,!0):null,controls:!0,fluid:!0,language:"en",controlBar:{children:[P?"videoJSPreviousButton":"","playToggle",P?"videoJSNextButton":"","videoJSProgress","videoJSCurrentTime","timeDivider","durationDisplay","subsCapsButton","volumePanel","qualitySelector",i?"pictureInPictureToggle":"",r?"videoJSFileDownload":""],videoJSProgress:{duration:$,srcIndex:Z,targets:K,currentTime:ee||0,nextItemClicked:function(e,t){l({currentTime:t,type:"setCurrentTime"}),s({srcIndex:e,type:"setSrcIndex"})}},videoJSCurrentTime:{srcIndex:Z,targets:K,currentTime:ee||0},volumePanel:{inline:!q},fullscreenToggle:!!q},sources:S?v.sources[Z]:v.sources,tracks:v.tracks,userActions:{hotkeys:function(e){if(32!==e.which&&75!==e.which||(e.preventDefault(),this.paused()?this.play():this.pause()),77===e.which){e.preventDefault();var t=this.volume(),r=this.lastVolume_();if(0===t){var n=r<.1?.1:r;this.volume(n),this.muted(!1)}else this.muted(!this.muted())}70!==e.which||this.isAudio()||(e.preventDefault(),this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()),39===e.which&&(e.preventDefault(),this.currentTime(this.currentTime()+5)),37===e.which&&(e.preventDefault(),this.currentTime(this.currentTime()-5)),38===e.which&&(e.preventDefault(),this.volume(this.volume()+.1)),40===e.which&&(e.preventDefault(),this.volume(this.volume()-.1))}}};return r&&!J&&(fe=Rt(Rt({},fe),{},{controlBar:Rt(Rt({},fe.controlBar),{},{videoJSFileDownload:{title:"Download Files",controlText:"Alternate resource download",manifest:z,canvasIndex:W}})})),P&&!J&&(fe=Rt(Rt({},fe),{},{controlBar:Rt(Rt({},fe.controlBar),{},{videoJSPreviousButton:{canvasIndex:W,switchPlayer:se,playerFocusElement:Q},videoJSNextButton:{canvasIndex:W,lastCanvasIndex:N,switchPlayer:se,playerFocusElement:Q}})})),J?c.default.createElement("div",{"data-testid":"inaccessible-item",className:"ramp--inaccessible-item",key:"media-player-".concat(w),role:"presentation"},c.default.createElement("div",{className:"ramp--no-media-message"},c.default.createElement("div",{className:"message-display","data-testid":"inaccessible-message",dangerouslySetInnerHTML:{__html:v.error}}),c.default.createElement(Ot,Fe({isVideo:!0,switchPlayer:se},fe)))):g?c.default.createElement("div",{"data-testid":"media-player",className:"ramp--media_player",key:"media-player-".concat(w,"-").concat(Z),role:"presentation"},c.default.createElement(Ot,Fe({isVideo:q,isPlaylist:Y.isPlaylist,switchPlayer:se},fe))):null};Mt.propTypes={enableFileDownload:K.bool,enablePIP:K.bool};var At=function(e){var t=e.duration,r=e.label,n=e.itemIndex,a=e.canvasIndex,i=e.sectionRef,u=e.itemId,o=e.handleClick,l=c.default.useRef();return l.current=r,c.default.useEffect((function(){a+1===n&&i.current&&(i.current.className+=" active")}),[a]),null!=u?c.default.createElement("div",{className:"ramp--structured-nav__section","data-testid":"listitem-section",ref:i,"data-mediafrag":u,"data-label":l.current},c.default.createElement("button",{"data-testid":"listitem-section-button",ref:i,onClick:o},c.default.createElement("span",{className:"ramp--structured-nav__title",role:"listitem","aria-label":l.current},"".concat(n,". "),l.current,""!=t&&c.default.createElement("span",{className:"ramp--structured-nav__section-duration"},t)))):c.default.createElement("div",{className:"ramp--structured-nav__section","data-testid":"listitem-section",ref:i,"data-label":l.current},c.default.createElement("span",{className:"ramp--structured-nav__section-title",role:"listitem","data-testid":"listitem-section-span","aria-label":l.current},"".concat(n,". "),l.current,""!=t&&c.default.createElement("span",{className:"ramp--structured-nav__section-duration"},t)))};At.propTypes={itemIndex:K.number.isRequired,canvasIndex:K.number,duration:K.string.isRequired,label:K.string.isRequired,sectionRef:K.object.isRequired,itemId:K.string,handleClick:K.func.isRequired};var Nt=function(){return c.default.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{height:"0.75rem",width:"0.75rem"},className:"structure-item-locked"},c.default.createElement("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),c.default.createElement("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("g",{id:"SVGRepo_iconCarrier"},c.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 10.0546V8C5.25 4.27208 8.27208  1.25 12 1.25C15.7279 1.25 18.75 4.27208 18.75 8V10.0546C19.8648 10.1379 20.5907  10.348 21.1213 10.8787C22 11.7574 22 13.1716 22 16C22 18.8284 22 20.2426 21.1213  21.1213C20.2426 22 18.8284 22 16 22H8C5.17157 22 3.75736 22 2.87868 21.1213C2  20.2426 2 18.8284 2 16C2 13.1716 2 11.7574 2.87868 10.8787C3.40931 10.348 4.13525  10.1379 5.25 10.0546ZM6.75 8C6.75 5.10051 9.10051 2.75 12 2.75C14.8995 2.75 17.25  5.10051 17.25 8V10.0036C16.867 10 16.4515 10 16 10H8C7.54849 10 7.13301 10 6.75  10.0036V8Z",fill:"#000000"})))},Lt=function(e){var t=e.duration,r=e.id,n=e.isTitle,a=e.isCanvas,i=e.isClickable,u=e.isEmpty,o=e.label,l=e.items,s=e.itemIndex,f=e.rangeId,d=e.sectionRef,p=H(),v=L(),h=v.canvasIndex,m=v.currentNavItem,y=v.playlist.isPlaylist,g=c.default.useRef();g.current=r;var b=c.default.useRef();b.current=o;var _=l&&l.length>0?c.default.createElement(Dt,{items:l,sectionRef:d}):null,x=c.default.useRef(null),w=c.default.useCallback((function(e){e.preventDefault(),e.stopPropagation(),p({clickedUrl:g.current,type:"navClick"})}));c.default.useEffect((function(){(x.current&&y||x.current&&!a)&&(m&&m.id==g.current?x.current.className+=" active":null!=m&&m.id==g.current||!x.current.classList.contains("active")||(x.current.className-=" active"))}),[m]);return""!=o?c.default.createElement("li",{"data-testid":"list-item",ref:x,className:"ramp--structured-nav__list-item","aria-label":b.current,role:"listitem","data-label":b.current},c.default.createElement(c.default.Fragment,{key:f},a&&!y?c.default.createElement(c.default.Fragment,null,c.default.createElement(At,{itemIndex:s,canvasIndex:h,duration:t,label:o,sectionRef:d,itemId:g.current,handleClick:w})):c.default.createElement(c.default.Fragment,null,n?c.default.createElement("span",{className:"ramp--structured-nav__item-title",role:"listitem","aria-label":b.current},b.current):c.default.createElement(c.default.Fragment,{key:r},c.default.createElement("div",{className:"tracker"}),i?c.default.createElement(c.default.Fragment,null,u&&c.default.createElement(Nt,null),c.default.createElement("a",{href:g.current,onClick:w},"".concat(s,". "),b.current," ",t.length>0?" (".concat(t,")"):"")):c.default.createElement("span",{role:"listitem","aria-label":b.current},b.current)))),_):null};Lt.propTypes={duration:K.string.isRequired,id:K.string,isTitle:K.bool.isRequired,isCanvas:K.bool.isRequired,isClickable:K.bool.isRequired,isEmpty:K.bool.isRequired,label:K.string.isRequired,items:K.array.isRequired,itemIndex:K.number,rangeId:K.string.isRequired,sectionRef:K.object.isRequired};var Dt=c.default.memo((function(e){var t=e.items,r=e.sectionRef,n=c.default.createElement("ul",{"data-testid":"list",className:"ramp--structured-nav__list",role:"presentation"},t.map((function(e,t){if(e)return c.default.createElement(Lt,Fe({},e,{sectionRef:r,key:t}))})));return c.default.createElement(c.default.Fragment,null,n)}));Dt.propTypes={items:K.array.isRequired,sectionRef:K.object.isRequired};var Bt=function(){var e,r=D(),n=H(),i=G(),u=i.clickedUrl,o=i.isClicked,l=i.isPlaying,s=i.player,f=L(),d=f.canvasDuration,p=f.canvasIndex,v=f.hasMultiItems,h=f.targets,m=f.manifest,y=f.playlist,g=f.canvasIsEmpty,b=f.canvasSegments,_=a.useErrorBoundary().showBoundary,x=c.default.useRef(),w=c.default.useRef(g);return c.default.useEffect((function(){if(m)try{var e=Re(m),a=e.structures,i=e.timespans;x.current=a,r({structures:a,type:"setStructures"}),r({timespans:i,type:"setCanvasSegments"});var u=function(e){if(!t.parseManifest(e).getProperty("start"))return null;var r=t.parseManifest(e).getProperty("start"),n=function(t){var r=Ee(e);if(null!=r&&(null==r?void 0:r.length)>0)return r.findIndex((function(e){return e.canvasId===t}))};if(r)switch(r.type){case"Canvas":return{type:"C",canvas:n(r.id),time:0};case"SpecificResource":return{type:"SR",canvas:n(r.source),time:r.selector.t}}}(m);if(!u)return;"SR"==u.type&&n({currentTime:u.time,type:"setCurrentTime"}),r({canvasIndex:u.canvas,type:"switchCanvas"})}catch(e){_(e)}}),[m]),c.default.useEffect((function(){g&&y.isPlaylist&&r({item:b[p],type:"switchItem"})}),[g,p]),c.default.useEffect((function(){if(o){var e=b.filter((function(e){return e.id===u}));if((null==e?void 0:e.length)>0){var t=e[0],a=t.isCanvas,i=t.items;(!a||0==i.length&&a)&&r({item:e[0],type:"switchItem"})}var c=ke(m,Se(u)),f=ce(u,d);if(!f||null==f)return void console.error("StructuredNavigation -> invalid media fragment in structure item -> ",f);var y=f.start;if(v){var g=function(e,t,r){var n,a;return e.map((function(i,u){var o=u>0?e[u].altStart:0;isNaN(c)&&(c=r);var l=i.start,c=i.end,s=o+l,f=o+c;t.start>=s&&t.start<f&&(n=u,a=t.start-o)})),{srcIndex:n,fragmentStart:a}}(h,f,d),_=g.srcIndex;y=g.fragmentStart,r({srcIndex:_,type:"setSrcIndex"})}else p!=c&&c>-1&&(r({canvasIndex:c,type:"switchCanvas"}),w.current=x.current[c].isEmpty);s&&!w.current?(s.currentTime(y),n({startTime:f.start,endTime:f.end,type:"setTimeFragment"}),n({currentTime:y,type:"setCurrentTime"}),l&&s.userActive(!0)):w.current&&n({type:"resetClick"})}}),[o,s]),m?c.default.createElement("div",{"data-testid":"structured-nav",className:"ramp--structured-nav",key:Math.random(),role:"structure","aria-label":"Structural content"},(null===(e=x.current)||void 0===e?void 0:e.length)>0?x.current.map((function(e,t){return c.default.createElement(Dt,{items:[e],sectionRef:c.default.createRef(),key:t})})):c.default.createElement("p",{className:"ramp--no-structure"},"There are no structures in the manifest")):c.default.createElement("p",null,"No manifest - Please provide a valid manifest.")};Bt.propTypes={};var Ft=y((function(e){e.exports=function(e){if(Array.isArray(e))return _(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),Ut=y((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),qt=y((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports})),Vt=m(y((function(e){e.exports=function(e){return Ft(e)||Ut(e)||x(e)||qt()},e.exports.__esModule=!0,e.exports.default=e.exports})));y((function(e,t){(function(){var r,n="Expected a function",a="__lodash_hash_undefined__",i="__lodash_placeholder__",u=16,o=32,l=64,c=128,s=256,f=1/0,d=9007199254740991,p=NaN,v=4294967295,m=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",o],["partialRight",l],["rearg",s]],y="[object Arguments]",g="[object Array]",b="[object Boolean]",_="[object Date]",x="[object Error]",w="[object Function]",E="[object GeneratorFunction]",k="[object Map]",T="[object Number]",j="[object Object]",S="[object Promise]",I="[object RegExp]",C="[object Set]",O="[object String]",P="[object Symbol]",R="[object WeakMap]",M="[object ArrayBuffer]",A="[object DataView]",N="[object Float32Array]",L="[object Float64Array]",D="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",q="[object Uint8ClampedArray]",V="[object Uint16Array]",W="[object Uint32Array]",z=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$=/&(?:amp|lt|gt|quot|#39);/g,J=/[&<>"']/g,Z=RegExp($.source),K=RegExp(J.source),Y=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ne.source),ie=/^\s+/,ue=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,we=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",ke="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",je="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oe="[']",Pe="["+Ee+"]",Re="["+Ce+"]",Me="["+ke+"]",Ae="\\d+",Ne="["+Te+"]",Le="["+je+"]",De="[^"+Ee+Ce+Ae+Te+je+Se+"]",Be="\\ud83c[\\udffb-\\udfff]",Fe="[^"+Ee+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",qe="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Se+"]",We="\\u200d",ze="(?:"+Le+"|"+De+")",Ge="(?:"+Ve+"|"+De+")",He="(?:['](?:d|ll|m|re|s|t|ve))?",$e="(?:['](?:D|LL|M|RE|S|T|VE))?",Je="(?:"+Me+"|"+Be+")"+"?",Ze="["+Ie+"]?",Ke=Ze+Je+("(?:"+We+"(?:"+[Fe,Ue,qe].join("|")+")"+Ze+Je+")*"),Ye="(?:"+[Ne,Ue,qe].join("|")+")"+Ke,Xe="(?:"+[Fe+Me+"?",Me,Ue,qe,Pe].join("|")+")",Qe=RegExp(Oe,"g"),et=RegExp(Me,"g"),tt=RegExp(Be+"(?="+Be+")|"+Xe+Ke,"g"),rt=RegExp([Ve+"?"+Le+"+"+He+"(?="+[Re,Ve,"$"].join("|")+")",Ge+"+"+$e+"(?="+[Re,Ve+ze,"$"].join("|")+")",Ve+"?"+ze+"+"+He,Ve+"+"+$e,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ae,Ye].join("|"),"g"),nt=RegExp("["+We+Ee+ke+Ie+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ut=-1,ot={};ot[N]=ot[L]=ot[D]=ot[B]=ot[F]=ot[U]=ot[q]=ot[V]=ot[W]=!0,ot[y]=ot[g]=ot[M]=ot[b]=ot[A]=ot[_]=ot[x]=ot[w]=ot[k]=ot[T]=ot[j]=ot[I]=ot[C]=ot[O]=ot[R]=!1;var lt={};lt[y]=lt[g]=lt[M]=lt[A]=lt[b]=lt[_]=lt[N]=lt[L]=lt[D]=lt[B]=lt[F]=lt[k]=lt[T]=lt[j]=lt[I]=lt[C]=lt[O]=lt[P]=lt[U]=lt[q]=lt[V]=lt[W]=!0,lt[x]=lt[w]=lt[R]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,ft=parseInt,dt="object"==typeof h&&h&&h.Object===Object&&h,pt="object"==typeof self&&self&&self.Object===Object&&self,vt=dt||pt||Function("return this")(),ht=t&&!t.nodeType&&t,mt=ht&&e&&!e.nodeType&&e,yt=mt&&mt.exports===ht,gt=yt&&dt.process,bt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),_t=bt&&bt.isArrayBuffer,xt=bt&&bt.isDate,wt=bt&&bt.isMap,Et=bt&&bt.isRegExp,kt=bt&&bt.isSet,Tt=bt&&bt.isTypedArray;function jt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function St(e,t,r,n){for(var a=-1,i=null==e?0:e.length;++a<i;){var u=e[a];t(n,u,r(u),e)}return n}function It(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Ct(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Ot(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Pt(e,t){for(var r=-1,n=null==e?0:e.length,a=0,i=[];++r<n;){var u=e[r];t(u,r,e)&&(i[a++]=u)}return i}function Rt(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Mt(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}function At(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}function Nt(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function Lt(e,t,r,n){var a=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++a]);++a<i;)r=t(r,e[a],a,e);return r}function Dt(e,t,r,n){var a=null==e?0:e.length;for(n&&a&&(r=e[--a]);a--;)r=t(r,e[a],a,e);return r}function Bt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Ft=Ht("length");function Ut(e,t,r){var n;return r(e,(function(e,r,a){if(t(e,r,a))return n=r,!1})),n}function qt(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function Vt(e,t,r){return t==t?function(e,t,r){var n=r-1,a=e.length;for(;++n<a;)if(e[n]===t)return n;return-1}(e,t,r):qt(e,zt,r)}function Wt(e,t,r,n){for(var a=r-1,i=e.length;++a<i;)if(n(e[a],t))return a;return-1}function zt(e){return e!=e}function Gt(e,t){var r=null==e?0:e.length;return r?Zt(e,t)/r:p}function Ht(e){return function(t){return null==t?r:t[e]}}function $t(e){return function(t){return null==e?r:e[t]}}function Jt(e,t,r,n,a){return a(e,(function(e,a,i){r=n?(n=!1,e):t(r,e,a,i)})),r}function Zt(e,t){for(var n,a=-1,i=e.length;++a<i;){var u=t(e[a]);u!==r&&(n=n===r?u:n+u)}return n}function Kt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Yt(e){return e?e.slice(0,vr(e)+1).replace(ie,""):e}function Xt(e){return function(t){return e(t)}}function Qt(e,t){return At(t,(function(t){return e[t]}))}function er(e,t){return e.has(t)}function tr(e,t){for(var r=-1,n=e.length;++r<n&&Vt(t,e[r],0)>-1;);return r}function rr(e,t){for(var r=e.length;r--&&Vt(t,e[r],0)>-1;);return r}var nr=$t({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),ar=$t({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ir(e){return"\\"+ct[e]}function ur(e){return nt.test(e)}function or(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function lr(e,t){return function(r){return e(t(r))}}function cr(e,t){for(var r=-1,n=e.length,a=0,u=[];++r<n;){var o=e[r];o!==t&&o!==i||(e[r]=i,u[a++]=r)}return u}function sr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function fr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function dr(e){return ur(e)?function(e){var t=tt.lastIndex=0;for(;tt.test(e);)++t;return t}(e):Ft(e)}function pr(e){return ur(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.split("")}(e)}function vr(e){for(var t=e.length;t--&&ue.test(e.charAt(t)););return t}var hr=$t({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mr=function e(t){var h,ue=(t=null==t?vt:mr.defaults(vt.Object(),t,mr.pick(vt,it))).Array,Ee=t.Date,ke=t.Error,Te=t.Function,je=t.Math,Se=t.Object,Ie=t.RegExp,Ce=t.String,Oe=t.TypeError,Pe=ue.prototype,Re=Te.prototype,Me=Se.prototype,Ae=t["__core-js_shared__"],Ne=Re.toString,Le=Me.hasOwnProperty,De=0,Be=(h=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",Fe=Me.toString,Ue=Ne.call(Se),qe=vt._,Ve=Ie("^"+Ne.call(Le).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=yt?t.Buffer:r,ze=t.Symbol,Ge=t.Uint8Array,He=We?We.allocUnsafe:r,$e=lr(Se.getPrototypeOf,Se),Je=Se.create,Ze=Me.propertyIsEnumerable,Ke=Pe.splice,Ye=ze?ze.isConcatSpreadable:r,Xe=ze?ze.iterator:r,tt=ze?ze.toStringTag:r,nt=function(){try{var e=di(Se,"defineProperty");return e({},"",{}),e}catch(e){}}(),ct=t.clearTimeout!==vt.clearTimeout&&t.clearTimeout,dt=Ee&&Ee.now!==vt.Date.now&&Ee.now,pt=t.setTimeout!==vt.setTimeout&&t.setTimeout,ht=je.ceil,mt=je.floor,gt=Se.getOwnPropertySymbols,bt=We?We.isBuffer:r,Ft=t.isFinite,$t=Pe.join,yr=lr(Se.keys,Se),gr=je.max,br=je.min,_r=Ee.now,xr=t.parseInt,wr=je.random,Er=Pe.reverse,kr=di(t,"DataView"),Tr=di(t,"Map"),jr=di(t,"Promise"),Sr=di(t,"Set"),Ir=di(t,"WeakMap"),Cr=di(Se,"create"),Or=Ir&&new Ir,Pr={},Rr=Bi(kr),Mr=Bi(Tr),Ar=Bi(jr),Nr=Bi(Sr),Lr=Bi(Ir),Dr=ze?ze.prototype:r,Br=Dr?Dr.valueOf:r,Fr=Dr?Dr.toString:r;function Ur(e){if(to(e)&&!zu(e)&&!(e instanceof zr)){if(e instanceof Wr)return e;if(Le.call(e,"__wrapped__"))return Fi(e)}return new Wr(e)}var qr=function(){function e(){}return function(t){if(!eo(t))return{};if(Je)return Je(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Vr(){}function Wr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function zr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Gr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $r(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Jr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new $r;++t<r;)this.add(e[t])}function Zr(e){var t=this.__data__=new Hr(e);this.size=t.size}function Kr(e,t){var r=zu(e),n=!r&&Wu(e),a=!r&&!n&&Ju(e),i=!r&&!n&&!a&&co(e),u=r||n||a||i,o=u?Kt(e.length,Ce):[],l=o.length;for(var c in e)!t&&!Le.call(e,c)||u&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bi(c,l))||o.push(c);return o}function Yr(e){var t=e.length;return t?e[Zn(0,t-1)]:r}function Xr(e,t){return Ni(Oa(e),ln(t,0,e.length))}function Qr(e){return Ni(Oa(e))}function en(e,t,n){(n!==r&&!Uu(e[t],n)||n===r&&!(t in e))&&un(e,t,n)}function tn(e,t,n){var a=e[t];Le.call(e,t)&&Uu(a,n)&&(n!==r||t in e)||un(e,t,n)}function rn(e,t){for(var r=e.length;r--;)if(Uu(e[r][0],t))return r;return-1}function nn(e,t,r,n){return pn(e,(function(e,a,i){t(n,e,r(e),i)})),n}function an(e,t){return e&&Pa(t,Ro(t),e)}function un(e,t,r){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function on(e,t){for(var n=-1,a=t.length,i=ue(a),u=null==e;++n<a;)i[n]=u?r:So(e,t[n]);return i}function ln(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function cn(e,t,n,a,i,u){var o,l=1&t,c=2&t,s=4&t;if(n&&(o=i?n(e,a,i,u):n(e)),o!==r)return o;if(!eo(e))return e;var f=zu(e);if(f){if(o=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!l)return Oa(e,o)}else{var d=hi(e),p=d==w||d==E;if(Ju(e))return ka(e,l);if(d==j||d==y||p&&!i){if(o=c||p?{}:yi(e),!l)return c?function(e,t){return Pa(e,vi(e),t)}(e,function(e,t){return e&&Pa(t,Mo(t),e)}(o,e)):function(e,t){return Pa(e,pi(e),t)}(e,an(o,e))}else{if(!lt[d])return i?e:{};o=function(e,t,r){var n=e.constructor;switch(t){case M:return Ta(e);case b:case _:return new n(+e);case A:return function(e,t){var r=t?Ta(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case N:case L:case D:case B:case F:case U:case q:case V:case W:return ja(e,r);case k:return new n;case T:case O:return new n(e);case I:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case C:return new n;case P:return a=e,Br?Se(Br.call(a)):{}}var a}(e,d,l)}}u||(u=new Zr);var v=u.get(e);if(v)return v;u.set(e,o),uo(e)?e.forEach((function(r){o.add(cn(r,t,n,r,e,u))})):ro(e)&&e.forEach((function(r,a){o.set(a,cn(r,t,n,a,e,u))}));var h=f?r:(s?c?ii:ai:c?Mo:Ro)(e);return It(h||e,(function(r,a){h&&(r=e[a=r]),tn(o,a,cn(r,t,n,a,e,u))})),o}function sn(e,t,n){var a=n.length;if(null==e)return!a;for(e=Se(e);a--;){var i=n[a],u=t[i],o=e[i];if(o===r&&!(i in e)||!u(o))return!1}return!0}function fn(e,t,a){if("function"!=typeof e)throw new Oe(n);return Pi((function(){e.apply(r,a)}),t)}function dn(e,t,r,n){var a=-1,i=Rt,u=!0,o=e.length,l=[],c=t.length;if(!o)return l;r&&(t=At(t,Xt(r))),n?(i=Mt,u=!1):t.length>=200&&(i=er,u=!1,t=new Jr(t));e:for(;++a<o;){var s=e[a],f=null==r?s:r(s);if(s=n||0!==s?s:0,u&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;l.push(s)}else i(t,f,n)||l.push(s)}return l}Ur.templateSettings={escape:Y,evaluate:X,interpolate:Q,variable:"",imports:{_:Ur}},Ur.prototype=Vr.prototype,Ur.prototype.constructor=Ur,Wr.prototype=qr(Vr.prototype),Wr.prototype.constructor=Wr,zr.prototype=qr(Vr.prototype),zr.prototype.constructor=zr,Gr.prototype.clear=function(){this.__data__=Cr?Cr(null):{},this.size=0},Gr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gr.prototype.get=function(e){var t=this.__data__;if(Cr){var n=t[e];return n===a?r:n}return Le.call(t,e)?t[e]:r},Gr.prototype.has=function(e){var t=this.__data__;return Cr?t[e]!==r:Le.call(t,e)},Gr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cr&&t===r?a:t,this},Hr.prototype.clear=function(){this.__data__=[],this.size=0},Hr.prototype.delete=function(e){var t=this.__data__,r=rn(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ke.call(t,r,1),--this.size,!0)},Hr.prototype.get=function(e){var t=this.__data__,n=rn(t,e);return n<0?r:t[n][1]},Hr.prototype.has=function(e){return rn(this.__data__,e)>-1},Hr.prototype.set=function(e,t){var r=this.__data__,n=rn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},$r.prototype.clear=function(){this.size=0,this.__data__={hash:new Gr,map:new(Tr||Hr),string:new Gr}},$r.prototype.delete=function(e){var t=si(this,e).delete(e);return this.size-=t?1:0,t},$r.prototype.get=function(e){return si(this,e).get(e)},$r.prototype.has=function(e){return si(this,e).has(e)},$r.prototype.set=function(e,t){var r=si(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Jr.prototype.add=Jr.prototype.push=function(e){return this.__data__.set(e,a),this},Jr.prototype.has=function(e){return this.__data__.has(e)},Zr.prototype.clear=function(){this.__data__=new Hr,this.size=0},Zr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Zr.prototype.get=function(e){return this.__data__.get(e)},Zr.prototype.has=function(e){return this.__data__.has(e)},Zr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Hr){var n=r.__data__;if(!Tr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new $r(n)}return r.set(e,t),this.size=r.size,this};var pn=Aa(xn),vn=Aa(wn,!0);function hn(e,t){var r=!0;return pn(e,(function(e,n,a){return r=!!t(e,n,a)})),r}function mn(e,t,n){for(var a=-1,i=e.length;++a<i;){var u=e[a],o=t(u);if(null!=o&&(l===r?o==o&&!lo(o):n(o,l)))var l=o,c=u}return c}function yn(e,t){var r=[];return pn(e,(function(e,n,a){t(e,n,a)&&r.push(e)})),r}function gn(e,t,r,n,a){var i=-1,u=e.length;for(r||(r=gi),a||(a=[]);++i<u;){var o=e[i];t>0&&r(o)?t>1?gn(o,t-1,r,n,a):Nt(a,o):n||(a[a.length]=o)}return a}var bn=Na(),_n=Na(!0);function xn(e,t){return e&&bn(e,t,Ro)}function wn(e,t){return e&&_n(e,t,Ro)}function En(e,t){return Pt(t,(function(t){return Yu(e[t])}))}function kn(e,t){for(var n=0,a=(t=_a(t,e)).length;null!=e&&n<a;)e=e[Di(t[n++])];return n&&n==a?e:r}function Tn(e,t,r){var n=t(e);return zu(e)?n:Nt(n,r(e))}function jn(e){return null==e?e===r?"[object Undefined]":"[object Null]":tt&&tt in Se(e)?function(e){var t=Le.call(e,tt),n=e[tt];try{e[tt]=r;var a=!0}catch(e){}var i=Fe.call(e);a&&(t?e[tt]=n:delete e[tt]);return i}(e):function(e){return Fe.call(e)}(e)}function Sn(e,t){return e>t}function In(e,t){return null!=e&&Le.call(e,t)}function Cn(e,t){return null!=e&&t in Se(e)}function On(e,t,n){for(var a=n?Mt:Rt,i=e[0].length,u=e.length,o=u,l=ue(u),c=1/0,s=[];o--;){var f=e[o];o&&t&&(f=At(f,Xt(t))),c=br(f.length,c),l[o]=!n&&(t||i>=120&&f.length>=120)?new Jr(o&&f):r}f=e[0];var d=-1,p=l[0];e:for(;++d<i&&s.length<c;){var v=f[d],h=t?t(v):v;if(v=n||0!==v?v:0,!(p?er(p,h):a(s,h,n))){for(o=u;--o;){var m=l[o];if(!(m?er(m,h):a(e[o],h,n)))continue e}p&&p.push(h),s.push(v)}}return s}function Pn(e,t,n){var a=null==(e=Ii(e,t=_a(t,e)))?e:e[Di(Ki(t))];return null==a?r:jt(a,e,n)}function Rn(e){return to(e)&&jn(e)==y}function Mn(e,t,n,a,i){return e===t||(null==e||null==t||!to(e)&&!to(t)?e!=e&&t!=t:function(e,t,n,a,i,u){var o=zu(e),l=zu(t),c=o?g:hi(e),s=l?g:hi(t),f=(c=c==y?j:c)==j,d=(s=s==y?j:s)==j,p=c==s;if(p&&Ju(e)){if(!Ju(t))return!1;o=!0,f=!1}if(p&&!f)return u||(u=new Zr),o||co(e)?ri(e,t,n,a,i,u):function(e,t,r,n,a,i,u){switch(r){case A:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!i(new Ge(e),new Ge(t)));case b:case _:case T:return Uu(+e,+t);case x:return e.name==t.name&&e.message==t.message;case I:case O:return e==t+"";case k:var o=or;case C:var l=1&n;if(o||(o=sr),e.size!=t.size&&!l)return!1;var c=u.get(e);if(c)return c==t;n|=2,u.set(e,t);var s=ri(o(e),o(t),n,a,i,u);return u.delete(e),s;case P:if(Br)return Br.call(e)==Br.call(t)}return!1}(e,t,c,n,a,i,u);if(!(1&n)){var v=f&&Le.call(e,"__wrapped__"),h=d&&Le.call(t,"__wrapped__");if(v||h){var m=v?e.value():e,w=h?t.value():t;return u||(u=new Zr),i(m,w,n,a,u)}}if(!p)return!1;return u||(u=new Zr),function(e,t,n,a,i,u){var o=1&n,l=ai(e),c=l.length,s=ai(t),f=s.length;if(c!=f&&!o)return!1;var d=c;for(;d--;){var p=l[d];if(!(o?p in t:Le.call(t,p)))return!1}var v=u.get(e),h=u.get(t);if(v&&h)return v==t&&h==e;var m=!0;u.set(e,t),u.set(t,e);var y=o;for(;++d<c;){var g=e[p=l[d]],b=t[p];if(a)var _=o?a(b,g,p,t,e,u):a(g,b,p,e,t,u);if(!(_===r?g===b||i(g,b,n,a,u):_)){m=!1;break}y||(y="constructor"==p)}if(m&&!y){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return u.delete(e),u.delete(t),m}(e,t,n,a,i,u)}(e,t,n,a,Mn,i))}function An(e,t,n,a){var i=n.length,u=i,o=!a;if(null==e)return!u;for(e=Se(e);i--;){var l=n[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<u;){var c=(l=n[i])[0],s=e[c],f=l[1];if(o&&l[2]){if(s===r&&!(c in e))return!1}else{var d=new Zr;if(a)var p=a(s,f,c,e,t,d);if(!(p===r?Mn(f,s,3,a,d):p))return!1}}return!0}function Nn(e){return!(!eo(e)||(t=e,Be&&Be in t))&&(Yu(e)?Ve:ye).test(Bi(e));var t}function Ln(e){return"function"==typeof e?e:null==e?al:"object"==typeof e?zu(e)?Vn(e[0],e[1]):qn(e):pl(e)}function Dn(e){if(!ki(e))return yr(e);var t=[];for(var r in Se(e))Le.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Bn(e){if(!eo(e))return function(e){var t=[];if(null!=e)for(var r in Se(e))t.push(r);return t}(e);var t=ki(e),r=[];for(var n in e)("constructor"!=n||!t&&Le.call(e,n))&&r.push(n);return r}function Fn(e,t){return e<t}function Un(e,t){var r=-1,n=Hu(e)?ue(e.length):[];return pn(e,(function(e,a,i){n[++r]=t(e,a,i)})),n}function qn(e){var t=fi(e);return 1==t.length&&t[0][2]?ji(t[0][0],t[0][1]):function(r){return r===e||An(r,e,t)}}function Vn(e,t){return xi(e)&&Ti(t)?ji(Di(e),t):function(n){var a=So(n,e);return a===r&&a===t?Io(n,e):Mn(t,a,3)}}function Wn(e,t,n,a,i){e!==t&&bn(t,(function(u,o){if(i||(i=new Zr),eo(u))!function(e,t,n,a,i,u,o){var l=Ci(e,n),c=Ci(t,n),s=o.get(c);if(s)return void en(e,n,s);var f=u?u(l,c,n+"",e,t,o):r,d=f===r;if(d){var p=zu(c),v=!p&&Ju(c),h=!p&&!v&&co(c);f=c,p||v||h?zu(l)?f=l:$u(l)?f=Oa(l):v?(d=!1,f=ka(c,!0)):h?(d=!1,f=ja(c,!0)):f=[]:ao(c)||Wu(c)?(f=l,Wu(l)?f=go(l):eo(l)&&!Yu(l)||(f=yi(c))):d=!1}d&&(o.set(c,f),i(f,c,a,u,o),o.delete(c));en(e,n,f)}(e,t,o,n,Wn,a,i);else{var l=a?a(Ci(e,o),u,o+"",e,t,i):r;l===r&&(l=u),en(e,o,l)}}),Mo)}function zn(e,t){var n=e.length;if(n)return bi(t+=t<0?n:0,n)?e[t]:r}function Gn(e,t,r){t=t.length?At(t,(function(e){return zu(e)?function(t){return kn(t,1===e.length?e[0]:e)}:e})):[al];var n=-1;t=At(t,Xt(ci()));var a=Un(e,(function(e,r,a){var i=At(t,(function(t){return t(e)}));return{criteria:i,index:++n,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(a,(function(e,t){return function(e,t,r){var n=-1,a=e.criteria,i=t.criteria,u=a.length,o=r.length;for(;++n<u;){var l=Sa(a[n],i[n]);if(l)return n>=o?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function Hn(e,t,r){for(var n=-1,a=t.length,i={};++n<a;){var u=t[n],o=kn(e,u);r(o,u)&&ea(i,_a(u,e),o)}return i}function $n(e,t,r,n){var a=n?Wt:Vt,i=-1,u=t.length,o=e;for(e===t&&(t=Oa(t)),r&&(o=At(e,Xt(r)));++i<u;)for(var l=0,c=t[i],s=r?r(c):c;(l=a(o,s,l,n))>-1;)o!==e&&Ke.call(o,l,1),Ke.call(e,l,1);return e}function Jn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==i){var i=a;bi(a)?Ke.call(e,a,1):da(e,a)}}return e}function Zn(e,t){return e+mt(wr()*(t-e+1))}function Kn(e,t){var r="";if(!e||t<1||t>d)return r;do{t%2&&(r+=e),(t=mt(t/2))&&(e+=e)}while(t);return r}function Yn(e,t){return Ri(Si(e,t,al),e+"")}function Xn(e){return Yr(qo(e))}function Qn(e,t){var r=qo(e);return Ni(r,ln(t,0,r.length))}function ea(e,t,n,a){if(!eo(e))return e;for(var i=-1,u=(t=_a(t,e)).length,o=u-1,l=e;null!=l&&++i<u;){var c=Di(t[i]),s=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=o){var f=l[c];(s=a?a(f,c,l):r)===r&&(s=eo(f)?f:bi(t[i+1])?[]:{})}tn(l,c,s),l=l[c]}return e}var ta=Or?function(e,t){return Or.set(e,t),e}:al,ra=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:al;function na(e){return Ni(qo(e))}function aa(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=ue(a);++n<a;)i[n]=e[n+t];return i}function ia(e,t){var r;return pn(e,(function(e,n,a){return!(r=t(e,n,a))})),!!r}function ua(e,t,r){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;n<a;){var i=n+a>>>1,u=e[i];null!==u&&!lo(u)&&(r?u<=t:u<t)?n=i+1:a=i}return a}return oa(e,t,al,r)}function oa(e,t,n,a){var i=0,u=null==e?0:e.length;if(0===u)return 0;for(var o=(t=n(t))!=t,l=null===t,c=lo(t),s=t===r;i<u;){var f=mt((i+u)/2),d=n(e[f]),p=d!==r,v=null===d,h=d==d,m=lo(d);if(o)var y=a||h;else y=s?h&&(a||p):l?h&&p&&(a||!v):c?h&&p&&!v&&(a||!m):!v&&!m&&(a?d<=t:d<t);y?i=f+1:u=f}return br(u,4294967294)}function la(e,t){for(var r=-1,n=e.length,a=0,i=[];++r<n;){var u=e[r],o=t?t(u):u;if(!r||!Uu(o,l)){var l=o;i[a++]=0===u?0:u}}return i}function ca(e){return"number"==typeof e?e:lo(e)?p:+e}function sa(e){if("string"==typeof e)return e;if(zu(e))return At(e,sa)+"";if(lo(e))return Fr?Fr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fa(e,t,r){var n=-1,a=Rt,i=e.length,u=!0,o=[],l=o;if(r)u=!1,a=Mt;else if(i>=200){var c=t?null:Ka(e);if(c)return sr(c);u=!1,a=er,l=new Jr}else l=t?[]:o;e:for(;++n<i;){var s=e[n],f=t?t(s):s;if(s=r||0!==s?s:0,u&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),o.push(s)}else a(l,f,r)||(l!==o&&l.push(f),o.push(s))}return o}function da(e,t){return null==(e=Ii(e,t=_a(t,e)))||delete e[Di(Ki(t))]}function pa(e,t,r,n){return ea(e,t,r(kn(e,t)),n)}function va(e,t,r,n){for(var a=e.length,i=n?a:-1;(n?i--:++i<a)&&t(e[i],i,e););return r?aa(e,n?0:i,n?i+1:a):aa(e,n?i+1:0,n?a:i)}function ha(e,t){var r=e;return r instanceof zr&&(r=r.value()),Lt(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),r)}function ma(e,t,r){var n=e.length;if(n<2)return n?fa(e[0]):[];for(var a=-1,i=ue(n);++a<n;)for(var u=e[a],o=-1;++o<n;)o!=a&&(i[a]=dn(i[a]||u,e[o],t,r));return fa(gn(i,1),t,r)}function ya(e,t,n){for(var a=-1,i=e.length,u=t.length,o={};++a<i;){var l=a<u?t[a]:r;n(o,e[a],l)}return o}function ga(e){return $u(e)?e:[]}function ba(e){return"function"==typeof e?e:al}function _a(e,t){return zu(e)?e:xi(e,t)?[e]:Li(bo(e))}var xa=Yn;function wa(e,t,n){var a=e.length;return n=n===r?a:n,!t&&n>=a?e:aa(e,t,n)}var Ea=ct||function(e){return vt.clearTimeout(e)};function ka(e,t){if(t)return e.slice();var r=e.length,n=He?He(r):new e.constructor(r);return e.copy(n),n}function Ta(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function ja(e,t){var r=t?Ta(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Sa(e,t){if(e!==t){var n=e!==r,a=null===e,i=e==e,u=lo(e),o=t!==r,l=null===t,c=t==t,s=lo(t);if(!l&&!s&&!u&&e>t||u&&o&&c&&!l&&!s||a&&o&&c||!n&&c||!i)return 1;if(!a&&!u&&!s&&e<t||s&&n&&i&&!a&&!u||l&&n&&i||!o&&i||!c)return-1}return 0}function Ia(e,t,r,n){for(var a=-1,i=e.length,u=r.length,o=-1,l=t.length,c=gr(i-u,0),s=ue(l+c),f=!n;++o<l;)s[o]=t[o];for(;++a<u;)(f||a<i)&&(s[r[a]]=e[a]);for(;c--;)s[o++]=e[a++];return s}function Ca(e,t,r,n){for(var a=-1,i=e.length,u=-1,o=r.length,l=-1,c=t.length,s=gr(i-o,0),f=ue(s+c),d=!n;++a<s;)f[a]=e[a];for(var p=a;++l<c;)f[p+l]=t[l];for(;++u<o;)(d||a<i)&&(f[p+r[u]]=e[a++]);return f}function Oa(e,t){var r=-1,n=e.length;for(t||(t=ue(n));++r<n;)t[r]=e[r];return t}function Pa(e,t,n,a){var i=!n;n||(n={});for(var u=-1,o=t.length;++u<o;){var l=t[u],c=a?a(n[l],e[l],l,n,e):r;c===r&&(c=e[l]),i?un(n,l,c):tn(n,l,c)}return n}function Ra(e,t){return function(r,n){var a=zu(r)?St:nn,i=t?t():{};return a(r,e,ci(n,2),i)}}function Ma(e){return Yn((function(t,n){var a=-1,i=n.length,u=i>1?n[i-1]:r,o=i>2?n[2]:r;for(u=e.length>3&&"function"==typeof u?(i--,u):r,o&&_i(n[0],n[1],o)&&(u=i<3?r:u,i=1),t=Se(t);++a<i;){var l=n[a];l&&e(t,l,a,u)}return t}))}function Aa(e,t){return function(r,n){if(null==r)return r;if(!Hu(r))return e(r,n);for(var a=r.length,i=t?a:-1,u=Se(r);(t?i--:++i<a)&&!1!==n(u[i],i,u););return r}}function Na(e){return function(t,r,n){for(var a=-1,i=Se(t),u=n(t),o=u.length;o--;){var l=u[e?o:++a];if(!1===r(i[l],l,i))break}return t}}function La(e){return function(t){var n=ur(t=bo(t))?pr(t):r,a=n?n[0]:t.charAt(0),i=n?wa(n,1).join(""):t.slice(1);return a[e]()+i}}function Da(e){return function(t){return Lt(Xo(zo(t).replace(Qe,"")),e,"")}}function Ba(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=qr(e.prototype),n=e.apply(r,t);return eo(n)?n:r}}function Fa(e){return function(t,n,a){var i=Se(t);if(!Hu(t)){var u=ci(n,3);t=Ro(t),n=function(e){return u(i[e],e,i)}}var o=e(t,n,a);return o>-1?i[u?t[o]:o]:r}}function Ua(e){return ni((function(t){var a=t.length,i=a,u=Wr.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new Oe(n);if(u&&!l&&"wrapper"==oi(o))var l=new Wr([],!0)}for(i=l?i:a;++i<a;){var c=oi(o=t[i]),s="wrapper"==c?ui(o):r;l=s&&wi(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?l[oi(s[0])].apply(l,s[3]):1==o.length&&wi(o)?l[c]():l.thru(o)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&zu(r))return l.plant(r).value();for(var n=0,i=a?t[n].apply(this,e):r;++n<a;)i=t[n].call(this,i);return i}}))}function qa(e,t,n,a,i,u,o,l,s,f){var d=t&c,p=1&t,v=2&t,h=24&t,m=512&t,y=v?r:Ba(e);return function c(){for(var g=arguments.length,b=ue(g),_=g;_--;)b[_]=arguments[_];if(h)var x=li(c),w=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(b,x);if(a&&(b=Ia(b,a,i,h)),u&&(b=Ca(b,u,o,h)),g-=w,h&&g<f){var E=cr(b,x);return Ja(e,t,qa,c.placeholder,n,b,E,l,s,f-g)}var k=p?n:this,T=v?k[e]:e;return g=b.length,l?b=function(e,t){var n=e.length,a=br(t.length,n),i=Oa(e);for(;a--;){var u=t[a];e[a]=bi(u,n)?i[u]:r}return e}(b,l):m&&g>1&&b.reverse(),d&&s<g&&(b.length=s),this&&this!==vt&&this instanceof c&&(T=y||Ba(T)),T.apply(k,b)}}function Va(e,t){return function(r,n){return function(e,t,r,n){return xn(e,(function(e,a,i){t(n,r(e),a,i)})),n}(r,e,t(n),{})}}function Wa(e,t){return function(n,a){var i;if(n===r&&a===r)return t;if(n!==r&&(i=n),a!==r){if(i===r)return a;"string"==typeof n||"string"==typeof a?(n=sa(n),a=sa(a)):(n=ca(n),a=ca(a)),i=e(n,a)}return i}}function za(e){return ni((function(t){return t=At(t,Xt(ci())),Yn((function(r){var n=this;return e(t,(function(e){return jt(e,n,r)}))}))}))}function Ga(e,t){var n=(t=t===r?" ":sa(t)).length;if(n<2)return n?Kn(t,e):t;var a=Kn(t,ht(e/dr(t)));return ur(t)?wa(pr(a),0,e).join(""):a.slice(0,e)}function Ha(e){return function(t,n,a){return a&&"number"!=typeof a&&_i(t,n,a)&&(n=a=r),t=vo(t),n===r?(n=t,t=0):n=vo(n),function(e,t,r,n){for(var a=-1,i=gr(ht((t-e)/(r||1)),0),u=ue(i);i--;)u[n?i:++a]=e,e+=r;return u}(t,n,a=a===r?t<n?1:-1:vo(a),e)}}function $a(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=yo(t),r=yo(r)),e(t,r)}}function Ja(e,t,n,a,i,u,c,s,f,d){var p=8&t;t|=p?o:l,4&(t&=~(p?l:o))||(t&=-4);var v=[e,t,i,p?u:r,p?c:r,p?r:u,p?r:c,s,f,d],h=n.apply(r,v);return wi(e)&&Oi(h,v),h.placeholder=a,Mi(h,e,t)}function Za(e){var t=je[e];return function(e,r){if(e=yo(e),(r=null==r?0:br(ho(r),292))&&Ft(e)){var n=(bo(e)+"e").split("e");return+((n=(bo(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Ka=Sr&&1/sr(new Sr([,-0]))[1]==f?function(e){return new Sr(e)}:cl;function Ya(e){return function(t){var r=hi(t);return r==k?or(t):r==C?fr(t):function(e,t){return At(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xa(e,t,a,f,d,p,v,h){var m=2&t;if(!m&&"function"!=typeof e)throw new Oe(n);var y=f?f.length:0;if(y||(t&=-97,f=d=r),v=v===r?v:gr(ho(v),0),h=h===r?h:ho(h),y-=d?d.length:0,t&l){var g=f,b=d;f=d=r}var _=m?r:ui(e),x=[e,t,a,f,d,g,b,p,v,h];if(_&&function(e,t){var r=e[1],n=t[1],a=r|n,u=a<131,o=n==c&&8==r||n==c&&r==s&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!u&&!o)return e;1&n&&(e[2]=t[2],a|=1&r?0:4);var l=t[3];if(l){var f=e[3];e[3]=f?Ia(f,l,t[4]):l,e[4]=f?cr(e[3],i):t[4]}(l=t[5])&&(f=e[5],e[5]=f?Ca(f,l,t[6]):l,e[6]=f?cr(e[5],i):t[6]);(l=t[7])&&(e[7]=l);n&c&&(e[8]=null==e[8]?t[8]:br(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(x,_),e=x[0],t=x[1],a=x[2],f=x[3],d=x[4],!(h=x[9]=x[9]===r?m?0:e.length:gr(x[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||t==u?function(e,t,n){var a=Ba(e);return function i(){for(var u=arguments.length,o=ue(u),l=u,c=li(i);l--;)o[l]=arguments[l];var s=u<3&&o[0]!==c&&o[u-1]!==c?[]:cr(o,c);return(u-=s.length)<n?Ja(e,t,qa,i.placeholder,r,o,s,r,r,n-u):jt(this&&this!==vt&&this instanceof i?a:e,this,o)}}(e,t,h):t!=o&&33!=t||d.length?qa.apply(r,x):function(e,t,r,n){var a=1&t,i=Ba(e);return function t(){for(var u=-1,o=arguments.length,l=-1,c=n.length,s=ue(c+o),f=this&&this!==vt&&this instanceof t?i:e;++l<c;)s[l]=n[l];for(;o--;)s[l++]=arguments[++u];return jt(f,a?r:this,s)}}(e,t,a,f);else var w=function(e,t,r){var n=1&t,a=Ba(e);return function t(){return(this&&this!==vt&&this instanceof t?a:e).apply(n?r:this,arguments)}}(e,t,a);return Mi((_?ta:Oi)(w,x),e,t)}function Qa(e,t,n,a){return e===r||Uu(e,Me[n])&&!Le.call(a,n)?t:e}function ei(e,t,n,a,i,u){return eo(e)&&eo(t)&&(u.set(t,e),Wn(e,t,r,ei,u),u.delete(t)),e}function ti(e){return ao(e)?r:e}function ri(e,t,n,a,i,u){var o=1&n,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var s=u.get(e),f=u.get(t);if(s&&f)return s==t&&f==e;var d=-1,p=!0,v=2&n?new Jr:r;for(u.set(e,t),u.set(t,e);++d<l;){var h=e[d],m=t[d];if(a)var y=o?a(m,h,d,t,e,u):a(h,m,d,e,t,u);if(y!==r){if(y)continue;p=!1;break}if(v){if(!Bt(t,(function(e,t){if(!er(v,t)&&(h===e||i(h,e,n,a,u)))return v.push(t)}))){p=!1;break}}else if(h!==m&&!i(h,m,n,a,u)){p=!1;break}}return u.delete(e),u.delete(t),p}function ni(e){return Ri(Si(e,r,Gi),e+"")}function ai(e){return Tn(e,Ro,pi)}function ii(e){return Tn(e,Mo,vi)}var ui=Or?function(e){return Or.get(e)}:cl;function oi(e){for(var t=e.name+"",r=Pr[t],n=Le.call(Pr,t)?r.length:0;n--;){var a=r[n],i=a.func;if(null==i||i==e)return a.name}return t}function li(e){return(Le.call(Ur,"placeholder")?Ur:e).placeholder}function ci(){var e=Ur.iteratee||il;return e=e===il?Ln:e,arguments.length?e(arguments[0],arguments[1]):e}function si(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function fi(e){for(var t=Ro(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Ti(a)]}return t}function di(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Nn(n)?n:r}var pi=gt?function(e){return null==e?[]:(e=Se(e),Pt(gt(e),(function(t){return Ze.call(e,t)})))}:ml,vi=gt?function(e){for(var t=[];e;)Nt(t,pi(e)),e=$e(e);return t}:ml,hi=jn;function mi(e,t,r){for(var n=-1,a=(t=_a(t,e)).length,i=!1;++n<a;){var u=Di(t[n]);if(!(i=null!=e&&r(e,u)))break;e=e[u]}return i||++n!=a?i:!!(a=null==e?0:e.length)&&Qu(a)&&bi(u,a)&&(zu(e)||Wu(e))}function yi(e){return"function"!=typeof e.constructor||ki(e)?{}:qr($e(e))}function gi(e){return zu(e)||Wu(e)||!!(Ye&&e&&e[Ye])}function bi(e,t){var r=typeof e;return!!(t=null==t?d:t)&&("number"==r||"symbol"!=r&&be.test(e))&&e>-1&&e%1==0&&e<t}function _i(e,t,r){if(!eo(r))return!1;var n=typeof t;return!!("number"==n?Hu(r)&&bi(t,r.length):"string"==n&&t in r)&&Uu(r[t],e)}function xi(e,t){if(zu(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!lo(e))||(te.test(e)||!ee.test(e)||null!=t&&e in Se(t))}function wi(e){var t=oi(e),r=Ur[t];if("function"!=typeof r||!(t in zr.prototype))return!1;if(e===r)return!0;var n=ui(r);return!!n&&e===n[0]}(kr&&hi(new kr(new ArrayBuffer(1)))!=A||Tr&&hi(new Tr)!=k||jr&&hi(jr.resolve())!=S||Sr&&hi(new Sr)!=C||Ir&&hi(new Ir)!=R)&&(hi=function(e){var t=jn(e),n=t==j?e.constructor:r,a=n?Bi(n):"";if(a)switch(a){case Rr:return A;case Mr:return k;case Ar:return S;case Nr:return C;case Lr:return R}return t});var Ei=Ae?Yu:yl;function ki(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Me)}function Ti(e){return e==e&&!eo(e)}function ji(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Se(n)))}}function Si(e,t,n){return t=gr(t===r?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=gr(r.length-t,0),u=ue(i);++a<i;)u[a]=r[t+a];a=-1;for(var o=ue(t+1);++a<t;)o[a]=r[a];return o[t]=n(u),jt(e,this,o)}}function Ii(e,t){return t.length<2?e:kn(e,aa(t,0,-1))}function Ci(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Oi=Ai(ta),Pi=pt||function(e,t){return vt.setTimeout(e,t)},Ri=Ai(ra);function Mi(e,t,r){var n=t+"";return Ri(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return It(m,(function(r){var n="_."+r[0];t&r[1]&&!Rt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ce):[]}(n),r)))}function Ai(e){var t=0,n=0;return function(){var a=_r(),i=16-(a-n);if(n=a,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Ni(e,t){var n=-1,a=e.length,i=a-1;for(t=t===r?a:t;++n<t;){var u=Zn(n,i),o=e[u];e[u]=e[n],e[n]=o}return e.length=t,e}var Li=function(e){var t=Au(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,r,n,a){t.push(n?a.replace(de,"$1"):r||e)})),t}));function Di(e){if("string"==typeof e||lo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bi(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fi(e){if(e instanceof zr)return e.clone();var t=new Wr(e.__wrapped__,e.__chain__);return t.__actions__=Oa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ui=Yn((function(e,t){return $u(e)?dn(e,gn(t,1,$u,!0)):[]})),qi=Yn((function(e,t){var n=Ki(t);return $u(n)&&(n=r),$u(e)?dn(e,gn(t,1,$u,!0),ci(n,2)):[]})),Vi=Yn((function(e,t){var n=Ki(t);return $u(n)&&(n=r),$u(e)?dn(e,gn(t,1,$u,!0),r,n):[]}));function Wi(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:ho(r);return a<0&&(a=gr(n+a,0)),qt(e,ci(t,3),a)}function zi(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=a-1;return n!==r&&(i=ho(n),i=n<0?gr(a+i,0):br(i,a-1)),qt(e,ci(t,3),i,!0)}function Gi(e){return(null==e?0:e.length)?gn(e,1):[]}function Hi(e){return e&&e.length?e[0]:r}var $i=Yn((function(e){var t=At(e,ga);return t.length&&t[0]===e[0]?On(t):[]})),Ji=Yn((function(e){var t=Ki(e),n=At(e,ga);return t===Ki(n)?t=r:n.pop(),n.length&&n[0]===e[0]?On(n,ci(t,2)):[]})),Zi=Yn((function(e){var t=Ki(e),n=At(e,ga);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?On(n,r,t):[]}));function Ki(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Yi=Yn(Xi);function Xi(e,t){return e&&e.length&&t&&t.length?$n(e,t):e}var Qi=ni((function(e,t){var r=null==e?0:e.length,n=on(e,t);return Jn(e,At(t,(function(e){return bi(e,r)?+e:e})).sort(Sa)),n}));function eu(e){return null==e?e:Er.call(e)}var tu=Yn((function(e){return fa(gn(e,1,$u,!0))})),ru=Yn((function(e){var t=Ki(e);return $u(t)&&(t=r),fa(gn(e,1,$u,!0),ci(t,2))})),nu=Yn((function(e){var t=Ki(e);return t="function"==typeof t?t:r,fa(gn(e,1,$u,!0),r,t)}));function au(e){if(!e||!e.length)return[];var t=0;return e=Pt(e,(function(e){if($u(e))return t=gr(e.length,t),!0})),Kt(t,(function(t){return At(e,Ht(t))}))}function iu(e,t){if(!e||!e.length)return[];var n=au(e);return null==t?n:At(n,(function(e){return jt(t,r,e)}))}var uu=Yn((function(e,t){return $u(e)?dn(e,t):[]})),ou=Yn((function(e){return ma(Pt(e,$u))})),lu=Yn((function(e){var t=Ki(e);return $u(t)&&(t=r),ma(Pt(e,$u),ci(t,2))})),cu=Yn((function(e){var t=Ki(e);return t="function"==typeof t?t:r,ma(Pt(e,$u),r,t)})),su=Yn(au);var fu=Yn((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,iu(e,n)}));function du(e){var t=Ur(e);return t.__chain__=!0,t}function pu(e,t){return t(e)}var vu=ni((function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,i=function(t){return on(t,e)};return!(t>1||this.__actions__.length)&&a instanceof zr&&bi(n)?((a=a.slice(n,+n+(t?1:0))).__actions__.push({func:pu,args:[i],thisArg:r}),new Wr(a,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(i)}));var hu=Ra((function(e,t,r){Le.call(e,r)?++e[r]:un(e,r,1)}));var mu=Fa(Wi),yu=Fa(zi);function gu(e,t){return(zu(e)?It:pn)(e,ci(t,3))}function bu(e,t){return(zu(e)?Ct:vn)(e,ci(t,3))}var _u=Ra((function(e,t,r){Le.call(e,r)?e[r].push(t):un(e,r,[t])}));var xu=Yn((function(e,t,r){var n=-1,a="function"==typeof t,i=Hu(e)?ue(e.length):[];return pn(e,(function(e){i[++n]=a?jt(t,e,r):Pn(e,t,r)})),i})),wu=Ra((function(e,t,r){un(e,r,t)}));function Eu(e,t){return(zu(e)?At:Un)(e,ci(t,3))}var ku=Ra((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var Tu=Yn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&_i(e,t[0],t[1])?t=[]:r>2&&_i(t[0],t[1],t[2])&&(t=[t[0]]),Gn(e,gn(t,1),[])})),ju=dt||function(){return vt.Date.now()};function Su(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Xa(e,c,r,r,r,r,t)}function Iu(e,t){var a;if("function"!=typeof t)throw new Oe(n);return e=ho(e),function(){return--e>0&&(a=t.apply(this,arguments)),e<=1&&(t=r),a}}var Cu=Yn((function(e,t,r){var n=1;if(r.length){var a=cr(r,li(Cu));n|=o}return Xa(e,n,t,r,a)})),Ou=Yn((function(e,t,r){var n=3;if(r.length){var a=cr(r,li(Ou));n|=o}return Xa(t,n,e,r,a)}));function Pu(e,t,a){var i,u,o,l,c,s,f=0,d=!1,p=!1,v=!0;if("function"!=typeof e)throw new Oe(n);function h(t){var n=i,a=u;return i=u=r,f=t,l=e.apply(a,n)}function m(e){var n=e-s;return s===r||n>=t||n<0||p&&e-f>=o}function y(){var e=ju();if(m(e))return g(e);c=Pi(y,function(e){var r=t-(e-s);return p?br(r,o-(e-f)):r}(e))}function g(e){return c=r,v&&i?h(e):(i=u=r,l)}function b(){var e=ju(),n=m(e);if(i=arguments,u=this,s=e,n){if(c===r)return function(e){return f=e,c=Pi(y,t),d?h(e):l}(s);if(p)return Ea(c),c=Pi(y,t),h(s)}return c===r&&(c=Pi(y,t)),l}return t=yo(t)||0,eo(a)&&(d=!!a.leading,o=(p="maxWait"in a)?gr(yo(a.maxWait)||0,t):o,v="trailing"in a?!!a.trailing:v),b.cancel=function(){c!==r&&Ea(c),f=0,i=s=u=c=r},b.flush=function(){return c===r?l:g(ju())},b}var Ru=Yn((function(e,t){return fn(e,1,t)})),Mu=Yn((function(e,t,r){return fn(e,yo(t)||0,r)}));function Au(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(n);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var u=e.apply(this,n);return r.cache=i.set(a,u)||i,u};return r.cache=new(Au.Cache||$r),r}function Nu(e){if("function"!=typeof e)throw new Oe(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Au.Cache=$r;var Lu=xa((function(e,t){var r=(t=1==t.length&&zu(t[0])?At(t[0],Xt(ci())):At(gn(t,1),Xt(ci()))).length;return Yn((function(n){for(var a=-1,i=br(n.length,r);++a<i;)n[a]=t[a].call(this,n[a]);return jt(e,this,n)}))})),Du=Yn((function(e,t){var n=cr(t,li(Du));return Xa(e,o,r,t,n)})),Bu=Yn((function(e,t){var n=cr(t,li(Bu));return Xa(e,l,r,t,n)})),Fu=ni((function(e,t){return Xa(e,s,r,r,r,t)}));function Uu(e,t){return e===t||e!=e&&t!=t}var qu=$a(Sn),Vu=$a((function(e,t){return e>=t})),Wu=Rn(function(){return arguments}())?Rn:function(e){return to(e)&&Le.call(e,"callee")&&!Ze.call(e,"callee")},zu=ue.isArray,Gu=_t?Xt(_t):function(e){return to(e)&&jn(e)==M};function Hu(e){return null!=e&&Qu(e.length)&&!Yu(e)}function $u(e){return to(e)&&Hu(e)}var Ju=bt||yl,Zu=xt?Xt(xt):function(e){return to(e)&&jn(e)==_};function Ku(e){if(!to(e))return!1;var t=jn(e);return t==x||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ao(e)}function Yu(e){if(!eo(e))return!1;var t=jn(e);return t==w||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xu(e){return"number"==typeof e&&e==ho(e)}function Qu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function eo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function to(e){return null!=e&&"object"==typeof e}var ro=wt?Xt(wt):function(e){return to(e)&&hi(e)==k};function no(e){return"number"==typeof e||to(e)&&jn(e)==T}function ao(e){if(!to(e)||jn(e)!=j)return!1;var t=$e(e);if(null===t)return!0;var r=Le.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ne.call(r)==Ue}var io=Et?Xt(Et):function(e){return to(e)&&jn(e)==I};var uo=kt?Xt(kt):function(e){return to(e)&&hi(e)==C};function oo(e){return"string"==typeof e||!zu(e)&&to(e)&&jn(e)==O}function lo(e){return"symbol"==typeof e||to(e)&&jn(e)==P}var co=Tt?Xt(Tt):function(e){return to(e)&&Qu(e.length)&&!!ot[jn(e)]};var so=$a(Fn),fo=$a((function(e,t){return e<=t}));function po(e){if(!e)return[];if(Hu(e))return oo(e)?pr(e):Oa(e);if(Xe&&e[Xe])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Xe]());var t=hi(e);return(t==k?or:t==C?sr:qo)(e)}function vo(e){return e?(e=yo(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ho(e){var t=vo(e),r=t%1;return t==t?r?t-r:t:0}function mo(e){return e?ln(ho(e),0,v):0}function yo(e){if("number"==typeof e)return e;if(lo(e))return p;if(eo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=eo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var r=me.test(e);return r||ge.test(e)?ft(e.slice(2),r?2:8):he.test(e)?p:+e}function go(e){return Pa(e,Mo(e))}function bo(e){return null==e?"":sa(e)}var _o=Ma((function(e,t){if(ki(t)||Hu(t))Pa(t,Ro(t),e);else for(var r in t)Le.call(t,r)&&tn(e,r,t[r])})),xo=Ma((function(e,t){Pa(t,Mo(t),e)})),wo=Ma((function(e,t,r,n){Pa(t,Mo(t),e,n)})),Eo=Ma((function(e,t,r,n){Pa(t,Ro(t),e,n)})),ko=ni(on);var To=Yn((function(e,t){e=Se(e);var n=-1,a=t.length,i=a>2?t[2]:r;for(i&&_i(t[0],t[1],i)&&(a=1);++n<a;)for(var u=t[n],o=Mo(u),l=-1,c=o.length;++l<c;){var s=o[l],f=e[s];(f===r||Uu(f,Me[s])&&!Le.call(e,s))&&(e[s]=u[s])}return e})),jo=Yn((function(e){return e.push(r,ei),jt(No,r,e)}));function So(e,t,n){var a=null==e?r:kn(e,t);return a===r?n:a}function Io(e,t){return null!=e&&mi(e,t,Cn)}var Co=Va((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=r}),tl(al)),Oo=Va((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Le.call(e,t)?e[t].push(r):e[t]=[r]}),ci),Po=Yn(Pn);function Ro(e){return Hu(e)?Kr(e):Dn(e)}function Mo(e){return Hu(e)?Kr(e,!0):Bn(e)}var Ao=Ma((function(e,t,r){Wn(e,t,r)})),No=Ma((function(e,t,r,n){Wn(e,t,r,n)})),Lo=ni((function(e,t){var r={};if(null==e)return r;var n=!1;t=At(t,(function(t){return t=_a(t,e),n||(n=t.length>1),t})),Pa(e,ii(e),r),n&&(r=cn(r,7,ti));for(var a=t.length;a--;)da(r,t[a]);return r}));var Do=ni((function(e,t){return null==e?{}:function(e,t){return Hn(e,t,(function(t,r){return Io(e,r)}))}(e,t)}));function Bo(e,t){if(null==e)return{};var r=At(ii(e),(function(e){return[e]}));return t=ci(t),Hn(e,r,(function(e,r){return t(e,r[0])}))}var Fo=Ya(Ro),Uo=Ya(Mo);function qo(e){return null==e?[]:Qt(e,Ro(e))}var Vo=Da((function(e,t,r){return t=t.toLowerCase(),e+(r?Wo(t):t)}));function Wo(e){return Yo(bo(e).toLowerCase())}function zo(e){return(e=bo(e))&&e.replace(_e,nr).replace(et,"")}var Go=Da((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Ho=Da((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),$o=La("toLowerCase");var Jo=Da((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));var Zo=Da((function(e,t,r){return e+(r?" ":"")+Yo(t)}));var Ko=Da((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Yo=La("toUpperCase");function Xo(e,t,n){return e=bo(e),(t=n?r:t)===r?function(e){return at.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(se)||[]}(e):e.match(t)||[]}var Qo=Yn((function(e,t){try{return jt(e,r,t)}catch(e){return Ku(e)?e:new ke(e)}})),el=ni((function(e,t){return It(t,(function(t){t=Di(t),un(e,t,Cu(e[t],e))})),e}));function tl(e){return function(){return e}}var rl=Ua(),nl=Ua(!0);function al(e){return e}function il(e){return Ln("function"==typeof e?e:cn(e,1))}var ul=Yn((function(e,t){return function(r){return Pn(r,e,t)}})),ol=Yn((function(e,t){return function(r){return Pn(e,r,t)}}));function ll(e,t,r){var n=Ro(t),a=En(t,n);null!=r||eo(t)&&(a.length||!n.length)||(r=t,t=e,e=this,a=En(t,Ro(t)));var i=!(eo(r)&&"chain"in r&&!r.chain),u=Yu(e);return It(a,(function(r){var n=t[r];e[r]=n,u&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__);return(r.__actions__=Oa(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Nt([this.value()],arguments))})})),e}function cl(){}var sl=za(At),fl=za(Ot),dl=za(Bt);function pl(e){return xi(e)?Ht(Di(e)):function(e){return function(t){return kn(t,e)}}(e)}var vl=Ha(),hl=Ha(!0);function ml(){return[]}function yl(){return!1}var gl=Wa((function(e,t){return e+t}),0),bl=Za("ceil"),_l=Wa((function(e,t){return e/t}),1),xl=Za("floor");var wl,El=Wa((function(e,t){return e*t}),1),kl=Za("round"),Tl=Wa((function(e,t){return e-t}),0);return Ur.after=function(e,t){if("function"!=typeof t)throw new Oe(n);return e=ho(e),function(){if(--e<1)return t.apply(this,arguments)}},Ur.ary=Su,Ur.assign=_o,Ur.assignIn=xo,Ur.assignInWith=wo,Ur.assignWith=Eo,Ur.at=ko,Ur.before=Iu,Ur.bind=Cu,Ur.bindAll=el,Ur.bindKey=Ou,Ur.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return zu(e)?e:[e]},Ur.chain=du,Ur.chunk=function(e,t,n){t=(n?_i(e,t,n):t===r)?1:gr(ho(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var i=0,u=0,o=ue(ht(a/t));i<a;)o[u++]=aa(e,i,i+=t);return o},Ur.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,a=[];++t<r;){var i=e[t];i&&(a[n++]=i)}return a},Ur.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ue(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Nt(zu(r)?Oa(r):[r],gn(t,1))},Ur.cond=function(e){var t=null==e?0:e.length,r=ci();return e=t?At(e,(function(e){if("function"!=typeof e[1])throw new Oe(n);return[r(e[0]),e[1]]})):[],Yn((function(r){for(var n=-1;++n<t;){var a=e[n];if(jt(a[0],this,r))return jt(a[1],this,r)}}))},Ur.conforms=function(e){return function(e){var t=Ro(e);return function(r){return sn(r,e,t)}}(cn(e,1))},Ur.constant=tl,Ur.countBy=hu,Ur.create=function(e,t){var r=qr(e);return null==t?r:an(r,t)},Ur.curry=function e(t,n,a){var i=Xa(t,8,r,r,r,r,r,n=a?r:n);return i.placeholder=e.placeholder,i},Ur.curryRight=function e(t,n,a){var i=Xa(t,u,r,r,r,r,r,n=a?r:n);return i.placeholder=e.placeholder,i},Ur.debounce=Pu,Ur.defaults=To,Ur.defaultsDeep=jo,Ur.defer=Ru,Ur.delay=Mu,Ur.difference=Ui,Ur.differenceBy=qi,Ur.differenceWith=Vi,Ur.drop=function(e,t,n){var a=null==e?0:e.length;return a?aa(e,(t=n||t===r?1:ho(t))<0?0:t,a):[]},Ur.dropRight=function(e,t,n){var a=null==e?0:e.length;return a?aa(e,0,(t=a-(t=n||t===r?1:ho(t)))<0?0:t):[]},Ur.dropRightWhile=function(e,t){return e&&e.length?va(e,ci(t,3),!0,!0):[]},Ur.dropWhile=function(e,t){return e&&e.length?va(e,ci(t,3),!0):[]},Ur.fill=function(e,t,n,a){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&_i(e,t,n)&&(n=0,a=i),function(e,t,n,a){var i=e.length;for((n=ho(n))<0&&(n=-n>i?0:i+n),(a=a===r||a>i?i:ho(a))<0&&(a+=i),a=n>a?0:mo(a);n<a;)e[n++]=t;return e}(e,t,n,a)):[]},Ur.filter=function(e,t){return(zu(e)?Pt:yn)(e,ci(t,3))},Ur.flatMap=function(e,t){return gn(Eu(e,t),1)},Ur.flatMapDeep=function(e,t){return gn(Eu(e,t),f)},Ur.flatMapDepth=function(e,t,n){return n=n===r?1:ho(n),gn(Eu(e,t),n)},Ur.flatten=Gi,Ur.flattenDeep=function(e){return(null==e?0:e.length)?gn(e,f):[]},Ur.flattenDepth=function(e,t){return(null==e?0:e.length)?gn(e,t=t===r?1:ho(t)):[]},Ur.flip=function(e){return Xa(e,512)},Ur.flow=rl,Ur.flowRight=nl,Ur.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n},Ur.functions=function(e){return null==e?[]:En(e,Ro(e))},Ur.functionsIn=function(e){return null==e?[]:En(e,Mo(e))},Ur.groupBy=_u,Ur.initial=function(e){return(null==e?0:e.length)?aa(e,0,-1):[]},Ur.intersection=$i,Ur.intersectionBy=Ji,Ur.intersectionWith=Zi,Ur.invert=Co,Ur.invertBy=Oo,Ur.invokeMap=xu,Ur.iteratee=il,Ur.keyBy=wu,Ur.keys=Ro,Ur.keysIn=Mo,Ur.map=Eu,Ur.mapKeys=function(e,t){var r={};return t=ci(t,3),xn(e,(function(e,n,a){un(r,t(e,n,a),e)})),r},Ur.mapValues=function(e,t){var r={};return t=ci(t,3),xn(e,(function(e,n,a){un(r,n,t(e,n,a))})),r},Ur.matches=function(e){return qn(cn(e,1))},Ur.matchesProperty=function(e,t){return Vn(e,cn(t,1))},Ur.memoize=Au,Ur.merge=Ao,Ur.mergeWith=No,Ur.method=ul,Ur.methodOf=ol,Ur.mixin=ll,Ur.negate=Nu,Ur.nthArg=function(e){return e=ho(e),Yn((function(t){return zn(t,e)}))},Ur.omit=Lo,Ur.omitBy=function(e,t){return Bo(e,Nu(ci(t)))},Ur.once=function(e){return Iu(2,e)},Ur.orderBy=function(e,t,n,a){return null==e?[]:(zu(t)||(t=null==t?[]:[t]),zu(n=a?r:n)||(n=null==n?[]:[n]),Gn(e,t,n))},Ur.over=sl,Ur.overArgs=Lu,Ur.overEvery=fl,Ur.overSome=dl,Ur.partial=Du,Ur.partialRight=Bu,Ur.partition=ku,Ur.pick=Do,Ur.pickBy=Bo,Ur.property=pl,Ur.propertyOf=function(e){return function(t){return null==e?r:kn(e,t)}},Ur.pull=Yi,Ur.pullAll=Xi,Ur.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?$n(e,t,ci(r,2)):e},Ur.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?$n(e,t,r,n):e},Ur.pullAt=Qi,Ur.range=vl,Ur.rangeRight=hl,Ur.rearg=Fu,Ur.reject=function(e,t){return(zu(e)?Pt:yn)(e,Nu(ci(t,3)))},Ur.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],i=e.length;for(t=ci(t,3);++n<i;){var u=e[n];t(u,n,e)&&(r.push(u),a.push(n))}return Jn(e,a),r},Ur.rest=function(e,t){if("function"!=typeof e)throw new Oe(n);return Yn(e,t=t===r?t:ho(t))},Ur.reverse=eu,Ur.sampleSize=function(e,t,n){return t=(n?_i(e,t,n):t===r)?1:ho(t),(zu(e)?Xr:Qn)(e,t)},Ur.set=function(e,t,r){return null==e?e:ea(e,t,r)},Ur.setWith=function(e,t,n,a){return a="function"==typeof a?a:r,null==e?e:ea(e,t,n,a)},Ur.shuffle=function(e){return(zu(e)?Qr:na)(e)},Ur.slice=function(e,t,n){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&_i(e,t,n)?(t=0,n=a):(t=null==t?0:ho(t),n=n===r?a:ho(n)),aa(e,t,n)):[]},Ur.sortBy=Tu,Ur.sortedUniq=function(e){return e&&e.length?la(e):[]},Ur.sortedUniqBy=function(e,t){return e&&e.length?la(e,ci(t,2)):[]},Ur.split=function(e,t,n){return n&&"number"!=typeof n&&_i(e,t,n)&&(t=n=r),(n=n===r?v:n>>>0)?(e=bo(e))&&("string"==typeof t||null!=t&&!io(t))&&!(t=sa(t))&&ur(e)?wa(pr(e),0,n):e.split(t,n):[]},Ur.spread=function(e,t){if("function"!=typeof e)throw new Oe(n);return t=null==t?0:gr(ho(t),0),Yn((function(r){var n=r[t],a=wa(r,0,t);return n&&Nt(a,n),jt(e,this,a)}))},Ur.tail=function(e){var t=null==e?0:e.length;return t?aa(e,1,t):[]},Ur.take=function(e,t,n){return e&&e.length?aa(e,0,(t=n||t===r?1:ho(t))<0?0:t):[]},Ur.takeRight=function(e,t,n){var a=null==e?0:e.length;return a?aa(e,(t=a-(t=n||t===r?1:ho(t)))<0?0:t,a):[]},Ur.takeRightWhile=function(e,t){return e&&e.length?va(e,ci(t,3),!1,!0):[]},Ur.takeWhile=function(e,t){return e&&e.length?va(e,ci(t,3)):[]},Ur.tap=function(e,t){return t(e),e},Ur.throttle=function(e,t,r){var a=!0,i=!0;if("function"!=typeof e)throw new Oe(n);return eo(r)&&(a="leading"in r?!!r.leading:a,i="trailing"in r?!!r.trailing:i),Pu(e,t,{leading:a,maxWait:t,trailing:i})},Ur.thru=pu,Ur.toArray=po,Ur.toPairs=Fo,Ur.toPairsIn=Uo,Ur.toPath=function(e){return zu(e)?At(e,Di):lo(e)?[e]:Oa(Li(bo(e)))},Ur.toPlainObject=go,Ur.transform=function(e,t,r){var n=zu(e),a=n||Ju(e)||co(e);if(t=ci(t,4),null==r){var i=e&&e.constructor;r=a?n?new i:[]:eo(e)&&Yu(i)?qr($e(e)):{}}return(a?It:xn)(e,(function(e,n,a){return t(r,e,n,a)})),r},Ur.unary=function(e){return Su(e,1)},Ur.union=tu,Ur.unionBy=ru,Ur.unionWith=nu,Ur.uniq=function(e){return e&&e.length?fa(e):[]},Ur.uniqBy=function(e,t){return e&&e.length?fa(e,ci(t,2)):[]},Ur.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?fa(e,r,t):[]},Ur.unset=function(e,t){return null==e||da(e,t)},Ur.unzip=au,Ur.unzipWith=iu,Ur.update=function(e,t,r){return null==e?e:pa(e,t,ba(r))},Ur.updateWith=function(e,t,n,a){return a="function"==typeof a?a:r,null==e?e:pa(e,t,ba(n),a)},Ur.values=qo,Ur.valuesIn=function(e){return null==e?[]:Qt(e,Mo(e))},Ur.without=uu,Ur.words=Xo,Ur.wrap=function(e,t){return Du(ba(t),e)},Ur.xor=ou,Ur.xorBy=lu,Ur.xorWith=cu,Ur.zip=su,Ur.zipObject=function(e,t){return ya(e||[],t||[],tn)},Ur.zipObjectDeep=function(e,t){return ya(e||[],t||[],ea)},Ur.zipWith=fu,Ur.entries=Fo,Ur.entriesIn=Uo,Ur.extend=xo,Ur.extendWith=wo,ll(Ur,Ur),Ur.add=gl,Ur.attempt=Qo,Ur.camelCase=Vo,Ur.capitalize=Wo,Ur.ceil=bl,Ur.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=yo(n))==n?n:0),t!==r&&(t=(t=yo(t))==t?t:0),ln(yo(e),t,n)},Ur.clone=function(e){return cn(e,4)},Ur.cloneDeep=function(e){return cn(e,5)},Ur.cloneDeepWith=function(e,t){return cn(e,5,t="function"==typeof t?t:r)},Ur.cloneWith=function(e,t){return cn(e,4,t="function"==typeof t?t:r)},Ur.conformsTo=function(e,t){return null==t||sn(e,t,Ro(t))},Ur.deburr=zo,Ur.defaultTo=function(e,t){return null==e||e!=e?t:e},Ur.divide=_l,Ur.endsWith=function(e,t,n){e=bo(e),t=sa(t);var a=e.length,i=n=n===r?a:ln(ho(n),0,a);return(n-=t.length)>=0&&e.slice(n,i)==t},Ur.eq=Uu,Ur.escape=function(e){return(e=bo(e))&&K.test(e)?e.replace(J,ar):e},Ur.escapeRegExp=function(e){return(e=bo(e))&&ae.test(e)?e.replace(ne,"\\$&"):e},Ur.every=function(e,t,n){var a=zu(e)?Ot:hn;return n&&_i(e,t,n)&&(t=r),a(e,ci(t,3))},Ur.find=mu,Ur.findIndex=Wi,Ur.findKey=function(e,t){return Ut(e,ci(t,3),xn)},Ur.findLast=yu,Ur.findLastIndex=zi,Ur.findLastKey=function(e,t){return Ut(e,ci(t,3),wn)},Ur.floor=xl,Ur.forEach=gu,Ur.forEachRight=bu,Ur.forIn=function(e,t){return null==e?e:bn(e,ci(t,3),Mo)},Ur.forInRight=function(e,t){return null==e?e:_n(e,ci(t,3),Mo)},Ur.forOwn=function(e,t){return e&&xn(e,ci(t,3))},Ur.forOwnRight=function(e,t){return e&&wn(e,ci(t,3))},Ur.get=So,Ur.gt=qu,Ur.gte=Vu,Ur.has=function(e,t){return null!=e&&mi(e,t,In)},Ur.hasIn=Io,Ur.head=Hi,Ur.identity=al,Ur.includes=function(e,t,r,n){e=Hu(e)?e:qo(e),r=r&&!n?ho(r):0;var a=e.length;return r<0&&(r=gr(a+r,0)),oo(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Vt(e,t,r)>-1},Ur.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:ho(r);return a<0&&(a=gr(n+a,0)),Vt(e,t,a)},Ur.inRange=function(e,t,n){return t=vo(t),n===r?(n=t,t=0):n=vo(n),function(e,t,r){return e>=br(t,r)&&e<gr(t,r)}(e=yo(e),t,n)},Ur.invoke=Po,Ur.isArguments=Wu,Ur.isArray=zu,Ur.isArrayBuffer=Gu,Ur.isArrayLike=Hu,Ur.isArrayLikeObject=$u,Ur.isBoolean=function(e){return!0===e||!1===e||to(e)&&jn(e)==b},Ur.isBuffer=Ju,Ur.isDate=Zu,Ur.isElement=function(e){return to(e)&&1===e.nodeType&&!ao(e)},Ur.isEmpty=function(e){if(null==e)return!0;if(Hu(e)&&(zu(e)||"string"==typeof e||"function"==typeof e.splice||Ju(e)||co(e)||Wu(e)))return!e.length;var t=hi(e);if(t==k||t==C)return!e.size;if(ki(e))return!Dn(e).length;for(var r in e)if(Le.call(e,r))return!1;return!0},Ur.isEqual=function(e,t){return Mn(e,t)},Ur.isEqualWith=function(e,t,n){var a=(n="function"==typeof n?n:r)?n(e,t):r;return a===r?Mn(e,t,r,n):!!a},Ur.isError=Ku,Ur.isFinite=function(e){return"number"==typeof e&&Ft(e)},Ur.isFunction=Yu,Ur.isInteger=Xu,Ur.isLength=Qu,Ur.isMap=ro,Ur.isMatch=function(e,t){return e===t||An(e,t,fi(t))},Ur.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,An(e,t,fi(t),n)},Ur.isNaN=function(e){return no(e)&&e!=+e},Ur.isNative=function(e){if(Ei(e))throw new ke("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nn(e)},Ur.isNil=function(e){return null==e},Ur.isNull=function(e){return null===e},Ur.isNumber=no,Ur.isObject=eo,Ur.isObjectLike=to,Ur.isPlainObject=ao,Ur.isRegExp=io,Ur.isSafeInteger=function(e){return Xu(e)&&e>=-9007199254740991&&e<=d},Ur.isSet=uo,Ur.isString=oo,Ur.isSymbol=lo,Ur.isTypedArray=co,Ur.isUndefined=function(e){return e===r},Ur.isWeakMap=function(e){return to(e)&&hi(e)==R},Ur.isWeakSet=function(e){return to(e)&&"[object WeakSet]"==jn(e)},Ur.join=function(e,t){return null==e?"":$t.call(e,t)},Ur.kebabCase=Go,Ur.last=Ki,Ur.lastIndexOf=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=a;return n!==r&&(i=(i=ho(n))<0?gr(a+i,0):br(i,a-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,i):qt(e,zt,i,!0)},Ur.lowerCase=Ho,Ur.lowerFirst=$o,Ur.lt=so,Ur.lte=fo,Ur.max=function(e){return e&&e.length?mn(e,al,Sn):r},Ur.maxBy=function(e,t){return e&&e.length?mn(e,ci(t,2),Sn):r},Ur.mean=function(e){return Gt(e,al)},Ur.meanBy=function(e,t){return Gt(e,ci(t,2))},Ur.min=function(e){return e&&e.length?mn(e,al,Fn):r},Ur.minBy=function(e,t){return e&&e.length?mn(e,ci(t,2),Fn):r},Ur.stubArray=ml,Ur.stubFalse=yl,Ur.stubObject=function(){return{}},Ur.stubString=function(){return""},Ur.stubTrue=function(){return!0},Ur.multiply=El,Ur.nth=function(e,t){return e&&e.length?zn(e,ho(t)):r},Ur.noConflict=function(){return vt._===this&&(vt._=qe),this},Ur.noop=cl,Ur.now=ju,Ur.pad=function(e,t,r){e=bo(e);var n=(t=ho(t))?dr(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return Ga(mt(a),r)+e+Ga(ht(a),r)},Ur.padEnd=function(e,t,r){e=bo(e);var n=(t=ho(t))?dr(e):0;return t&&n<t?e+Ga(t-n,r):e},Ur.padStart=function(e,t,r){e=bo(e);var n=(t=ho(t))?dr(e):0;return t&&n<t?Ga(t-n,r)+e:e},Ur.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),xr(bo(e).replace(ie,""),t||0)},Ur.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_i(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=vo(e),t===r?(t=e,e=0):t=vo(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var i=wr();return br(e+i*(t-e+st("1e-"+((i+"").length-1))),t)}return Zn(e,t)},Ur.reduce=function(e,t,r){var n=zu(e)?Lt:Jt,a=arguments.length<3;return n(e,ci(t,4),r,a,pn)},Ur.reduceRight=function(e,t,r){var n=zu(e)?Dt:Jt,a=arguments.length<3;return n(e,ci(t,4),r,a,vn)},Ur.repeat=function(e,t,n){return t=(n?_i(e,t,n):t===r)?1:ho(t),Kn(bo(e),t)},Ur.replace=function(){var e=arguments,t=bo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Ur.result=function(e,t,n){var a=-1,i=(t=_a(t,e)).length;for(i||(i=1,e=r);++a<i;){var u=null==e?r:e[Di(t[a])];u===r&&(a=i,u=n),e=Yu(u)?u.call(e):u}return e},Ur.round=kl,Ur.runInContext=e,Ur.sample=function(e){return(zu(e)?Yr:Xn)(e)},Ur.size=function(e){if(null==e)return 0;if(Hu(e))return oo(e)?dr(e):e.length;var t=hi(e);return t==k||t==C?e.size:Dn(e).length},Ur.snakeCase=Jo,Ur.some=function(e,t,n){var a=zu(e)?Bt:ia;return n&&_i(e,t,n)&&(t=r),a(e,ci(t,3))},Ur.sortedIndex=function(e,t){return ua(e,t)},Ur.sortedIndexBy=function(e,t,r){return oa(e,t,ci(r,2))},Ur.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ua(e,t);if(n<r&&Uu(e[n],t))return n}return-1},Ur.sortedLastIndex=function(e,t){return ua(e,t,!0)},Ur.sortedLastIndexBy=function(e,t,r){return oa(e,t,ci(r,2),!0)},Ur.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=ua(e,t,!0)-1;if(Uu(e[r],t))return r}return-1},Ur.startCase=Zo,Ur.startsWith=function(e,t,r){return e=bo(e),r=null==r?0:ln(ho(r),0,e.length),t=sa(t),e.slice(r,r+t.length)==t},Ur.subtract=Tl,Ur.sum=function(e){return e&&e.length?Zt(e,al):0},Ur.sumBy=function(e,t){return e&&e.length?Zt(e,ci(t,2)):0},Ur.template=function(e,t,n){var a=Ur.templateSettings;n&&_i(e,t,n)&&(t=r),e=bo(e),t=wo({},t,a,Qa);var i,u,o=wo({},t.imports,a.imports,Qa),l=Ro(o),c=Qt(o,l),s=0,f=t.interpolate||xe,d="__p += '",p=Ie((t.escape||xe).source+"|"+f.source+"|"+(f===Q?pe:xe).source+"|"+(t.evaluate||xe).source+"|$","g"),v="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ut+"]")+"\n";e.replace(p,(function(t,r,n,a,o,l){return n||(n=a),d+=e.slice(s,l).replace(we,ir),r&&(i=!0,d+="' +\n__e("+r+") +\n'"),o&&(u=!0,d+="';\n"+o+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),s=l+t.length,t})),d+="';\n";var h=Le.call(t,"variable")&&t.variable;if(h){if(fe.test(h))throw new ke("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(u?d.replace(z,""):d).replace(G,"$1").replace(H,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Qo((function(){return Te(l,v+"return "+d).apply(r,c)}));if(m.source=d,Ku(m))throw m;return m},Ur.times=function(e,t){if((e=ho(e))<1||e>d)return[];var r=v,n=br(e,v);t=ci(t),e-=v;for(var a=Kt(n,t);++r<e;)t(r);return a},Ur.toFinite=vo,Ur.toInteger=ho,Ur.toLength=mo,Ur.toLower=function(e){return bo(e).toLowerCase()},Ur.toNumber=yo,Ur.toSafeInteger=function(e){return e?ln(ho(e),-9007199254740991,d):0===e?e:0},Ur.toString=bo,Ur.toUpper=function(e){return bo(e).toUpperCase()},Ur.trim=function(e,t,n){if((e=bo(e))&&(n||t===r))return Yt(e);if(!e||!(t=sa(t)))return e;var a=pr(e),i=pr(t);return wa(a,tr(a,i),rr(a,i)+1).join("")},Ur.trimEnd=function(e,t,n){if((e=bo(e))&&(n||t===r))return e.slice(0,vr(e)+1);if(!e||!(t=sa(t)))return e;var a=pr(e);return wa(a,0,rr(a,pr(t))+1).join("")},Ur.trimStart=function(e,t,n){if((e=bo(e))&&(n||t===r))return e.replace(ie,"");if(!e||!(t=sa(t)))return e;var a=pr(e);return wa(a,tr(a,pr(t))).join("")},Ur.truncate=function(e,t){var n=30,a="...";if(eo(t)){var i="separator"in t?t.separator:i;n="length"in t?ho(t.length):n,a="omission"in t?sa(t.omission):a}var u=(e=bo(e)).length;if(ur(e)){var o=pr(e);u=o.length}if(n>=u)return e;var l=n-dr(a);if(l<1)return a;var c=o?wa(o,0,l).join(""):e.slice(0,l);if(i===r)return c+a;if(o&&(l+=c.length-l),io(i)){if(e.slice(l).search(i)){var s,f=c;for(i.global||(i=Ie(i.source,bo(ve.exec(i))+"g")),i.lastIndex=0;s=i.exec(f);)var d=s.index;c=c.slice(0,d===r?l:d)}}else if(e.indexOf(sa(i),l)!=l){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+a},Ur.unescape=function(e){return(e=bo(e))&&Z.test(e)?e.replace($,hr):e},Ur.uniqueId=function(e){var t=++De;return bo(e)+t},Ur.upperCase=Ko,Ur.upperFirst=Yo,Ur.each=gu,Ur.eachRight=bu,Ur.first=Hi,ll(Ur,(wl={},xn(Ur,(function(e,t){Le.call(Ur.prototype,t)||(wl[t]=e)})),wl),{chain:!1}),Ur.VERSION="4.17.21",It(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Ur[e].placeholder=Ur})),It(["drop","take"],(function(e,t){zr.prototype[e]=function(n){n=n===r?1:gr(ho(n),0);var a=this.__filtered__&&!t?new zr(this):this.clone();return a.__filtered__?a.__takeCount__=br(n,a.__takeCount__):a.__views__.push({size:br(n,v),type:e+(a.__dir__<0?"Right":"")}),a},zr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),It(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;zr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ci(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),It(["head","last"],(function(e,t){var r="take"+(t?"Right":"");zr.prototype[e]=function(){return this[r](1).value()[0]}})),It(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");zr.prototype[e]=function(){return this.__filtered__?new zr(this):this[r](1)}})),zr.prototype.compact=function(){return this.filter(al)},zr.prototype.find=function(e){return this.filter(e).head()},zr.prototype.findLast=function(e){return this.reverse().find(e)},zr.prototype.invokeMap=Yn((function(e,t){return"function"==typeof e?new zr(this):this.map((function(r){return Pn(r,e,t)}))})),zr.prototype.reject=function(e){return this.filter(Nu(ci(e)))},zr.prototype.slice=function(e,t){e=ho(e);var n=this;return n.__filtered__&&(e>0||t<0)?new zr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=ho(t))<0?n.dropRight(-t):n.take(t-e)),n)},zr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zr.prototype.toArray=function(){return this.take(v)},xn(zr.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),i=Ur[a?"take"+("last"==t?"Right":""):t],u=a||/^find/.test(t);i&&(Ur.prototype[t]=function(){var t=this.__wrapped__,o=a?[1]:arguments,l=t instanceof zr,c=o[0],s=l||zu(t),f=function(e){var t=i.apply(Ur,Nt([e],o));return a&&d?t[0]:t};s&&n&&"function"==typeof c&&1!=c.length&&(l=s=!1);var d=this.__chain__,p=!!this.__actions__.length,v=u&&!d,h=l&&!p;if(!u&&s){t=h?t:new zr(this);var m=e.apply(t,o);return m.__actions__.push({func:pu,args:[f],thisArg:r}),new Wr(m,d)}return v&&h?e.apply(this,o):(m=this.thru(f),v?a?m.value()[0]:m.value():m)})})),It(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Pe[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Ur.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(zu(a)?a:[],e)}return this[r]((function(r){return t.apply(zu(r)?r:[],e)}))}})),xn(zr.prototype,(function(e,t){var r=Ur[t];if(r){var n=r.name+"";Le.call(Pr,n)||(Pr[n]=[]),Pr[n].push({name:t,func:r})}})),Pr[qa(r,2).name]=[{name:"wrapper",func:r}],zr.prototype.clone=function(){var e=new zr(this.__wrapped__);return e.__actions__=Oa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Oa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Oa(this.__views__),e},zr.prototype.reverse=function(){if(this.__filtered__){var e=new zr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=zu(e),n=t<0,a=r?e.length:0,i=function(e,t,r){var n=-1,a=r.length;for(;++n<a;){var i=r[n],u=i.size;switch(i.type){case"drop":e+=u;break;case"dropRight":t-=u;break;case"take":t=br(t,e+u);break;case"takeRight":e=gr(e,t-u)}}return{start:e,end:t}}(0,a,this.__views__),u=i.start,o=i.end,l=o-u,c=n?o:u-1,s=this.__iteratees__,f=s.length,d=0,p=br(l,this.__takeCount__);if(!r||!n&&a==l&&p==l)return ha(e,this.__actions__);var v=[];e:for(;l--&&d<p;){for(var h=-1,m=e[c+=t];++h<f;){var y=s[h],g=y.iteratee,b=y.type,_=g(m);if(2==b)m=_;else if(!_){if(1==b)continue e;break e}}v[d++]=m}return v},Ur.prototype.at=vu,Ur.prototype.chain=function(){return du(this)},Ur.prototype.commit=function(){return new Wr(this.value(),this.__chain__)},Ur.prototype.next=function(){this.__values__===r&&(this.__values__=po(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Ur.prototype.plant=function(e){for(var t,n=this;n instanceof Vr;){var a=Fi(n);a.__index__=0,a.__values__=r,t?i.__wrapped__=a:t=a;var i=a;n=n.__wrapped__}return i.__wrapped__=e,t},Ur.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zr){var t=e;return this.__actions__.length&&(t=new zr(this)),(t=t.reverse()).__actions__.push({func:pu,args:[eu],thisArg:r}),new Wr(t,this.__chain__)}return this.thru(eu)},Ur.prototype.toJSON=Ur.prototype.valueOf=Ur.prototype.value=function(){return ha(this.__wrapped__,this.__actions__)},Ur.prototype.first=Ur.prototype.head,Xe&&(Ur.prototype[Xe]=function(){return this}),Ur}();mt?((mt.exports=mr)._=mr,ht._=mr):vt._=mr}).call(h)}));var Wt=function(e){var t=e.fileUrl,r=e.fileName,n=e.machineGenerated,a=e.fileExt;return c.default.createElement("button",{className:"ramp--transcript_downloader","data-testid":"transcript-downloader",onClick:function(e){e.preventDefault(),le(t,r,a,n)},href:"#","aria-label":"Transcript download button"},c.default.createElement("span",{className:"download-label"}))};Wt.propTypes={fileUrl:K.string,fileName:K.string,machineGenerated:K.bool,fileExt:K.string};var zt=function(e){var t=e.selectTranscript,r=e.transcriptData,n=e.transcriptInfo,a=e.noTranscript,i=n.title,u=n.id,o=n.tUrl,l=n.tFileExt,s=n.isMachineGen;return r?c.default.createElement("div",{className:"ramp--transcript_selector","data-testid":"transcript-selector"},c.default.createElement("div",{className:"ramp--transcript_list"},c.default.createElement("select",{className:"transcript_list","data-testid":"transcript-select-option",value:u,onChange:function(e){t(e.target.value)},"aria-label":"Select transcripts","aria-expanded":!1,"aria-haspopup":"true"},r.map((function(e,t){return c.default.createElement("option",{value:e.id,label:e.title,key:t},e.title)})))),!a&&c.default.createElement(Wt,{fileUrl:o,fileName:i,fileExt:l,machineGenerated:s}),s&&c.default.createElement("p",{className:"ramp--transcript_machine_generated","data-testid":"transcript-machinegen-msg"},"Machine-generated transcript may contain errors.")):null};function Gt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ht(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ht(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw i}}}}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}zt.propTypes={selectTranscript:K.func.isRequired,transcriptData:K.array.isRequired,transcriptInfo:K.shape({title:K.string,id:K.string,tUrl:K.string,tFileExt:K.string,isMachineGen:K.bool}).isRequired,noTranscript:K.bool.isRequired};var $t=[{type:"application/json",ext:"json"},{type:"text/vtt",ext:"vtt"},{type:"text/plain",ext:"txt"},{type:"application/msword",ext:"doc"},{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",ext:"docx"}],Jt={invalid:-1,noTranscript:0,timedText:1,plainText:2,doc:3};function Zt(e){return Kt.apply(this,arguments)}function Kt(){return Kt=Ue(Ge.mark((function e(t){var r,n,a=arguments;return Ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"",e.next=3,fetch(t).then((function(e){if(e.headers.get("Content-Type").includes("application/json"))return e.json()})).then((function(e){var n=ne(e)[0].getCanvases(),a=[];return(null==n?void 0:n.length)>0&&n.map((function(e,n){var i=se(e.__jsonld.annotations,"supplementing"),u=[];if(i.length>0){var o=i[0].getBody()[0];if("TextualBody"===o.getProperty("type")){var l=ve(r.length>0?r:o.getLabel().getValue()?me(o.getLabel().getValue()):"Canvas-".concat(n)),c=l.isMachineGen,s=l.labelText;u.push({url:void 0===o.id?t:o.id,title:s,isMachineGen:c,id:"".concat(s,"-").concat(n)})}else i.forEach((function(e,t){var r=e.getBody()[0],a=null!=r.getLabel()?me(r.getLabel().getValue()):"".concat(t),i=r.id,o=he(i),l=ve(a),c=l.isMachineGen,s=l.labelText;1!==o&&3!==o||u.push({title:s,url:i,isMachineGen:c,id:"".concat(s,"-").concat(n,"-").concat(t)})}))}a.push({canvasId:n,items:u})})),a})).catch((function(e){return console.error("transcript-parser -> getSupplementingAnnotations() -> error fetching transcript resource at, ",t),[]}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),Kt.apply(this,arguments)}function Yt(e){return Xt.apply(this,arguments)}function Xt(){return Xt=Ue(Ge.mark((function e(t){var r,n,a;return Ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!=t&&0!=t.length){e.next=5;break}return console.error("No transcripts given as input"),e.abrupt("return",[]);case 5:return r=[],t.map((function(e){return r.push({canvasId:e.canvasId,items:[]})})),e.next=9,Promise.all(t.map(function(){var e=Ue(Ge.mark((function e(t){var n,a,i;return Ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.canvasId,a=t.items,e.next=3,Promise.all(a.map(function(){var e=Ue(Ge.mark((function e(t,a){var i,u,o,l,c,s,f,d;return Ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.title,u=t.url,e.next=3,Zt(u,i);case 3:if(o=e.sent,l=ve(i),c=l.isMachineGen,s=l.labelText,f=[],(null==o?void 0:o.length)>0&&(f=o.map((function(e){return e.items})).flat(),d=Qt(r.concat(o),"canvasId","items"),r=d),0!==o.length&&0!==f.length){e.next=11;break}return e.abrupt("return",{title:s,url:u,isMachineGen:c,id:"".concat(s,"-").concat(n,"-").concat(a)});case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 3:return i=e.sent,e.abrupt("return",{canvasId:n,items:i.filter((function(e){return null!=e}))});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return n=e.sent,a=Qt(r.concat(n),"canvasId","items"),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),Xt.apply(this,arguments)}function Qt(e,t,r){return e.reduce((function(e,n){var a=e.filter((function(e){return e[t]==n[t]}));if((null==a?void 0:a.length)>0){var i=a[0];i[r]=i[r].concat(n[r])}else e.push(n);return e}),[])}function er(e,t){return tr.apply(this,arguments)}function tr(){return(tr=Ue(Ge.mark((function e(r,n){var a,i,u,o,l,c,s,f,d,p,v;return Ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],i=r,void 0!==r){e.next=4;break}return e.abrupt("return",{tData:a,tUrl:i,tType:Jt.invalid});case 4:return u=null,o=null,e.next=8,fetch(r).then(ue).then((function(e){u=e.headers.get("Content-Type"),o=e})).catch((function(e){console.error("transcript-parser -> parseTranscriptData() -> fetching transcript -> ",e)}));case 8:if(null!=u){e.next=10;break}return e.abrupt("return",{tData:[],tUrl:i,tType:Jt.invalid});case 10:if(l=$t.filter((function(e){return e.type==u.split(";")[0]})),c="",c=l.length>0?l[0].ext:r.split(".").reverse()[0],void 0!==n){e.next=15;break}return e.abrupt("return",{tData:a,tUrl:i,tType:Jt.noTranscript});case 15:e.t0=c,e.next="json"===e.t0?18:"vtt"===e.t0||"txt"===e.t0?28:"doc"===e.t0||"docx"===e.t0?42:46;break;case 18:return e.next=20,o.json();case 20:if(s=e.sent,!t.parseManifest(s)){e.next=26;break}return e.abrupt("return",ir(s,r,n));case 26:return f=ar(s),e.abrupt("return",{tData:f.tData,tUrl:i,tType:f.tType,tFileExt:c});case 28:return e.next=30,o.text();case 30:if(d=e.sent,0!=(p=d.split("\n")).length){e.next=34;break}return e.abrupt("return",{tData:[],tUrl:r,tType:Jt.noTranscript});case 34:if(!cr(p[0])){e.next=40;break}return a=lr(d),e.abrupt("return",{tData:a,tUrl:r,tType:Jt.timedText,tFileExt:c});case 40:return v=d.replace(/\n/g,"<br />"),e.abrupt("return",{tData:[v],tUrl:r,tType:Jt.plainText,tFileExt:c});case 42:return e.next=44,rr(o);case 44:return a=e.sent,e.abrupt("return",{tData:[a],tUrl:r,tType:Jt.doc,tFileExt:c});case 46:return e.abrupt("return",{tData:[],tUrl:r});case 47:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e){return nr.apply(this,arguments)}function nr(){return(nr=Ue(Ge.mark((function e(t){var r,n,a;return Ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.next=3,t.blob();case 3:return n=e.sent,a=new File([n],name,{type:t.headers.get("content-type")}),e.next=7,v.default.convertToHtml({arrayBuffer:a}).then((function(e){r=e.value}));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ar(e){if(0==e.length)return{tData:[],tType:Jt.noTranscript};var t,r=[],n=Gt(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.speaker){var i,u=a.speaker,o=Gt(a.spans);try{for(o.s();!(i=o.n()).done;){var l=i.value;l.speaker=u,r.push(l)}}catch(e){o.e(e)}finally{o.f()}}else{var c,s=Gt(a.spans);try{for(s.s();!(c=s.n()).done;){var f=c.value;r.push(f)}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){n.e(e)}finally{n.f()}return{tData:r,tType:Jt.timedText}}function ir(e,t,r){var n=t,a=[];return(a=e.annotations?se(e.annotations,"supplementing"):fe({manifest:e,canvasIndex:r,key:"annotations",motivation:"supplementing"})).length>0?"TextualBody"!=a[0].getBody()[0].getProperty("type")?function(e){return ur.apply(this,arguments)}(a[0]):{tData:or(a),tUrl:n,tType:Jt.timedText,tFileExt:"json"}:{tData:[],tUrl:n,tType:Jt.noTranscript}}function ur(){return(ur=Ue(Ge.mark((function e(t){var r,n,a,i,u,o;return Ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],n="",a=t.getBody()[0],i=a.getProperty("id"),u=a.getProperty("type"),o="","Text"!==u){e.next=16;break}if("text/vtt"!==a.getFormat()){e.next=12;break}return e.next=10,fetch(i).then(ue).then((function(e){return e.text()})).then((function(e){r=lr(e),n=Jt.timedText,o="vtt"})).catch((function(e){throw console.error("transcript-parser -> parseExternalAnnotations() -> fetching WebVTT -> ",e),e}));case 10:e.next=14;break;case 12:return e.next=14,fetch(i).then(ue).then((function(e){return e.text()})).then((function(e){r=e.replace(/\n/g,"<br />"),n=Jt.plainText,o="txt"})).catch((function(e){throw console.error("transcript-parser -> parseExternalAnnotations() -> fetching text -> ",e),e}));case 14:e.next=19;break;case 16:if("AnnotationPage"!==u){e.next=19;break}return e.next=19,fetch(i).then(ue).then((function(e){return e.json()})).then((function(e){var t=se([e],"supplementing");r=or(t),n=Jt.timedText,o="json"})).catch((function(e){throw console.error("transcript-parser -> parseExternalAnnotations() -> fetching annotations -> ",e),e}));case 19:return e.abrupt("return",{tData:r,tUrl:i,tType:n,tFileExt:o});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function or(e){var t=[];return e.map((function(e){if(null!=e.id){var r=e.getBody()[0],n=ce(e.getProperty("target")),a=n.start,i=n.end;t.push({text:r.getProperty("value"),format:r.getFormat(),begin:parseFloat(a),end:parseFloat(i)})}})),t}function lr(e){var t=[],r=function(e){var t=e.split("\n"),r=t.filter((function(e){return e.length>0}));return(r=r.filter((function(e){return!Number(e)}))).filter((function(e){return!/^[0-9]*[\r]/gm.test(e)}))}(e);if(!cr(r.shift()))return console.error("Invalid WebVTT file"),[];var n=function(e){var t,r=[];for(t=0;t<e.length;){var n=e[t],a={times:"",line:""};if(n.includes("--\x3e")){for(a.times=n,t++;t<e.length&&!e[t].includes("--\x3e");)a.line+=e[t],t++;r.push(a)}}return r}(r);return n.map((function(e){var r=function(e){var t=e.times,r=e.line,n=/([0-9]*:){1,2}([0-9]{2})\.[0-9]{2,3}/g,a=t.split(" --\x3e "),i=E(a,2),u=i[0],o=i[1];if(o=o.split(" ")[0],!u.match(n)||!o.match(n))return console.error("Invalid timestamp in line with text; ",r),null;var l={begin:ie(u),end:ie(o),text:r};return l}(e);r&&t.push(r)})),t}function cr(e){return!!e.includes("WEBVTT")}function sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pr(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw i}}}}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vr="No valid Transcript(s) found, please check again.",hr=function(e){var t=e.playerID,r=e.manifestUrl,n=e.transcripts,a=void 0===n?[]:n,i=c.default.useState([]),u=E(i,2),o=u[0],l=u[1],s=c.default.useState([]),f=E(s,2),d=f[0],p=f[1],v=c.default.useState([]),h=E(v,2),m=h[0],y=h[1],g=c.default.useState({title:"",id:"",tUrl:"",tType:"",tFileExt:"",isMachineGen:!1}),b=E(g,2),_=b[0],x=b[1],w=c.default.useState(0),k=E(w,2),T=k[0],j=k[1],S=c.default.useState(!0),I=E(S,2),C=I[0],O=I[1],P=c.default.useState(""),R=E(P,2),M=R[0],A=R[1],N=c.default.useState([]),L=E(N,2),D=L[0],B=L[1],F=c.default.useState([]),U=E(F,2),q=U[0],V=U[1],W=null,z=!1,G=c.default.useRef(z),H=c.default.useRef(!0),$=function(e){H.current=e},J=c.default.useRef(0),Z=function(e){J.current=e,j(e)},K=c.default.useRef([]),Y=c.default.useRef(),X=c.default.useRef(),Q=function(e){X.current=e,y(e)};c.default.useEffect((function(){setTimeout((function(){var e=document.getElementById(t);e?W=e.children[0]:console.error("Cannot find player, '"+t+"' on page. Transcript synchronization is disabled."),W&&(te(),W.dataset.canvasindex?Z(W.dataset.canvasindex):Z(0),W.addEventListener("timeupdate",(function(e){if(null!=e&&null!=e.target){var t=e.target.currentTime;K.current.map((function(e){if(e){var r=parseFloat(e.getAttribute("starttime")),n=parseFloat(e.getAttribute("endtime"));t>=r&&t<=n?!e.classList.contains("active")&&ne(t,r,n,e):e.classList.remove("active")}}))}})))}))})),c.default.useEffect((function(){return function(){p([]),Q([]),x({}),Z(),O(!0),B([]),V([]),W=null,z=!1}}),[]),c.default.useEffect(Ue(Ge.mark((function e(){var t;return Ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!((null==a?void 0:a.length)>0)){e.next=7;break}return e.next=4,Yt(a);case 4:t=e.sent,e.next=11;break;case 7:if(!r){e.next=11;break}return e.next=10,Zt(r);case 10:t=e.sent;case 11:l(t),ee(t);case 13:case"end":return e.stop()}}),e)}))),[]),c.default.useEffect((function(){if((null==o?void 0:o.length)>0&&null!=J.current){var e=o.filter((function(e){return e.canvasId==J.current}))[0];p(e.items),re(e.items[0])}}),[T]);var ee=function(e){var t,r,n,a=function(e){return e.filter((function(e){return e.canvasId==T}))};if(!(null!=e&&e.length)>0||!(null!==(t=a(e))&&void 0!==t&&t.length)>0||!(null!==(n=e,r=a(n)[0].items)&&void 0!==r&&r.length)>0)$(!0),Q([]),x({tType:Jt.noTranscript}),A(vr);else{$(!1);var i=a(e)[0];p(i.items),re(i.items[0])}O(!1)},te=function(){var e=W;new MutationObserver((function(e,t){var r,n=dr(e);try{for(n.s();!(r=n.n()).done;){var a;if(null!==(a=r.value.attributeName)&&void 0!==a&&a.includes("src")){var i=document.querySelector("video")||document.querySelector("audio");i&&(O(!0),Z(parseInt(i.dataset.canvasindex)))}}}catch(e){n.e(e)}finally{n.f()}})).observe(e,{attributes:!0,childList:!0,subtree:!0})},re=function(){var e=Ue(Ge.mark((function e(t){var r,n,a,i,u,o,l,c,s,f,d;return Ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!=t){e.next=6;break}return $(!0),O(!1),x({tType:Jt.noTranscript}),A(vr),e.abrupt("return");case 6:if($(!1),n=(r=t).id,a=r.title,i=r.url,u=r.isMachineGen,!((null==(o=q.filter((function(e){return e.id==n&&e.canvasId==J.current})))?void 0:o.length)>0)){e.next=15;break}l=o[0],c=l.data,s=l.fileExt,f=l.type,d=l.errorMsg,(null==c?void 0:c.length)>0?(Q(c),A("")):A(d),x({title:a,id:n,isMachineGen:u,tType:f,tUrl:i,tFileExt:s}),e.next=17;break;case 15:return e.next=17,Promise.resolve(er(i,J.current)).then((function(e){if(null!=e){var r=e.tData,i=e.tUrl,o=e.tType,l=e.tFileExt,c="";o===Jt.invalid?c="Invalid URL for transcript, please check again.":o===Jt.noTranscript&&(c=vr),A(c),Q(r),x({title:a,id:n,isMachineGen:u,tType:o,tUrl:i,tFileExt:l}),t=fr(fr({},t),{},{type:o,data:r,fileExt:l,canvasId:J.current,errorMsg:c}),V([].concat(Vt(q),[t]))}}));case 17:O(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(e,t,r,n){n&&t&&r&&(e>=t&&e<=r?(n.classList.add("active"),n.offsetTop):n.classList.remove("active"),G.current||n.scrollIntoView({behavior:"smooth",block:"center"}))},ie=function(e){"keydown"!==e.type||" "!==e.key&&"Enter"!==e.key||ue(e)},ue=function(e){e.preventDefault(),W&&(W.currentTime=e.currentTarget.getAttribute("starttime")),K.current.map((function(e){e&&e.classList.contains("active")&&e.classList.remove("active")})),e.currentTarget.classList.add("active")},oe=function(e){!function(e){G.current=e,z=e}(e)},le=function(e){return e.speaker?"<u>".concat(e.speaker,":</u> ").concat(e.text):e.text};return c.default.useEffect((function(){if(X.current){B([]);var e=[];switch(_.tType){case Jt.doc:e.push(c.default.createElement("div",{"data-testid":"transcript_docs",dangerouslySetInnerHTML:{__html:m[0]}}));break;case Jt.timedText:m.length>0&&m.map((function(t,r){var n=c.default.createElement("a",{className:"ramp--transcript_item","data-testid":"transcript_item",key:"t_".concat(r),ref:function(e){return K.current[r]=e},onClick:ue,onKeyDown:ie,starttime:t.begin,endtime:t.end,href:"#",role:"link"},t.begin&&c.default.createElement("span",{className:"ramp--transcript_time","data-testid":"transcript_time",key:"ttime_".concat(r)},"[",ae(t.begin,!0),"]"),c.default.createElement("span",{className:"ramp--transcript_text","data-testid":"transcript_text",key:"ttext_".concat(r),dangerouslySetInnerHTML:{__html:le(t)}}));e.push(n)}));break;case Jt.plainText:e.push(c.default.createElement("div",{"data-testid":"transcript_plain-text",key:0,dangerouslySetInnerHTML:{__html:m}}));break;case Jt.invalid:case Jt.noTranscript:default:e.push(c.default.createElement("p",{key:"no-transcript",id:"no-transcript","data-testid":"no-transcript",role:"note"},M))}B(e)}}),[T,C,_.id]),C?c.default.createElement("div",{className:"lds-spinner"},c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null)):c.default.createElement("div",{className:"ramp--transcript_nav","data-testid":"transcript_nav",key:_.title,onMouseOver:function(){return oe(!0)},onMouseLeave:function(){return oe(!1)}},!H.current&&c.default.createElement("div",{className:"transcript_menu"},c.default.createElement(zt,{selectTranscript:function(e){B([]);var t=d.filter((function(t){return t.id===e}));re(t[0])},transcriptData:d,transcriptInfo:_,noTranscript:(null==M?void 0:M.length)>0})),c.default.createElement("div",{className:"transcript_content ".concat(X.current?"":"static"),ref:Y,"data-testid":"transcript_content_".concat(_.tType),role:"list","aria-label":"Attached Transcript content"},(null==D?void 0:D.length)>0?D.map((function(e){return e})):c.default.createElement("div",{className:"lds-spinner"},c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null),c.default.createElement("div",null))))};hr.propTypes={playerID:K.string.isRequired,manifestUrl:K.string,transcripts:K.arrayOf(K.shape({canvasId:K.number.isRequired,items:K.arrayOf(K.shape({title:K.string,url:K.string}))}))};var mr=function(e){var r=e.displayTitle,n=void 0===r||r,a=e.showHeading,i=void 0===a||a,u=L().manifest,o=c.default.useState(),l=E(o,2),s=l[0],d=l[1];return c.default.useEffect((function(){if(u){var e=function(e){try{var r=t.parseManifest(e).getMetadata(),n=[];return(null==r?void 0:r.length)>0?(r.map((function(e){var t=e.getValue().replace(/\n/g,"<br />"),r=f.default(t,xe({},we));n.push({label:e.getLabel(),value:r})})),n):(console.error("iiif-parser -> parseMetadata() -> no metadata in Manifest"),n)}catch(e){throw console.error("iiif-parser -> parseMetadata() -> cannot parse manifest, ",e),new Error(ee)}}(u);n||(e=e.filter((function(e){return"title"!=e.label.toLowerCase()}))),d(e)}}),[u]),s&&s.length>0?c.default.createElement("div",{"data-testid":"metadata-display",className:"ramp--metadata-display"},i&&c.default.createElement("div",{className:"ramp--metadata-display-title","data-testid":"metadata-display-title"},c.default.createElement("h4",null,"Details")),c.default.createElement("div",{className:"ramp--metadata-display-content"},s.map((function(e,t){return c.default.createElement(c.default.Fragment,{key:t},c.default.createElement("dt",null,e.label),c.default.createElement("dd",{dangerouslySetInnerHTML:{__html:e.value}}))})))):c.default.createElement("div",{"data-testid":"metadata-display",className:"ramp--metadata-display"},c.default.createElement("p",null,"No valid Metadata is in the Manifest"))};mr.propTypes={displayTitle:K.bool,showHeading:K.bool};var yr=function(e){var t=e.label,r=void 0===t?"Autoplay":t,n=e.showLabel,a=void 0===n||n,i=L().autoAdvance,u=D();return c.default.createElement("div",{"data-testid":"auto-advance",className:"ramp--auto-advance"},a&&c.default.createElement("span",{className:"ramp--auto-advance-label","data-testid":"auto-advance-label",htmlFor:"auto-advance-toggle",id:"auto-advance-toggle-label"},r),c.default.createElement("label",{className:"ramp--auto-advance-toggle","aria-labelledby":"auto-advance-toggle-label"},c.default.createElement("input",{"data-testid":"auto-advance-toggle",name:"auto-advance-toggle",type:"checkbox",checked:i,onChange:function(e){return u({autoAdvance:e.target.checked,type:"setAutoAdvance"})}}),c.default.createElement("span",{className:"slider round"})))};yr.propTypes={label:K.string,showLabel:K.bool};var gr=function(){return c.default.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{fill:"white",height:"1rem",width:"1rem",scale:.8}},c.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.1213 2.70705C19.9497 1.53548 18.0503 1.53547 16.8787 2.70705L15.1989  4.38685L7.29289 12.2928C7.16473 12.421 7.07382 12.5816 7.02986 12.7574L6.02986  16.7574C5.94466 17.0982 6.04451 17.4587 6.29289 17.707C6.54127 17.9554 6.90176  18.0553 7.24254 17.9701L11.2425 16.9701C11.4184 16.9261 11.5789 16.8352 11.7071  16.707L19.5556 8.85857L21.2929 7.12126C22.4645 5.94969 22.4645 4.05019 21.2929  2.87862L21.1213 2.70705ZM18.2929 4.12126C18.6834 3.73074 19.3166 3.73074 19.7071  4.12126L19.8787 4.29283C20.2692 4.68336 20.2692 5.31653 19.8787 5.70705L18.8622  6.72357L17.3068 5.10738L18.2929 4.12126ZM15.8923 6.52185L17.4477 8.13804L10.4888  15.097L8.37437 15.6256L8.90296 13.5112L15.8923 6.52185ZM4 7.99994C4 7.44766 4.44772  6.99994 5 6.99994H10C10.5523 6.99994 11 6.55223 11 5.99994C11 5.44766 10.5523  4.99994 10 4.99994H5C3.34315 4.99994 2 6.34309 2 7.99994V18.9999C2 20.6568 3.34315  21.9999 5 21.9999H16C17.6569 21.9999 19 20.6568 19 18.9999V13.9999C19 13.4477  18.5523 12.9999 18 12.9999C17.4477 12.9999 17 13.4477 17 13.9999V18.9999C17  19.5522 16.5523 19.9999 16 19.9999H5C4.44772 19.9999 4 19.5522 4 18.9999V7.99994Z",fill:"#fffff"}))},br=function(){return c.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"#ffffff",style:{height:"1rem",width:"1rem",scale:.8}},c.default.createElement("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),c.default.createElement("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("g",{id:"SVGRepo_iconCarrier"},c.default.createElement("path",{d:"M10 12V17",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("path",{d:"M14 12V17",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("path",{d:"M4 7H20",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("path",{d:"M6 10V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V10",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("path",{d:"M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))},_r=function(){return c.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{height:"1rem",width:"1rem",scale:.8}},c.default.createElement("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),c.default.createElement("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("g",{id:"SVGRepo_iconCarrier"},c.default.createElement("g",{id:"Interface / Check"},c.default.createElement("path",{id:"Vector",d:"M6 12L10.2426 16.2426L18.727 7.75732",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))))},xr=function(){return c.default.createElement("svg",{fill:"#ffffff",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{height:"1rem",width:"1rem",scale:.8}},c.default.createElement("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),c.default.createElement("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),c.default.createElement("g",{id:"SVGRepo_iconCarrier"}," ",c.default.createElement("title",null,"cancel2"),c.default.createElement("path",{d:"M19.587 16.001l6.096 6.096c0.396 0.396 0.396 1.039 0 1.435l-2.151 2.151c-0.396  0.396-1.038 0.396-1.435 0l-6.097-6.096-6.097 6.096c-0.396 0.396-1.038  0.396-1.434 0l-2.152-2.151c-0.396-0.396-0.396-1.038  0-1.435l6.097-6.096-6.097-6.097c-0.396-0.396-0.396-1.039 0-1.435l2.153-2.151c0.396-0.396  1.038-0.396 1.434 0l6.096 6.097 6.097-6.097c0.396-0.396 1.038-0.396 1.435 0l2.151 2.152c0.396  0.396 0.396 1.038 0 1.435l-6.096 6.096z"})))},wr=function(e){var r=e.newMarkerEndpoint,n=e.canvasId,a=e.handleCreate,i=e.getCurrentTime,u=c.default.useState(!1),o=E(u,2),l=o[0],s=o[1],f=c.default.useState(!1),d=E(f,2),p=d[0],v=d[1],h=c.default.useState(!1),m=E(h,2),y=m[0],g=m[1],b=c.default.useState(""),_=E(b,2),x=_[0],w=_[1],k=c.default.useState(),T=E(k,2),j=T[0],S=T[1],I=function(e){S(e);var t=ye(e);v(t)};return c.default.createElement("div",{className:"ramp-markers-display__new-marker"},c.default.createElement("button",{type:"submit",onClick:function(){var e=ae(i(),!0,!0);I(e),s(!0)},className:"ramp--markers-display__edit-button","data-testid":"create-new-marker-button"},"Add New Marker"),l&&c.default.createElement("form",{className:"ramp--markers-display__new-marker-form",method:"post",onSubmit:function(e){e.preventDefault();var i=e.target,u=new FormData(i),o=Object.fromEntries(u.entries()),l=o.label,c=o.time,f={type:"Annotation",motivation:"highlighting",body:{type:"TextualBody",format:"text/html",value:l},target:"".concat(n,"#t=").concat(ie(c))},d={method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(f)};fetch(r,d).then((function(e){if(201!=e.status)throw new Error;return e.json()})).then((function(e){var r,n=Me((r=e,new t.Annotation(r)));n&&a(n),s(!1)})).catch((function(e){console.error("CreateMarker -> handleCreateMarker() -> failed to create annotation; ",e),g(!0),w("Marker creation failed.")}))},"data-testid":"create-new-marker-form"},c.default.createElement("table",{className:"create-marker-form-table"},c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement("label",{htmlFor:"new-marker-title"},"Title:"),c.default.createElement("input",{id:"new-marker-title","data-testid":"create-marker-title",type:"text",className:"ramp--markers-display__create-marker",name:"label"})),c.default.createElement("td",null,c.default.createElement("label",{htmlFor:"new-marker-time"},"Time:"),c.default.createElement("input",{id:"new-marker-time","data-testid":"create-marker-timestamp",type:"text",className:"ramp--markers-display__create-marker ".concat(p?"time-valid":"time-invalid"),name:"time",value:j,onChange:function(e){return I(e.target.value)}})),c.default.createElement("td",null,c.default.createElement("div",{className:"marker-actions"},y&&c.default.createElement("p",{className:"ramp--markers-display__error-message"},x),c.default.createElement("button",{type:"submit",className:"ramp--markers-display__edit-button","data-testid":"edit-save-button",disabled:!p},c.default.createElement(_r,null)," Save"),c.default.createElement("button",{className:"ramp--markers-display__edit-button-danger","data-testid":"edit-cancel-button",onClick:function(){s(!1),v(!1),w(""),g(!1)}},c.default.createElement(xr,null)," Cancel"))))))))};wr.propTypes={newMarkerEndpoint:K.string.isRequired,canvasId:K.string,handleCreate:K.func.isRequired,getCurrentTime:K.func.isRequired};var Er=function(e){var t=e.marker,r=e.handleSubmit,n=e.handleMarkerClick,a=e.handleDelete,i=e.hasAnnotationService,u=e.isEditing,o=e.toggleIsEditing,l=c.default.useState(!1),s=E(l,2),f=s[0],d=s[1],p=c.default.useState(!0),v=E(p,2),h=v[0],m=v[1],y=c.default.useState(),g=E(y,2),b=g[0],_=g[1],x=c.default.useState(!1),w=E(x,2),k=w[0],T=w[1],j=c.default.useState(!1),S=E(j,2),I=S[0],C=S[1],O=c.default.useState(""),P=E(O,2),R=P[0],M=P[1];c.default.useEffect((function(){return{}}),[]),c.default.useEffect((function(){N(t.value),B(t.timeStr)}),[t]);var A=c.default.useRef(t.value),N=function(e){A.current=e},L=c.default.useRef(ie(t.timeStr)),D=c.default.useRef(t.timeStr),B=function(e){D.current=e,L.current=ie(e)},F=function(){C(!1),M("")},U=function(){T(!1),d(!1),o(!1)};return f?c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement("input",{id:"label","data-testid":"edit-label",defaultValue:A.current,type:"text",className:"ramp--markers-display__edit-marker",onChange:function(e){return N(e.target.value)},name:"label"})),c.default.createElement("td",null,c.default.createElement("input",{className:"ramp--markers-display__edit-marker ".concat(h?"time-valid":"time-invalid"),id:"time","data-testid":"edit-timestamp",defaultValue:D.current,type:"text",onChange:function(e){return function(e){var t=ye(e);m(t),B(e)}(e.target.value)},name:"time"})),c.default.createElement("td",null,c.default.createElement("div",{className:"marker-actions"},I&&c.default.createElement("p",{className:"ramp--markers-display__error-message"},R),c.default.createElement("button",{type:"submit",onClick:function(){var e={type:"Annotation",motivation:"highlighting",body:{type:"TextualBody",format:"text/html",value:A.current},id:t.id,target:"".concat(t.canvasId,"#t=").concat(ie(D.current))},n={method:"PUT",headers:{Accept:"application/json"},body:JSON.stringify(e)};fetch(t.id,n).then((function(e){if(201!=e.status)throw new Error;r(A.current,D.current,t.id),F(),U()})).catch((function(e){console.error("MarkerRow -> handleEditSubmit -> failed to update annotation; ",e),C(!0),M("Marker update failed")}))},disabled:!h,className:"ramp--markers-display__edit-button","data-testid":"edit-save-button"},c.default.createElement(_r,null)," Save"),c.default.createElement("button",{className:"ramp--markers-display__edit-button-danger","data-testid":"edit-cancel-button",onClick:function(){B(b.time),N(b.label),_({}),F(),U()}},c.default.createElement(xr,null)," Cancel")))):k?c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement("a",{href:"".concat(t.canvasId,"#t=").concat(L.current,","),onClick:function(e){return n(e)},"data-offset":L.current},A.current)),c.default.createElement("td",null,D.current),c.default.createElement("td",null,c.default.createElement("div",{className:"marker-actions"},c.default.createElement("p",null,"Are you sure?"),c.default.createElement("button",{type:"submit",className:"ramp--markers-display__edit-button-danger","data-testid":"delete-confirm-button",onClick:function(){fetch(t.id,{method:"DELETE",headers:{Accept:"application/json"}}).then((function(e){if(200!=e.status)throw new Error;a(t.id),F(),U()})).catch((function(e){console.error("MarkerRow -> submitDelete() -> failed to delete annotation; ",e),U(),C(!0),M("Marker delete failed."),setTimeout((function(){F()}),1500)}))}},c.default.createElement(_r,null)," Yes"),c.default.createElement("button",{className:"ramp--markers-display__edit-button","data-testid":"delete-cancel-button",onClick:U},c.default.createElement(xr,null)," Cancel")))):c.default.createElement("tr",null,c.default.createElement("td",null,c.default.createElement("a",{href:"".concat(t.canvasId,"#t=").concat(L.current,","),onClick:function(e){return n(e)},"data-offset":L.current},A.current)),c.default.createElement("td",null,D.current),i&&c.default.createElement("td",null,c.default.createElement("div",{className:"marker-actions"},I&&c.default.createElement("p",{className:"ramp--markers-display__error-message"},R),c.default.createElement("button",{onClick:function(){_({time:D.current,label:A.current}),d(!0),o(!0)},className:"ramp--markers-display__edit-button","data-testid":"edit-button",disabled:u},c.default.createElement(gr,null)," Edit"),c.default.createElement("button",{className:"ramp--markers-display__edit-button-danger","data-testid":"delete-button",disabled:u,onClick:function(){T(!0),o(!0)}},c.default.createElement(br,null)," Delete"))))};Er.propTypes={marker:K.object.isRequired,handleSubmit:K.func.isRequired,handleMarkerClick:K.func.isRequired,handleDelete:K.func.isRequired,hasAnnotationService:K.bool.isRequired,isEditing:K.bool.isRequired,toggleIsEditing:K.func.isRequired};var kr=function(e){var t=e.showHeading,r=void 0===t||t,n=e.headingText,i=void 0===n?"Markers":n,u=L(),o=u.manifest,l=u.canvasIndex,s=u.playlist,f=G().player,d=D(),p=s.isEditing,v=s.hasAnnotationService,h=s.annotationServiceId,m=c.default.useState(),y=E(m,2),g=y[0],b=y[1],_=a.useErrorBoundary().showBoundary,x=c.default.useRef(),w=c.default.useRef([]),k=function(e){w.current=e};c.default.useEffect((function(){if(o)try{var e=function(e){try{var t=ne(e)[0].getCanvases(),r=[];return t&&t.map((function(e,t){var n=se(e.__jsonld.annotations,"highlighting");if(n&&0!==n.length){if(n.length>0){var a=[];n.map((function(e){var t=Me(e);t&&a.push(t)})),r.push({canvasMarkers:a,canvasIndex:t,error:""})}}else r.push({canvasMarkers:[],canvasIndex:t,error:"No markers were found in the Canvas"})})),r}catch(e){throw e}}(o);d({markers:e,type:"setPlaylistMarkers"});var t=Ee(o);null!=t&&(null==t?void 0:t.length)>0&&(x.current=t[l].canvasId)}catch(e){_(e)}}),[o]),c.default.useEffect((function(){var e;if((null===(e=s.markers)||void 0===e?void 0:e.length)>0){var t=s.markers.filter((function(e){return e.canvasIndex===l}))[0],r=t.canvasMarkers,n=t.error;k(r),b(n)}if(o)try{var a=Ee(o);null!=a&&(null==a?void 0:a.length)>0&&(x.current=a[l].canvasId)}catch(n){_(n)}}),[l,s.markers]);var T=function(e,t,r){var n=w.current.map((function(n){return n.id===r&&(n.value=e,n.timeStr=t,n.time=ie(t)),n}));k(n),d({updatedMarkers:n,type:"setPlaylistMarkers"})},j=function(e){var t=w.current.filter((function(t){return t.id!=e}));k(t),d({updatedMarkers:t,type:"setPlaylistMarkers"})},S=function(e){e.preventDefault();var t=parseFloat(e.target.dataset.offset);f.currentTime(t)},I=function(e){d({isEditing:e,type:"setIsEditing"})};return c.default.createElement("div",{className:"ramp--markers-display","data-testid":"markers-display"},r&&c.default.createElement("div",{className:"ramp--markers-display__title","data-testid":"markers-display-title"},c.default.createElement("h4",null,i)),v&&c.default.createElement(wr,{newMarkerEndpoint:h,canvasId:x.current,handleCreate:function(e){k([].concat(Vt(w.current),[e])),d({updatedMarkers:w.current,type:"setPlaylistMarkers"})},getCurrentTime:function(){return f?f.currentTime():0}}),w.current.length>0&&c.default.createElement("table",{className:"ramp--markers-display_table","data-testid":"markers-display-table"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,"Name"),c.default.createElement("th",null,"Time"),v&&c.default.createElement("th",null,"Actions"))),c.default.createElement("tbody",null,w.current.map((function(e,t){return c.default.createElement(Er,{key:t,marker:e,handleSubmit:T,handleMarkerClick:S,handleDelete:j,hasAnnotationService:v,isEditing:p,toggleIsEditing:I})})))),0==w.current.length&&c.default.createElement("div",{className:"ramp--markers-display__markers-empty","data-testid":"markers-empty"},c.default.createElement("p",null,g)))};kr.propTypes={showHeading:K.bool,headingText:K.string},exports.AutoAdvanceToggle=yr,exports.IIIFPlayer=De,exports.MarkersDisplay=kr,exports.MediaPlayer=Mt,exports.MetadataDisplay=mr,exports.StructuredNavigation=Bt,exports.SupplementalFiles=function(e){var t=e.itemHeading,r=void 0===t?"Item files":t,n=e.sectionHeading,i=void 0===n?"Section files":n,u=e.showHeading,o=void 0===u||u,l=L().manifest,s=c.default.useState(),f=E(s,2),d=f[0],p=f[1],v=c.default.useState(),h=E(v,2),m=h[0],y=h[1],g=a.useErrorBoundary().showBoundary;c.default.useEffect((function(){if(l)try{var e=Oe(l),t=e.manifest;p(t);var r=function(e){var t=[];try{var r=ne(e)[0].getCanvases();return null!=r&&null!=r&&r.map((function(e,r){var n=[],a=e.__jsonld.annotations,i=[];if(null!=a&&a.length){var u=a[0];u&&(i=u.items.filter((function(e){return"supplementing"==e.motivation&&e.body.id})))}i.map((function(e){var t=e.body,r=Ce(t.format,t.label,t.id);n.push(r)}));var o=e.getLabel().getValue()||"Section "+(r+1);t.push({label:me(o),files:n})})),t}catch(e){throw e}}(l),n=e.canvas;n.map((function(e,t){return e.files=e.files.concat(r[t].files)})),n=n.filter((function(e){return e.files.length>0})),y(n)}catch(e){g(e)}}),[l]);var b=function(){return(null==m?void 0:m.length)>0||(null==d?void 0:d.length)>0},_=function(e,t){e.preventDefault(),le(t.id,t.filename,t.fileExt)};return c.default.createElement("div",{"data-testid":"supplemental-files",className:"ramp--supplemental-files"},o&&c.default.createElement("div",{className:"ramp--supplemental-files-heading","data-testid":"supplemental-files-heading"},c.default.createElement("h4",null,"Files")),b()&&c.default.createElement("div",{className:"ramp--supplemental-files-display-content","data-testid":"supplemental-files-display-content"},Array.isArray(d)&&d.length>0&&c.default.createElement(c.default.Fragment,null,c.default.createElement("h4",null,r),c.default.createElement("dl",{key:"item-files"},d.map((function(e,t){return c.default.createElement(c.default.Fragment,{key:t},c.default.createElement("dd",{key:"item-file-".concat(t)},c.default.createElement("a",{href:e.id,key:t,onClick:function(t){return _(t,e)}},e.label)))})))),Array.isArray(m)&&m.length>0&&c.default.createElement(c.default.Fragment,null,c.default.createElement("h4",null,i),m.map((function(e,t){var r=e.files;return c.default.createElement("dl",{key:"section-".concat(t,"-label")},c.default.createElement("dt",{key:e.label},e.label),r.map((function(e,r){return c.default.createElement("dd",{key:"section-".concat(t,"-file-").concat(r)},c.default.createElement("a",{href:e.id,key:r,onClick:function(t){return _(t,e)}},e.label))})))})))),!b()&&c.default.createElement("div",{"data-testid":"supplemental-files-empty",className:"ramp--supplemental-files-empty"},c.default.createElement("p",null,"No Supplemental file(s) in Manifest")))},exports.Transcript=hr;
